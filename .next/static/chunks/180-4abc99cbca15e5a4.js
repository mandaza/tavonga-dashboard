"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{3415:function(e,t,s){s.d(t,{x:function(){return r}});let ApiClient=class ApiClient{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseURL).concat(e),r=this.getAuthToken(),a={"Content-Type":"application/json",...t.headers||{}};r&&(a.Authorization="Bearer ".concat(r));let c={...t,headers:a};try{let e=await fetch(s,c);if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"HTTP error! status: ".concat(e.status))}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}getAuthToken(){return localStorage.getItem("access_token")}setAuthToken(e){localStorage.setItem("access_token",e)}clearAuthToken(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}async login(e){let t=await this.request("/users/login",{method:"POST",body:JSON.stringify(e)});return this.setAuthToken(t.tokens.access),localStorage.setItem("refresh_token",t.tokens.refresh),t}async register(e){let t=await this.request("/users",{method:"POST",body:JSON.stringify(e)});return t}async logout(){this.clearAuthToken()}async getProfile(){return this.request("/users/profile")}async updateProfile(e){return this.request("/users/update_profile",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e){return this.request("/users/change_password",{method:"PUT",body:JSON.stringify(e)})}async getClients(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/clients".concat(t))}async getClient(e){return this.request("/clients/".concat(e))}async createClient(e){return this.request("/clients",{method:"POST",body:JSON.stringify(e)})}async updateClient(e,t){return this.request("/clients/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteClient(e){return this.request("/clients/".concat(e),{method:"DELETE"})}async getClientSummary(){return this.request("/clients/summary")}async getClientContacts(e){return this.request("/clients/".concat(e,"/contacts"))}async getUsers(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("".concat("/users").concat(t))}async approveUser(e){return this.request("/users/".concat(e,"/approve"),{method:"POST"})}async disableUser(e){return this.request("/users/".concat(e,"/disable"),{method:"POST"})}async enableUser(e){return this.request("/users/".concat(e,"/enable"),{method:"POST"})}async updateUser(e,t){return this.request("/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/users/".concat(e),{method:"DELETE"})}async getBehaviors(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/behaviors".concat(t))}async getBehavior(e){return this.request("/behaviors/".concat(e))}async createBehavior(e){return this.request("/behaviors",{method:"POST",body:JSON.stringify(e)})}async updateBehavior(e,t){return this.request("/behaviors/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteBehavior(e){return this.request("/behaviors/".concat(e),{method:"DELETE"})}async getMyBehaviors(){return this.request("/behaviors/my_behaviors")}async getCriticalBehaviors(){return this.request("/behaviors/critical")}async getTodayBehaviors(){return this.request("/behaviors/today")}async getActivities(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/activities".concat(t))}async getActivity(e){return this.request("/activities/".concat(e))}async createActivity(e){return this.request("/activities",{method:"POST",body:JSON.stringify(e)})}async updateActivity(e,t){return this.request("/activities/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteActivity(e){return this.request("/activities/".concat(e),{method:"DELETE"})}async getActivityLogs(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/activities/logs".concat(t))}async createActivityLog(e){return this.request("/activities/logs",{method:"POST",body:JSON.stringify(e)})}async updateActivityLog(e,t){return this.request("/activities/logs/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteActivityLog(e){return this.request("/activities/logs/".concat(e),{method:"DELETE"})}async getActivityLog(e){return this.request("/activities/logs/".concat(e))}async getTodayActivities(){return this.request("/activities/logs/today")}async getMyActivities(){return this.request("/activities/logs/my_activities")}async getOverdueActivities(){return this.request("/activities/logs/overdue")}async getActivityAnalytics(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/activities/logs/analytics".concat(t))}async getMasteryTracking(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/activities/logs/mastery_tracking".concat(t))}async getSchedules(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/scheduler/schedules".concat(t))}async getSchedule(e){return this.request("/scheduler/schedules/".concat(e))}async createSchedule(e){return this.request("/scheduler/schedules",{method:"POST",body:JSON.stringify(e)})}async updateSchedule(e,t){return this.request("/scheduler/schedules/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteSchedule(e){return this.request("/scheduler/schedules/".concat(e),{method:"DELETE"})}async getScheduleCalendar(e,t){return this.request("/scheduler/schedules/calendar?start_date=".concat(e,"&end_date=").concat(t))}async getTodaySchedules(){return this.request("/scheduler/schedules/today")}async getUpcomingSchedules(){return this.request("/scheduler/schedules/upcoming")}async getOverdueSchedules(){return this.request("/scheduler/schedules/overdue")}async performScheduleAction(e,t,s){return this.request("/scheduler/schedules/".concat(e,"/quick_action"),{method:"POST",body:JSON.stringify({action:t,...s})})}async rescheduleActivity(e,t,s,r){return this.request("/scheduler/schedules/".concat(e,"/reschedule"),{method:"POST",body:JSON.stringify({new_date:t,new_time:s,reason:r})})}async getScheduleStats(){return this.request("/scheduler/schedules/stats")}async getScheduleConflicts(){return this.request("/scheduler/schedules/conflicts")}async getGoals(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/goals".concat(t))}async getGoal(e){return this.request("/goals/".concat(e))}async createGoal(e){return this.request("/goals",{method:"POST",body:JSON.stringify(e)})}async updateGoal(e,t){return this.request("/goals/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteGoal(e){return this.request("/goals/".concat(e),{method:"DELETE"})}async trackGoalProgress(e,t){return this.request("/goals/".concat(e,"/track"),{method:"POST",body:JSON.stringify(t)})}async getShifts(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/shifts".concat(t))}async getShift(e){return this.request("/shifts/".concat(e))}async createShift(e){return this.request("/shifts",{method:"POST",body:JSON.stringify(e)})}async updateShift(e,t){return this.request("/shifts/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteShift(e){return this.request("/shifts/".concat(e),{method:"DELETE"})}async clockIn(e,t){return this.request("/shifts/".concat(e,"/clock-in"),{method:"POST",body:JSON.stringify({location:t})})}async clockOut(e,t){return this.request("/shifts/".concat(e,"/clock-out"),{method:"PATCH",body:JSON.stringify({location:t})})}async getMyShifts(){return this.request("/shifts/my_shifts")}async getBehaviorReports(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/reports/behaviors".concat(t))}async getActivityReports(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/reports/activities".concat(t))}async getShiftReports(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"";return this.request("/reports/shifts".concat(t))}async uploadMedia(e,t){let s=new FormData;s.append("file",e),t&&s.append("metadata",JSON.stringify(t));let r=this.getAuthToken(),a={};r&&(a.Authorization="Bearer ".concat(r));let c=await fetch("".concat(this.baseURL,"/media/upload"),{method:"POST",headers:a,body:s});if(!c.ok)throw Error("Upload failed: ".concat(c.status));return c.json()}async getDashboardStats(){return this.request("/dashboard/stats")}async generateBehaviorReport(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"",s=await fetch("".concat(this.baseURL,"/reports/behaviors").concat(t),{headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return s.blob()}async generateActivityReport(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"",s=await fetch("".concat(this.baseURL,"/reports/activities").concat(t),{headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return s.blob()}async generateShiftReport(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"",s=await fetch("".concat(this.baseURL,"/reports/shifts").concat(t),{headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return s.blob()}async generateGoalReport(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"",s=await fetch("".concat(this.baseURL,"/reports/goals").concat(t),{headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return s.blob()}async generateScheduleReport(e){let t=e?"?".concat(new URLSearchParams(e).toString()):"",s=await fetch("".concat(this.baseURL,"/reports/schedules").concat(t),{headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return s.blob()}constructor(e){this.baseURL=e}};let r=new ApiClient("https://jellyfish-app-ho48c.ondigitalocean.app/api/v1")},2180:function(e,t,s){s.r(t),s.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth},useIsAdmin:function(){return useIsAdmin},useIsApproved:function(){return useIsApproved},useRequireAdmin:function(){return useRequireAdmin},useRequireAuth:function(){return useRequireAuth}});var r=s(7437),a=s(2265),c=s(4033),n=s(3415),i=s(5925);let o=(0,a.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[s,u]=(0,a.useState)(null),[h,l]=(0,a.useState)(!0),d=(0,c.useRouter)();(0,a.useEffect)(()=>{checkAuth()},[]);let checkAuth=async()=>{try{let e=localStorage.getItem("access_token");if(e){let e=await n.x.getProfile();u(e)}}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}finally{l(!1)}},login=async(e,t)=>{try{l(!0);let s=await n.x.login({email:e,password:t});u(s.user),i.default.success("Login successful!"),d.push("/dashboard")}catch(e){throw i.default.error(e.message||"Login failed"),e}finally{l(!1)}},register=async e=>{try{l(!0),await n.x.register(e),i.default.success("Registration successful! Please wait for admin approval."),d.push("/login")}catch(e){throw i.default.error(e.message||"Registration failed"),e}finally{l(!1)}},updateProfile=async e=>{try{let t=await n.x.updateProfile(e);u(t),i.default.success("Profile updated successfully")}catch(e){throw i.default.error(e.message||"Profile update failed"),e}};return(0,r.jsx)(o.Provider,{value:{user:s,loading:h,login,register,logout:()=>{n.x.logout(),u(null),i.default.success("Logged out successfully"),d.push("/login")},updateProfile},children:t})}function useAuth(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function useIsAdmin(){let{user:e}=useAuth();return(null==e?void 0:e.is_admin)||!1}function useIsApproved(){let{user:e}=useAuth();return(null==e?void 0:e.approved)||!1}function useRequireAuth(){let{user:e,loading:t}=useAuth(),s=(0,c.useRouter)();return(0,a.useEffect)(()=>{t||e||s.push("/login")},[e,t,s]),{user:e,loading:t}}function useRequireAdmin(){let{user:e,loading:t}=useRequireAuth(),s=(0,c.useRouter)();return(0,a.useEffect)(()=>{t||!e||e.is_admin||s.push("/dashboard")},[e,t,s]),{user:e,loading:t}}}}]);