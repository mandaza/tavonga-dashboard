(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{1981:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2894:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3008:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6264:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},290:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},9617:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6245:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},1827:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5367:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5790:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},2549:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5766:function(e,t,s){Promise.resolve().then(s.bind(s,2101))},2101:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return GoalsPage}});var a=s(7437),l=s(2265),r=s(1617),i=s(8230),n=s(2457),c=s(1981),d=s(6654),o=s(8203),x=s(998),m=s(5750),h=s(6264),u=s(290),p=s(9617),g=s(5367),j=s(1827),b=s(9883),f=s(5790),N=s(3008),v=s(6141),y=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let D=(0,y.Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var w=s(105),C=s(1628),_=s(6527),F=s(8823),k=s(3415),E=s(5925),Z=s(2549),B=s(6245);function AddGoalModal(e){let{isOpen:t,onClose:s,onSuccess:r}=e,[i,n]=(0,l.useState)({name:"",description:"",category:"",target_date:"",priority:"medium",notes:"",assigned_carers:[],primary_activities:[],related_activities:[],completion_threshold:80}),[c,h]=(0,l.useState)({}),[u,p]=(0,l.useState)(!1),g=(0,F.Tg)(),{users:j}=(0,F.UV)(),{activities:b}=(0,F.G$)(),f=j.filter(e=>e.is_carer||"support_worker"===e.role),handleInputChange=e=>{let{name:t,value:s}=e.target;n(e=>({...e,[t]:s})),c[t]&&h(e=>({...e,[t]:""}))},handleMultiSelectChange=(e,t)=>{n(s=>({...s,[e]:s[e].includes(t)?s[e].filter(e=>e!==t):[...s[e],t]}))},validateForm=()=>{let e={};return i.name.trim()||(e.name="Goal name is required"),i.description.trim()||(e.description="Description is required"),i.category.trim()||(e.category="Category is required"),(i.completion_threshold<1||i.completion_threshold>100)&&(e.completion_threshold="Completion threshold must be between 1 and 100"),h(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){p(!0);try{await g(i),E.default.success("Goal created successfully!"),r(),s(),n({name:"",description:"",category:"",target_date:"",priority:"medium",notes:"",assigned_carers:[],primary_activities:[],related_activities:[],completion_threshold:80})}catch(e){E.default.error(e.message||"Failed to create goal")}finally{p(!1)}}},handleClose=()=>{u||s()};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#000000]",children:"Add New Goal"})]}),(0,a.jsx)("button",{onClick:handleClose,disabled:u,className:"w-8 h-8 bg-[#F0F0F0] rounded-lg flex items-center justify-center hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:(0,a.jsx)(Z.Z,{className:"w-4 h-4 text-[#000000]"})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Goal Name *"}),(0,a.jsx)("input",{type:"text",name:"name",value:i.name,onChange:handleInputChange,placeholder:"Enter goal name",className:"w-full px-4 py-3 rounded-lg border ".concat(c.name?"border-[#FF6B6B]":"border-[#D3D3D3]"," focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]")}),c.name&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:c.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Category *"}),(0,a.jsx)("input",{type:"text",name:"category",value:i.category,onChange:handleInputChange,placeholder:"e.g., Independence, Communication, Social Skills",className:"w-full px-4 py-3 rounded-lg border ".concat(c.category?"border-[#FF6B6B]":"border-[#D3D3D3]"," focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]")}),c.category&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:c.category})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Description *"}),(0,a.jsx)("textarea",{name:"description",value:i.description,onChange:handleInputChange,placeholder:"Describe the goal and what success looks like",rows:3,className:"w-full px-4 py-3 rounded-lg border ".concat(c.description?"border-[#FF6B6B]":"border-[#D3D3D3]"," focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none")}),c.description&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:c.description})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Goal Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Target Date"]})}),(0,a.jsx)("input",{type:"date",name:"target_date",value:i.target_date,onChange:handleInputChange,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D,{className:"w-4 h-4"}),"Priority"]})}),(0,a.jsxs)("select",{name:"priority",value:i.priority,onChange:handleInputChange,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Completion Threshold (%)"}),(0,a.jsx)("input",{type:"number",name:"completion_threshold",value:i.completion_threshold,onChange:handleInputChange,min:"1",max:"100",className:"w-full px-4 py-3 rounded-lg border ".concat(c.completion_threshold?"border-[#FF6B6B]":"border-[#D3D3D3]"," focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]")}),c.completion_threshold&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:c.completion_threshold})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Assignments"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Assigned Carers"]})}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto border border-[#D3D3D3] rounded-lg p-3 bg-white",children:0===f.length?(0,a.jsx)("p",{className:"text-[#6D6D6D] text-sm",children:"No carers available"}):f.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-2 hover:bg-[#EEF8F7] rounded cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:i.assigned_carers.includes(e.id),onChange:()=>handleMultiSelectChange("assigned_carers",e.id),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4] border-[#D3D3D3]"}),(0,a.jsx)("span",{className:"text-sm text-[#000000]",children:e.full_name}),(0,a.jsxs)("span",{className:"text-xs text-[#6D6D6D]",children:["(",e.role,")"]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Related Activities"]})}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto border border-[#D3D3D3] rounded-lg p-3 bg-white",children:0===b.length?(0,a.jsx)("p",{className:"text-[#6D6D6D] text-sm",children:"No activities available"}):b.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-2 hover:bg-[#EEF8F7] rounded cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:i.related_activities.includes(e.id),onChange:()=>handleMultiSelectChange("related_activities",e.id),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4] border-[#D3D3D3]"}),(0,a.jsx)("span",{className:"text-sm text-[#000000]",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-[#6D6D6D]",children:["(",e.category,")"]})]},e.id))})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Additional Notes"}),(0,a.jsx)("textarea",{name:"notes",value:i.notes,onChange:handleInputChange,placeholder:"Any additional notes, special instructions, or considerations...",rows:4,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-[#E0E0E0]",children:[(0,a.jsx)("button",{type:"button",onClick:handleClose,disabled:u,className:"px-6 py-3 bg-[#F0F0F0] text-[#000000] rounded-lg hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"px-6 py-3 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center gap-2",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.Z,{className:"w-4 h-4"}),"Create Goal"]})})]})]})]})}):null}function EditGoalModal(e){let{isOpen:t,onClose:s,onSuccess:r,goal:i}=e,[n,c]=(0,l.useState)({name:"",description:"",category:"",target_date:"",priority:"medium",notes:"",assigned_carers:[],primary_activities:[],related_activities:[],completion_threshold:80}),[h,u]=(0,l.useState)({}),[p,g]=(0,l.useState)(!1),j=(0,F.xg)(),{users:b}=(0,F.UV)(),{activities:f}=(0,F.G$)(),N=b.filter(e=>e.is_carer||"support_worker"===e.role);(0,l.useEffect)(()=>{if(i){var e,t,s;c({name:i.name||"",description:i.description||"",category:i.category||"",target_date:i.target_date||"",priority:i.priority||"medium",notes:i.notes||"",assigned_carers:(null===(e=i.assigned_carers)||void 0===e?void 0:e.map(e=>e.id))||[],primary_activities:(null===(t=i.primary_activities)||void 0===t?void 0:t.map(e=>e.id))||[],related_activities:(null===(s=i.related_activities)||void 0===s?void 0:s.map(e=>e.id))||[],completion_threshold:i.completion_threshold||80})}},[i]);let handleInputChange=e=>{let{name:t,value:s}=e.target;c(e=>({...e,[t]:s})),h[t]&&u(e=>({...e,[t]:""}))},handleMultiSelectChange=(e,t)=>{c(s=>({...s,[e]:s[e].includes(t)?s[e].filter(e=>e!==t):[...s[e],t]}))},validateForm=()=>{let e={};return n.name.trim()||(e.name="Goal name is required"),n.description.trim()||(e.description="Description is required"),n.category.trim()||(e.category="Category is required"),(n.completion_threshold<1||n.completion_threshold>100)&&(e.completion_threshold="Completion threshold must be between 1 and 100"),u(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()&&i){g(!0);try{await j(i.id,n),E.default.success("Goal updated successfully!"),r(),s()}catch(e){E.default.error(e.message||"Failed to update goal")}finally{g(!1)}}},handleClose=()=>{p||s()};return t&&i?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#000000]",children:"Edit Goal"}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"Update goal details and settings"})]})]}),(0,a.jsx)("button",{onClick:handleClose,disabled:p,className:"w-8 h-8 bg-[#F0F0F0] rounded-lg flex items-center justify-center hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:(0,a.jsx)(Z.Z,{className:"w-4 h-4 text-[#000000]"})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-[#EEF8F7] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Current Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"Status"}),(0,a.jsx)("p",{className:"font-medium text-[#000000] capitalize",children:i.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"Progress"}),(0,a.jsxs)("p",{className:"font-medium text-[#000000]",children:[i.calculated_progress,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"Activities"}),(0,a.jsx)("p",{className:"font-medium text-[#000000]",children:i.total_activities_count})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"Completed"}),(0,a.jsx)("p",{className:"font-medium text-[#000000]",children:i.completed_activities_count})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Goal Name *"}),(0,a.jsx)("input",{type:"text",name:"name",value:n.name,onChange:handleInputChange,placeholder:"Enter goal name",className:"w-full px-4 py-3 rounded-lg border ".concat(h.name?"border-[#FF6B6B]":"border-[#D3D3D3]"," focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]")}),h.name&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:h.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Category *"}),(0,a.jsx)("input",{type:"text",name:"category",value:n.category,onChange:handleInputChange,placeholder:"e.g., Independence, Communication, Social Skills",className:"w-full px-4 py-3 rounded-lg border ".concat(h.category?"border-[#FF6B6B]":"border-[#D3D3D3]"," focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]")}),h.category&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:h.category})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Description *"}),(0,a.jsx)("textarea",{name:"description",value:n.description,onChange:handleInputChange,placeholder:"Describe the goal and what success looks like",rows:3,className:"w-full px-4 py-3 rounded-lg border ".concat(h.description?"border-[#FF6B6B]":"border-[#D3D3D3]"," focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none")}),h.description&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:h.description})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Goal Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Target Date"]})}),(0,a.jsx)("input",{type:"date",name:"target_date",value:n.target_date,onChange:handleInputChange,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D,{className:"w-4 h-4"}),"Priority"]})}),(0,a.jsxs)("select",{name:"priority",value:n.priority,onChange:handleInputChange,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Completion Threshold (%)"}),(0,a.jsx)("input",{type:"number",name:"completion_threshold",value:n.completion_threshold,onChange:handleInputChange,min:"1",max:"100",className:"w-full px-4 py-3 rounded-lg border ".concat(h.completion_threshold?"border-[#FF6B6B]":"border-[#D3D3D3]"," focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]")}),h.completion_threshold&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:h.completion_threshold})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Assignments"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Assigned Carers"]})}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto border border-[#D3D3D3] rounded-lg p-3 bg-white",children:0===N.length?(0,a.jsx)("p",{className:"text-[#6D6D6D] text-sm",children:"No carers available"}):N.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-2 hover:bg-[#EEF8F7] rounded cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.assigned_carers.includes(e.id),onChange:()=>handleMultiSelectChange("assigned_carers",e.id),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4] border-[#D3D3D3]"}),(0,a.jsx)("span",{className:"text-sm text-[#000000]",children:e.full_name}),(0,a.jsxs)("span",{className:"text-xs text-[#6D6D6D]",children:["(",e.role,")"]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Related Activities"]})}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto border border-[#D3D3D3] rounded-lg p-3 bg-white",children:0===f.length?(0,a.jsx)("p",{className:"text-[#6D6D6D] text-sm",children:"No activities available"}):f.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-2 hover:bg-[#EEF8F7] rounded cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.related_activities.includes(e.id),onChange:()=>handleMultiSelectChange("related_activities",e.id),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4] border-[#D3D3D3]"}),(0,a.jsx)("span",{className:"text-sm text-[#000000]",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-[#6D6D6D]",children:["(",e.category,")"]})]},e.id))})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Additional Notes"}),(0,a.jsx)("textarea",{name:"notes",value:n.notes,onChange:handleInputChange,placeholder:"Any additional notes, special instructions, or considerations...",rows:4,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-[#E0E0E0]",children:[(0,a.jsx)("button",{type:"button",onClick:handleClose,disabled:p,className:"px-6 py-3 bg-[#F0F0F0] text-[#000000] rounded-lg hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:p,className:"px-6 py-3 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center gap-2",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.Z,{className:"w-4 h-4"}),"Update Goal"]})})]})]})]})}):null}var G=s(2894);function DeleteGoalModal(e){let{isOpen:t,onClose:s,onConfirm:r,goal:i}=e,[n,c]=(0,l.useState)(!1),handleConfirm=async()=>{if(i){c(!0);try{await r(i.id),s()}catch(e){console.error("Error deleting goal:",e)}finally{c(!1)}}},handleClose=()=>{n||s()};return t&&i?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#FF6B6B] rounded-lg flex items-center justify-center",children:(0,a.jsx)(G.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#000000]",children:"Delete Goal"}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"This action cannot be undone"})]})]}),(0,a.jsx)("button",{onClick:handleClose,disabled:n,className:"w-8 h-8 bg-[#F0F0F0] rounded-lg flex items-center justify-center hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:(0,a.jsx)(Z.Z,{className:"w-4 h-4 text-[#000000]"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"bg-[#FF6B6B]/10 border border-[#FF6B6B]/20 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(G.Z,{className:"w-5 h-5 text-[#FF6B6B] mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-[#000000] mb-1",children:"Are you sure you want to delete this goal?"}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"This will permanently remove the goal and all its associated data. This action cannot be undone."})]})]})}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Goal to be deleted:"}),(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 text-[#6D6D6D]"}),(0,a.jsx)("h4",{className:"font-semibold text-[#000000]",children:i.name})]}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D] mb-3",children:i.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"active":return"bg-[#4ECDC4]/10 text-[#4ECDC4]";case"completed":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-[#FF6B6B]/10 text-[#FF6B6B]";default:return"bg-gray-100 text-gray-800"}})(i.status)),children:i.status}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(i.priority)),children:i.priority})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 text-[#6D6D6D]"}),(0,a.jsx)("span",{className:"text-sm font-medium text-[#000000]",children:"Target Date"})]}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D] pl-6",children:i.target_date?(0,C.p6)(i.target_date):"No target date"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-[#6D6D6D]"}),(0,a.jsx)("span",{className:"text-sm font-medium text-[#000000]",children:"Activities"})]}),(0,a.jsxs)("p",{className:"text-sm text-[#6D6D6D] pl-6",children:[i.total_activities_count," linked"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-[#6D6D6D]"}),(0,a.jsx)("span",{className:"text-sm font-medium text-[#000000]",children:"Assigned Carers"})]}),(0,a.jsxs)("p",{className:"text-sm text-[#6D6D6D] pl-6",children:[i.assigned_carers.length," assigned"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-[#000000]",children:"Progress"}),(0,a.jsxs)("span",{className:"text-sm text-[#6D6D6D]",children:[i.calculated_progress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-[#4ECDC4] h-2 rounded-full transition-all duration-300",style:{width:"".concat(i.calculated_progress,"%")}})})]}),i.category&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-[#E0E0E0]",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-[#000000]",children:"Category: "}),(0,a.jsx)("span",{className:"text-sm text-[#6D6D6D]",children:i.category})]})]}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-[#6D6D6D] text-center",children:[(0,a.jsx)("strong",{children:"Note:"})," Deleting this goal will also remove all progress tracking and associated data. Linked activities will remain but will no longer be connected to this goal."]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4 p-6 border-t border-[#E0E0E0]",children:[(0,a.jsx)("button",{onClick:handleClose,disabled:n,className:"px-6 py-3 bg-[#F0F0F0] text-[#000000] rounded-lg hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:handleConfirm,disabled:n,className:"px-6 py-3 bg-[#FF6B6B] text-white rounded-lg hover:bg-[#FF5252] transition-colors disabled:opacity-50 flex items-center gap-2",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),"Delete Goal"]})})]})]})}):null}let GoalProgressChart=e=>{let{goals:t}=e,s={labels:t.map(e=>e.name.substring(0,15)+"..."),datasets:[{label:"Progress (%)",data:t.map(e=>e.calculated_progress),backgroundColor:t.map(e=>e.calculated_progress>=80?"#4ECDC4":e.calculated_progress>=50?"#FFA726":"#FF6B6B"),borderColor:t.map(e=>e.calculated_progress>=80?"#3DB9B2":e.calculated_progress>=50?"#FF9800":"#FF5252"),borderWidth:2,borderRadius:4}]};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-card-title",children:"Goal Progress Overview"}),(0,a.jsx)(n.Z,{className:"w-5 h-5 text-nav-icon"})]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(w.$Q,{data:s,options:{..._.q_,plugins:{..._.q_.plugins,legend:{display:!1}},scales:{x:{..._.q_.scales.x,grid:{display:!1},ticks:{..._.q_.scales.x.ticks,maxRotation:45,minRotation:45}},y:{..._.q_.scales.y,beginAtZero:!0,max:100,ticks:{..._.q_.scales.y.ticks,stepSize:20,callback:function(e){return e+"%"}}}}}})})]})},GoalCard=e=>{var t;let{goal:s,onEdit:r,onDelete:i}=e,[n,j]=(0,l.useState)(!1),[b,f]=(0,l.useState)(!1),handleDelete=async()=>{f(!0);try{await i(s.id),j(!1)}catch(e){console.error("Error deleting goal:",e)}finally{f(!1)}};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-card-title",children:s.name}),s.is_overdue&&(0,a.jsx)(c.Z,{className:"w-4 h-4 text-red-500"})]}),(0,a.jsx)("p",{className:"text-sm text-card-subtext mb-3",children:s.description}),(0,a.jsxs)("div",{className:"space-y-2",children:[s.category&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsx)("span",{className:"text-sm text-card-subtext",children:s.category})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:["Target: ",s.target_date?(0,C.p6)(s.target_date):"No target date"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:[s.total_activities_count," activity",1!==s.total_activities_count?"s":""," linked",s.completed_activities_count>0&&(0,a.jsxs)("span",{className:"text-text-positive",children:[" (",s.completed_activities_count," completed)"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:[s.assigned_carers.length," carer",1!==s.assigned_carers.length?"s":""," assigned"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:(0,C.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"active":return"bg-text-positive/10 text-text-positive";case"completed":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-text-danger/10 text-text-danger";default:return"bg-gray-100 text-gray-800"}})(s.status)),children:s.status}),(0,a.jsx)("span",{className:(0,C.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(s.priority)),children:s.priority}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>j(!n),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",disabled:b,children:b?(0,a.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(u.Z,{className:"w-4 h-4 text-nav-icon"})}),n&&(0,a.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-bg-primary border border-border-default rounded-lg shadow-card z-50",children:(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("button",{onClick:()=>r(s),className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsx)("span",{className:"text-sm text-text-primary",children:"Edit Goal"})]}),(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsx)("span",{className:"text-sm text-text-primary",children:"Link Activities"})]}),(0,a.jsxs)("button",{onClick:handleDelete,disabled:b,className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors text-text-danger",children:[b?(0,a.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(g.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Delete"})]})]})})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-card-subtext",children:"Progress"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-card-title",children:[s.calculated_progress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:(0,C.cn)("h-2 rounded-full transition-all duration-300",(t=s.calculated_progress)>=80?"bg-text-positive":t>=50?"bg-yellow-500":"bg-text-danger"),style:{width:"".concat(s.calculated_progress,"%")}})}),s.progress_percentage!==s.calculated_progress&&(0,a.jsxs)("p",{className:"text-xs text-card-subtext mt-1",children:["Manual progress: ",s.progress_percentage,"% | Calculated: ",s.calculated_progress,"%"]})]}),s.all_activities.length>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border-default",children:[(0,a.jsx)("p",{className:"text-xs text-card-subtext mb-2",children:"Linked Activities:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.all_activities.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-btn-primary/10 text-btn-primary rounded-full text-xs",children:e.name},e.id)),s.all_activities.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:["+",s.all_activities.length-3]})]})]}),s.notes&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border-default",children:[(0,a.jsx)("p",{className:"text-xs text-card-subtext mb-2",children:"Notes:"}),(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:s.notes})]})]})},GoalTable=e=>{let{goals:t,onEdit:s,onDelete:l}=e;return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-card-title",children:"All Goals"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),(0,a.jsx)("input",{type:"text",placeholder:"Search goals...",className:"input-field pl-10 w-64"})]}),(0,a.jsxs)("select",{className:"input-field w-32",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"paused",children:"Paused"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border-default",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Goal"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Priority"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Progress"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Target Date"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Activities"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Carers"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Created"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-border-default hover:bg-bg-highlight",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-text-primary font-medium",children:e.name}),e.is_overdue&&(0,a.jsx)(c.Z,{className:"w-4 h-4 text-red-500"})]}),(0,a.jsx)("p",{className:"text-sm text-text-secondary",children:e.description}),e.category&&(0,a.jsx)("p",{className:"text-xs text-text-muted",children:e.category})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:(0,C.cn)("px-2 py-1 rounded-full text-xs font-medium","active"===e.status&&"bg-text-positive/10 text-text-positive","completed"===e.status&&"bg-green-100 text-green-800","paused"===e.status&&"bg-yellow-100 text-yellow-800","cancelled"===e.status&&"bg-text-danger/10 text-text-danger"),children:e.status})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:(0,C.cn)("px-2 py-1 rounded-full text-xs font-medium","urgent"===e.priority&&"bg-red-100 text-red-800","high"===e.priority&&"bg-orange-100 text-orange-800","medium"===e.priority&&"bg-yellow-100 text-yellow-800","low"===e.priority&&"bg-green-100 text-green-800"),children:e.priority})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:(0,C.cn)("h-2 rounded-full",e.calculated_progress>=80?"bg-text-positive":e.calculated_progress>=50?"bg-yellow-500":"bg-text-danger"),style:{width:"".concat(e.calculated_progress,"%")}})}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:[e.calculated_progress,"%"]})]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-text-secondary",children:e.target_date?(0,C.p6)(e.target_date):"-"}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-btn-primary/10 text-btn-primary rounded-full text-xs",children:e.total_activities_count}),e.completed_activities_count>0&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-text-positive/10 text-text-positive rounded-full text-xs",children:[e.completed_activities_count," âœ“"]})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:e.assigned_carers.length})}),(0,a.jsx)("td",{className:"py-3 px-4 text-text-secondary",children:(0,C.p6)(e.created_at)}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>s(e),className:"p-1 text-nav-icon hover:bg-bg-highlight rounded",title:"Edit Goal",children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{className:"p-1 text-nav-icon hover:bg-bg-highlight rounded",title:"Link Activities",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>l(e.id),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Delete Goal",children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})};function GoalsPage(){let{goals:e,isLoading:t,mutate:s}=(0,F.g0)(),[n,o]=(0,l.useState)("grid"),[m,u]=(0,l.useState)(""),[p,g]=(0,l.useState)("all"),[y,w]=(0,l.useState)("all"),[_,Z]=(0,l.useState)(!1),[B,G]=(0,l.useState)(!1),[S,M]=(0,l.useState)(!1),[A,P]=(0,l.useState)(null),q=e.filter(e=>{var t,s,a;let l=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(m.toLowerCase()))||(null===(a=e.category)||void 0===a?void 0:a.toLowerCase().includes(m.toLowerCase())),r="all"===p||e.status===p,i="all"===y||e.priority===y;return l&&r&&i}),handleEditGoal=e=>{P(e),G(!0)},handleDeleteGoal=t=>{let s=e.find(e=>e.id===t);s&&(P(s),M(!0))},handleDeleteConfirm=async e=>{try{await k.x.deleteGoal(e),E.default.success("Goal deleted successfully"),s()}catch(e){E.default.error(e.message||"Failed to delete goal")}},handleModalSuccess=()=>{s()},handleModalClose=()=>{P(null),Z(!1),G(!1),M(!1)};return t?(0,a.jsx)(r.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(h.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-btn-primary"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"Loading goals..."})]})})}):(0,a.jsxs)(r.Z,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(i.Z,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Goals"}]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Goal Management"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"Create, track, and manage care goals and progress"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-bg-highlight rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>o("grid"),className:(0,C.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","grid"===n?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Grid"}),(0,a.jsx)("button",{onClick:()=>o("table"),className:(0,C.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","table"===n?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Table"})]}),(0,a.jsxs)("button",{onClick:()=>Z(!0),className:"btn-primary flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Add Goal"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Total Goals"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:e.length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-btn-primary rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-white"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Active Goals"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"active"===e.status).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-text-positive/10 rounded-lg flex items-center justify-center",children:(0,a.jsx)(f.Z,{className:"w-6 h-6 text-text-positive"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"completed"===e.status).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(N.Z,{className:"w-6 h-6 text-green-800"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Avg Progress"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-card-title",children:[(()=>{if(0===e.length)return 0;let t=e.reduce((e,t)=>e+t.calculated_progress,0);return Math.round(t/e.length)})(),"%"]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(v.Z,{className:"w-6 h-6 text-blue-800"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"High Priority"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"high"===e.priority).length+e.filter(e=>"urgent"===e.priority).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(D,{className:"w-6 h-6 text-orange-800"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Paused"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"paused"===e.status).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(v.Z,{className:"w-6 h-6 text-yellow-800"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Overdue"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>e.is_overdue).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-red-800"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Total Activities"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:e.reduce((e,t)=>e+t.total_activities_count,0)})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-purple-800"})})]})})]}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),(0,a.jsx)("input",{type:"text",placeholder:"Search goals by name, description, or category...",value:m,onChange:e=>u(e.target.value),className:"input-field pl-10"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"input-field w-40",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"paused",children:"Paused"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,a.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"input-field w-32",children:[(0,a.jsx)("option",{value:"all",children:"All Priority"}),(0,a.jsx)("option",{value:"urgent",children:"Urgent"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"low",children:"Low"})]})]})}),0===q.length?(0,a.jsxs)("div",{className:"card p-12 text-center",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 text-text-muted mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-card-title mb-2",children:"No goals found"}),(0,a.jsx)("p",{className:"text-text-secondary",children:m||"all"!==p||"all"!==y?"Try adjusting your search or filters":"No goals have been created yet"})]}):"grid"===n?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(e=>(0,a.jsx)(GoalCard,{goal:e,onEdit:handleEditGoal,onDelete:handleDeleteGoal},e.id))}):(0,a.jsx)(GoalTable,{goals:q,onEdit:handleEditGoal,onDelete:handleDeleteGoal}),e.length>0&&(0,a.jsx)(GoalProgressChart,{goals:e})]}),(0,a.jsx)(AddGoalModal,{isOpen:_,onClose:handleModalClose,onSuccess:handleModalSuccess}),(0,a.jsx)(EditGoalModal,{isOpen:B,onClose:handleModalClose,onSuccess:handleModalSuccess,goal:A}),(0,a.jsx)(DeleteGoalModal,{isOpen:S,onClose:handleModalClose,onConfirm:handleDeleteConfirm,goal:A})]})}},6527:function(e,t,s){"use strict";s.d(t,{q_:function(){return l}});var a=s(6704);a.kL.register(a.uw,a.f$,a.od,a.jn,a.ZL,a.qi,a.Dx,a.u,a.De,a.Gu);let l={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#000000",font:{size:12}}},tooltip:{backgroundColor:"#FFFFFF",titleColor:"#000000",bodyColor:"#6D6D6D",borderColor:"#E0E0E0",borderWidth:1,cornerRadius:8,displayColors:!0}},scales:{x:{grid:{color:"#E5E5E5",drawBorder:!1},ticks:{color:"#6D6D6D",font:{size:11}}},y:{grid:{color:"#E5E5E5",drawBorder:!1},ticks:{color:"#6D6D6D",font:{size:11}}}}}}},function(e){e.O(0,[674,186,607,462,149,180,390,971,472,744],function(){return e(e.s=5766)}),_N_E=e.O()}]);