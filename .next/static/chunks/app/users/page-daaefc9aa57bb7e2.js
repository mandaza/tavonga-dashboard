(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{3008:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9670:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},774:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},6264:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},290:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},9617:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},2741:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9883:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1827:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9036:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},5367:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2104:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},4852:function(e,s,t){Promise.resolve().then(t.bind(t,5462))},5462:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return UsersPage}});var a=t(7437),l=t(2265),n=t(1617),r=t(8230),i=t(9036),c=t(5750),d=t(6264),o=t(290),m=t(9670),x=t(9617),u=t(774),h=t(3008),p=t(5367),f=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,f.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var j=t(2431),g=t(2741),v=t(8203),N=t(2104),y=t(1827),w=t(9883),_=t(1628),C=t(2180),k=t(8823),D=t(3415),U=t(5925);function AddUserModal(e){let{open:s,onClose:t,onUserAdded:n}=e,[r,i]=(0,l.useState)({username:"",email:"",first_name:"",last_name:"",phone:"",role:"support_worker"}),[c,d]=(0,l.useState)(!1),[o,m]=(0,l.useState)({});if(!s)return null;let handleChange=e=>{i({...r,[e.target.name]:e.target.value}),m({...o,[e.target.name]:""})},validate=()=>{let e={};return r.username||(e.username="Username is required"),r.email?/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(r.email)||(e.email="Invalid email"):e.email="Email is required",r.first_name||(e.first_name="First name is required"),r.last_name||(e.last_name="Last name is required"),r.phone||(e.phone="Phone is required"),e},handleSubmit=async e=>{e.preventDefault();let s=validate();if(Object.keys(s).length>0){m(s);return}d(!0);try{await D.x.register({username:r.username,email:r.email,first_name:r.first_name,last_name:r.last_name,phone:r.phone,role:r.role,password:"changeme123",password_confirm:"changeme123"}),U.default.success("User created successfully!"),i({username:"",email:"",first_name:"",last_name:"",phone:"",role:"support_worker"}),n(),t()}catch(e){U.default.error(e.message||"Failed to create user")}finally{d(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg p-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New User"}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Username"}),(0,a.jsx)("input",{name:"username",value:r.username,onChange:handleChange,className:"input-field w-full",disabled:c}),o.username&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.username})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email"}),(0,a.jsx)("input",{name:"email",type:"email",value:r.email,onChange:handleChange,className:"input-field w-full",disabled:c}),o.email&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.email})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"First Name"}),(0,a.jsx)("input",{name:"first_name",value:r.first_name,onChange:handleChange,className:"input-field w-full",disabled:c}),o.first_name&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.first_name})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Last Name"}),(0,a.jsx)("input",{name:"last_name",value:r.last_name,onChange:handleChange,className:"input-field w-full",disabled:c}),o.last_name&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.last_name})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),(0,a.jsx)("input",{name:"phone",value:r.phone,onChange:handleChange,className:"input-field w-full",disabled:c}),o.phone&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Role"}),(0,a.jsxs)("select",{name:"role",value:r.role,onChange:handleChange,className:"input-field w-full",disabled:c,children:[(0,a.jsx)("option",{value:"support_worker",children:"Support Worker"}),(0,a.jsx)("option",{value:"practitioner",children:"Practitioner"}),(0,a.jsx)("option",{value:"family",children:"Family"}),(0,a.jsx)("option",{value:"super_admin",children:"Super Admin"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,a.jsx)("button",{type:"button",className:"btn-secondary",onClick:t,disabled:c,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"btn-primary",disabled:c,children:c?"Saving...":"Save"})]})]})]})})}function EditUserModal(e){let{open:s,onClose:t,onUserUpdated:n,user:r}=e,[i,c]=(0,l.useState)({username:"",email:"",first_name:"",last_name:"",phone:"",address:"",emergency_contact:"",emergency_phone:"",date_of_birth:"",role:"support_worker"}),[d,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)({});if((0,l.useEffect)(()=>{r&&s&&(c({username:r.username||"",email:r.email||"",first_name:r.first_name||"",last_name:r.last_name||"",phone:r.phone||"",address:r.address||"",emergency_contact:r.emergency_contact||"",emergency_phone:r.emergency_phone||"",date_of_birth:r.date_of_birth?r.date_of_birth.split("T")[0]:"",role:r.role||"support_worker"}),x({}))},[r,s]),!s||!r)return null;let handleChange=e=>{c({...i,[e.target.name]:e.target.value}),x({...m,[e.target.name]:""})},validate=()=>{let e={};return i.username||(e.username="Username is required"),i.email?/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(i.email)||(e.email="Invalid email"):e.email="Email is required",i.first_name||(e.first_name="First name is required"),i.last_name||(e.last_name="Last name is required"),i.phone||(e.phone="Phone is required"),e},handleSubmit=async e=>{e.preventDefault();let s=validate();if(Object.keys(s).length>0){x(s);return}o(!0);try{let e={...i,date_of_birth:i.date_of_birth||null};await D.x.updateUser(r.id,e),U.default.success("User updated successfully!"),n(),t()}catch(e){U.default.error(e.message||"Failed to update user")}finally{o(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] shadow-lg w-full max-w-2xl p-8 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[#000000]",children:"Edit User"}),(0,a.jsx)("button",{onClick:t,className:"text-[#6D6D6D] hover:text-[#000000] transition-colors",disabled:d,children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Username"}),(0,a.jsx)("input",{name:"username",value:i.username,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d,placeholder:"Enter username"}),m.username&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:m.username})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Email"}),(0,a.jsx)("input",{name:"email",type:"email",value:i.email,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d,placeholder:"Enter email address"}),m.email&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:m.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"First Name"}),(0,a.jsx)("input",{name:"first_name",value:i.first_name,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d,placeholder:"Enter first name"}),m.first_name&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:m.first_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Last Name"}),(0,a.jsx)("input",{name:"last_name",value:i.last_name,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d,placeholder:"Enter last name"}),m.last_name&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:m.last_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Phone"}),(0,a.jsx)("input",{name:"phone",type:"tel",value:i.phone,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d,placeholder:"Enter phone number"}),m.phone&&(0,a.jsx)("p",{className:"text-[#FF6B6B] text-sm mt-1",children:m.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Role"}),(0,a.jsxs)("select",{name:"role",value:i.role,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d,children:[(0,a.jsx)("option",{value:"support_worker",children:"Support Worker"}),(0,a.jsx)("option",{value:"practitioner",children:"Practitioner"}),(0,a.jsx)("option",{value:"family",children:"Family"}),(0,a.jsx)("option",{value:"super_admin",children:"Super Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Date of Birth"}),(0,a.jsx)("input",{name:"date_of_birth",type:"date",value:i.date_of_birth,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Emergency Phone"}),(0,a.jsx)("input",{name:"emergency_phone",type:"tel",value:i.emergency_phone,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d,placeholder:"Enter emergency phone"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Address"}),(0,a.jsx)("input",{name:"address",value:i.address,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d,placeholder:"Enter address"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Emergency Contact"}),(0,a.jsx)("input",{name:"emergency_contact",value:i.emergency_contact,onChange:handleChange,className:"w-full px-4 py-3 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent transition-colors",disabled:d,placeholder:"Enter emergency contact name"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t border-[#E0E0E0]",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-6 py-3 bg-[#F0F0F0] text-[#000000] rounded-lg hover:bg-[#E5E5E5] transition-colors font-medium",disabled:d,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-3 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] active:bg-[#37A29F] transition-colors font-medium disabled:bg-[#A3A3A3]",disabled:d,children:d?"Updating...":"Update User"})]})]})]})})}function DeleteConfirmationDialog(e){let{open:s,onClose:t,onConfirm:l,user:n,loading:r=!1}=e;return s&&n?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] shadow-lg w-full max-w-md p-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,a.jsx)("div",{className:"w-16 h-16 bg-[#FF6B6B] bg-opacity-10 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-[#FF6B6B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 15.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[#000000] mb-3",children:"Delete User"}),(0,a.jsxs)("p",{className:"text-[#6D6D6D] mb-2",children:["Are you sure you want to delete"," ",(0,a.jsx)("span",{className:"font-semibold text-[#000000]",children:n.full_name}),"?"]}),(0,a.jsx)("p",{className:"text-sm text-[#A3A3A3]",children:"This action cannot be undone. All user data will be permanently removed."})]}),(0,a.jsx)("div",{className:"bg-[#F9F5F4] rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#E0E0E0] rounded-full flex items-center justify-center",children:n.profile_image?(0,a.jsx)("img",{src:n.profile_image,alt:n.full_name,className:"w-10 h-10 rounded-full object-cover"}):(0,a.jsx)("svg",{className:"w-5 h-5 text-[#000000]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("p",{className:"font-semibold text-[#000000]",children:n.full_name}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:n.email}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:n.is_admin?"Admin":"Carer"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(n.approved?"bg-[#4ECDC4] bg-opacity-10 text-[#4ECDC4]":"bg-yellow-100 text-yellow-800"),children:n.approved?"Active":"Pending"})]})]})]})}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 bg-[#F0F0F0] text-[#000000] rounded-lg hover:bg-[#E5E5E5] transition-colors font-medium",disabled:r,children:"Cancel"}),(0,a.jsx)("button",{type:"button",onClick:l,className:"flex-1 px-6 py-3 bg-[#FF6B6B] text-white rounded-lg hover:bg-[#FF5252] transition-colors font-medium disabled:bg-[#A3A3A3]",disabled:r,children:r?"Deleting...":"Delete User"})]})]})}):null}let UserCard=e=>{let{user:s,onApprove:t,onDisable:n,onEnable:r,onEdit:f,onDelete:y}=e,[w,C]=(0,l.useState)(!1),[k,D]=(0,l.useState)(!1),handleApprove=async()=>{D(!0);try{await t(s.id),C(!1)}catch(e){console.error("Error approving user:",e)}finally{D(!1)}},handleDisable=async()=>{D(!0);try{await n(s.id),C(!1)}catch(e){console.error("Error disabling user:",e)}finally{D(!1)}},handleEnable=async()=>{D(!0);try{await r(s.id),C(!1)}catch(e){console.error("Error enabling user:",e)}finally{D(!1)}};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-icon-profile-container rounded-full flex items-center justify-center",children:s.profile_image?(0,a.jsx)("img",{src:s.profile_image,alt:s.full_name,className:"w-12 h-12 rounded-full object-cover"}):(0,a.jsx)(c.Z,{className:"w-6 h-6 text-icon-profile"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-card-title",children:s.full_name}),(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:s.email}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsxs)("span",{className:(0,_.cn)("px-2 py-1 rounded-full text-xs font-medium",s.is_admin?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:[s.is_admin?(0,a.jsx)(i.Z,{className:"w-4 h-4"}):(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"ml-1",children:s.is_admin?"Admin":"Carer"})]}),(0,a.jsx)("span",{className:(0,_.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"active":return"bg-text-positive/10 text-text-positive";case"pending":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-text-danger/10 text-text-danger";default:return"bg-gray-100 text-gray-800"}})(s.approved?"active":"pending")),children:s.approved?"Active":"Pending"})]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>C(!w),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",disabled:k,children:k?(0,a.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(o.Z,{className:"w-4 h-4 text-nav-icon"})}),w&&(0,a.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-bg-primary border border-border-default rounded-lg shadow-card z-50",children:(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsx)("span",{className:"text-sm text-text-primary",children:"View Profile"})]}),(0,a.jsxs)("button",{onClick:()=>f(s),className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsx)("span",{className:"text-sm text-text-primary",children:"Edit User"})]}),(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsx)("span",{className:"text-sm text-text-primary",children:"Reset Password"})]}),!s.approved&&(0,a.jsxs)("button",{onClick:handleApprove,className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors text-text-positive",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Approve User"})]}),(0,a.jsx)("div",{className:"border-t border-border-default my-2"}),(0,a.jsxs)("button",{onClick:()=>y(s),className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors text-text-danger",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Delete User"})]}),s.approved&&s.is_active_carer&&(0,a.jsxs)("button",{onClick:handleDisable,className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors text-text-danger",children:[(0,a.jsx)(b,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Disable User"})]}),!s.is_active_carer&&(0,a.jsxs)("button",{onClick:handleEnable,className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors text-text-positive",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Enable User"})]})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[s.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsx)("span",{className:"text-sm text-card-subtext",children:s.phone})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:["Joined ",(0,_.p6)(s.created_at)]})]})]}),!s.approved&&(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-border-default",children:[(0,a.jsxs)("button",{onClick:handleApprove,disabled:k,className:"btn-primary flex items-center gap-2",children:[k?(0,a.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Approve"]}),(0,a.jsxs)("button",{onClick:handleDisable,disabled:k,className:"btn-secondary flex items-center gap-2",children:[k?(0,a.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(N.Z,{className:"w-4 h-4"}),"Reject"]})]})]})},UserTable=e=>{let{users:s,onApprove:t,onDisable:l,onEnable:n,onEdit:r,onDelete:i}=e;return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-card-title",children:"All Users"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),(0,a.jsx)("input",{type:"text",placeholder:"Search users...",className:"input-field pl-10 w-64"})]}),(0,a.jsxs)("select",{className:"input-field w-32",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"admin",children:"Admins"}),(0,a.jsx)("option",{value:"carer",children:"Carers"})]}),(0,a.jsxs)("select",{className:"input-field w-32",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border-default",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"User"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Type"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Phone"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Joined"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Last Login"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{className:"border-b border-border-default hover:bg-bg-highlight",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-text-primary font-medium",children:e.full_name}),(0,a.jsx)("p",{className:"text-sm text-text-secondary",children:e.email})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:(0,_.cn)("px-2 py-1 rounded-full text-xs font-medium",e.is_admin?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.is_admin?"Admin":"Carer"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:(0,_.cn)("px-2 py-1 rounded-full text-xs font-medium",e.approved&&e.is_active_carer&&"bg-text-positive/10 text-text-positive",!e.approved&&"bg-yellow-100 text-yellow-800",!e.is_active_carer&&"bg-text-danger/10 text-text-danger"),children:e.approved?e.is_active_carer?"Active":"Inactive":"Pending"})}),(0,a.jsx)("td",{className:"py-3 px-4 text-text-secondary",children:e.phone||"-"}),(0,a.jsx)("td",{className:"py-3 px-4 text-text-secondary",children:(0,_.p6)(e.created_at)}),(0,a.jsx)("td",{className:"py-3 px-4 text-text-secondary",children:"Never"}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!e.approved&&(0,a.jsx)("button",{onClick:()=>t(e.id),className:"p-1 text-text-positive hover:bg-text-positive/10 rounded",title:"Approve User",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})}),e.approved&&e.is_active_carer&&(0,a.jsx)("button",{onClick:()=>l(e.id),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Disable User",children:(0,a.jsx)(b,{className:"w-4 h-4"})}),!e.is_active_carer&&(0,a.jsx)("button",{onClick:()=>n(e.id),className:"p-1 text-text-positive hover:bg-text-positive/10 rounded",title:"Enable User",children:(0,a.jsx)(j.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{className:"p-1 text-nav-icon hover:bg-bg-highlight rounded",children:(0,a.jsx)(o.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})};function UsersPage(){let{user:e,loading:s}=(0,C.useRequireAdmin)(),{users:t,isLoading:o,mutate:m}=(0,k.UV)(),[x,u]=(0,l.useState)("grid"),[h,p]=(0,l.useState)(""),[f,g]=(0,l.useState)("all"),[N,E]=(0,l.useState)("all"),[Z,A]=(0,l.useState)(!1),[S,F]=(0,l.useState)(!1),[M,L]=(0,l.useState)(!1),[B,P]=(0,l.useState)(null),[q,z]=(0,l.useState)(!1),T=t.filter(e=>{var s,t;let a=(null===(s=e.full_name)||void 0===s?void 0:s.toLowerCase().includes(h.toLowerCase()))||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase())),l="all"===f||"active"===f&&e.approved&&e.is_active_carer||"pending"===f&&!e.approved||"inactive"===f&&!e.is_active_carer,n="all"===N||"admin"===N&&e.is_admin||"carer"===N&&!e.is_admin;return a&&l&&n}),handleApproveUser=async e=>{try{await D.x.approveUser(e),U.default.success("User approved successfully"),m()}catch(e){U.default.error(e.message||"Failed to approve user")}},handleDisableUser=async e=>{try{await D.x.disableUser(e),U.default.success("User disabled successfully"),m()}catch(e){U.default.error(e.message||"Failed to disable user")}},handleEnableUser=async e=>{try{await D.x.enableUser(e),U.default.success("User enabled successfully"),m()}catch(e){U.default.error(e.message||"Failed to enable user")}},handleEditUser=e=>{P(e),F(!0)},handleDeleteUser=e=>{P(e),L(!0)},handleConfirmDelete=async()=>{if(B){z(!0);try{await D.x.deleteUser(B.id),U.default.success("User deleted successfully"),m(),L(!1),P(null)}catch(e){U.default.error(e.message||"Failed to delete user")}finally{z(!1)}}},handleCloseModals=()=>{F(!1),L(!1),P(null)},getStatusCount=e=>{switch(e){case"active":return t.filter(e=>e.approved&&e.is_active_carer).length;case"pending":return t.filter(e=>!e.approved).length;case"inactive":return t.filter(e=>!e.is_active_carer).length;default:return 0}};return s||o?(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-btn-primary"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"Loading users..."})]})})}):(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(r.Z,{items:[{label:"Dashboard",href:"/dashboard"},{label:"User Management"}]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"User Management"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"Manage carers and administrators"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-bg-highlight rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>u("grid"),className:(0,_.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","grid"===x?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Grid"}),(0,a.jsx)("button",{onClick:()=>u("table"),className:(0,_.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","table"===x?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Table"})]}),(0,a.jsxs)("button",{className:"btn-primary flex items-center gap-2",onClick:()=>A(!0),children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),"Add User"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:t.length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-btn-primary rounded-lg flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-white"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Carers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:t.filter(e=>!1===e.is_admin).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-blue-800"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Admins"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:t.filter(e=>!0===e.is_admin).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"w-6 h-6 text-purple-800"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Pending Approval"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:getStatusCount("pending")})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(v.Z,{className:"w-6 h-6 text-yellow-800"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Active Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:getStatusCount("active")})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-text-positive/10 rounded-lg flex items-center justify-center",children:(0,a.jsx)(j.Z,{className:"w-6 h-6 text-text-positive"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Inactive Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:getStatusCount("inactive")})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-text-danger/10 rounded-lg flex items-center justify-center",children:(0,a.jsx)(b,{className:"w-6 h-6 text-text-danger"})})]})})]}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),(0,a.jsx)("input",{type:"text",placeholder:"Search users by name or email...",value:h,onChange:e=>p(e.target.value),className:"input-field pl-10"})]}),(0,a.jsxs)("select",{value:N,onChange:e=>E(e.target.value),className:"input-field w-32",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"admin",children:"Admins"}),(0,a.jsx)("option",{value:"carer",children:"Carers"})]}),(0,a.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"input-field w-32",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"})]})]})}),0===T.length?(0,a.jsxs)("div",{className:"card p-12 text-center",children:[(0,a.jsx)(c.Z,{className:"w-12 h-12 text-text-muted mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-card-title mb-2",children:"No users found"}),(0,a.jsx)("p",{className:"text-text-secondary",children:h||"all"!==f||"all"!==N?"Try adjusting your search or filters":"No users have been added yet"})]}):"grid"===x?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(e=>(0,a.jsx)(UserCard,{user:e,onApprove:handleApproveUser,onDisable:handleDisableUser,onEnable:handleEnableUser,onEdit:handleEditUser,onDelete:handleDeleteUser},e.id))}):(0,a.jsx)(UserTable,{users:T,onApprove:handleApproveUser,onDisable:handleDisableUser,onEnable:handleEnableUser,onEdit:handleEditUser,onDelete:handleDeleteUser}),(0,a.jsx)(AddUserModal,{open:Z,onClose:()=>A(!1),onUserAdded:m}),(0,a.jsx)(EditUserModal,{open:S,onClose:handleCloseModals,onUserUpdated:m,user:B}),(0,a.jsx)(DeleteConfirmationDialog,{open:M,onClose:handleCloseModals,onConfirm:handleConfirmDelete,user:B,loading:q})]})})}}},function(e){e.O(0,[186,607,462,180,390,971,472,744],function(){return e(e.s=4852)}),_N_E=e.O()}]);