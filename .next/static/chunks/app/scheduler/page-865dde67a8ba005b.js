(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[163],{1981:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2894:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3008:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6264:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9617:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5367:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2549:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},457:function(e,t,s){Promise.resolve().then(s.bind(s,1677))},1677:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return SchedulerPage}});var a=s(7437),l=s(2265),i=s(1617),n=s(8230),d=s(9883),c=s(2549),r=s(998),o=s(7972),x=s(8203),m=s(6141),h=s(6264),u=s(1628),g=s(3415),p=s(5925);function AddScheduleModal(e){let{isOpen:t,onClose:s,onSuccess:i,selectedDate:n}=e,[b,j]=(0,l.useState)({activity:"",user:"",date:n||"",scheduled_time:"",notes:""}),[v,f]=(0,l.useState)([]),[y,N]=(0,l.useState)([]),[D,w]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[_,F]=(0,l.useState)({});(0,l.useEffect)(()=>{t&&loadData()},[t]),(0,l.useEffect)(()=>{n&&j(e=>({...e,date:n}))},[n]);let loadData=async()=>{S(!0);try{let[e,t]=await Promise.all([g.x.getActivities({is_active:!0}),g.x.getUsers({role:"carer"})]);f(e.results||[]),N(t.results||[])}catch(e){console.error("Error loading data:",e),p.default.error("Failed to load activities and users")}finally{S(!1)}},handleInputChange=(e,t)=>{j(s=>({...s,[e]:t})),_[e]&&F(t=>({...t,[e]:""}))},validateForm=()=>{let e={};return b.activity||(e.activity="Activity is required"),b.user||(e.user="User/Carer is required"),b.date||(e.date="Date is required"),b.scheduled_time||(e.scheduled_time="Scheduled time is required"),F(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){w(!0);try{let e={activity:b.activity,assigned_user:b.user,scheduled_date:b.date,scheduled_time:b.scheduled_time,notes:b.notes||void 0};await g.x.createSchedule(e),p.default.success("Activity scheduled successfully!"),i(),handleClose()}catch(e){console.error("Error scheduling activity:",e),p.default.error(e.message||"Failed to schedule activity")}finally{w(!1)}}},handleClose=()=>{D||(j({activity:"",user:"",date:n||"",scheduled_time:"",notes:""}),F({}),s())},k=v.find(e=>e.id===b.activity);return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#000000]",children:"Schedule Activity"}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"Add a new activity to the schedule"})]})]}),(0,a.jsx)("button",{onClick:handleClose,disabled:D,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:"Activity Details"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4 inline mr-1"}),"Activity *"]}),(0,a.jsxs)("select",{value:b.activity,onChange:e=>handleInputChange("activity",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.activity?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:D||C,children:[(0,a.jsx)("option",{value:"",children:"Select an activity"}),v.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.category.replace("_"," "),")"]},e.id))]}),_.activity&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.activity})]}),k&&(0,a.jsxs)("div",{className:"bg-[#EEF8F7] rounded-lg p-4 border border-[#4ECDC4]/20",children:[(0,a.jsx)("h4",{className:"font-medium text-[#000000] mb-2",children:k.name}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D] mb-2",children:k.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-[#6D6D6D]",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-white rounded-md",children:k.category.replace("_"," ")}),(0,a.jsx)("span",{className:"px-2 py-1 bg-white rounded-md",children:k.difficulty}),k.estimated_duration&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-white rounded-md",children:["~",k.estimated_duration," min"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:"Assignment"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 inline mr-1"}),"Assigned User/Carer *"]}),(0,a.jsxs)("select",{value:b.user,onChange:e=>handleInputChange("user",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.user?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:D||C,children:[(0,a.jsx)("option",{value:"",children:"Select a user/carer"}),y.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))]}),_.user&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.user})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:"Scheduling"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 inline mr-1"}),"Date *"]}),(0,a.jsx)("input",{type:"date",value:b.date,onChange:e=>handleInputChange("date",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.date?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:D}),_.date&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.date})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 inline mr-1"}),"Scheduled Time *"]}),(0,a.jsx)("input",{type:"time",value:b.scheduled_time,onChange:e=>handleInputChange("scheduled_time",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.scheduled_time?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:D}),_.scheduled_time&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.scheduled_time})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:"Additional Information"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Notes"}),(0,a.jsx)("textarea",{value:b.notes,onChange:e=>handleInputChange("notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Any special notes or instructions for this activity",rows:3,disabled:D})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:handleClose,disabled:D,className:"px-6 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:D||C,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center space-x-2",children:D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{children:"Scheduling..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Schedule Activity"})]})})]})]})]})}):null}var b=s(9617),j=s(2894);let v=[{value:"scheduled",label:"Scheduled"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"},{value:"skipped",label:"Skipped"}];function EditScheduleModal(e){let{isOpen:t,onClose:s,onSuccess:i,activityLog:n}=e,[d,f]=(0,l.useState)({activity:"",user:"",date:"",scheduled_time:"",status:"scheduled",notes:"",completion_notes:"",difficulty_rating:"",satisfaction_rating:""}),[y,N]=(0,l.useState)([]),[D,w]=(0,l.useState)([]),[C,S]=(0,l.useState)(!1),[_,F]=(0,l.useState)(!1),[k,E]=(0,l.useState)({});(0,l.useEffect)(()=>{t&&(loadData(),n&&populateForm(n))},[t,n]);let loadData=async()=>{F(!0);try{let[e,t]=await Promise.all([g.x.getActivities({is_active:!0}),g.x.getUsers({role:"carer"})]);N(e.results||[]),w(t.results||[])}catch(e){console.error("Error loading data:",e),p.default.error("Failed to load activities and users")}finally{F(!1)}},populateForm=e=>{f({activity:e.activity.id,user:e.assigned_user.id,date:e.scheduled_date,scheduled_time:e.scheduled_time,status:e.status,notes:e.notes||"",completion_notes:e.completion_notes||"",difficulty_rating:e.difficulty_rating?e.difficulty_rating.toString():"",satisfaction_rating:e.satisfaction_rating?e.satisfaction_rating.toString():""})},handleInputChange=(e,t)=>{f(s=>({...s,[e]:t})),k[e]&&E(t=>({...t,[e]:""}))},validateForm=()=>{let e={};return d.activity||(e.activity="Activity is required"),d.user||(e.user="User/Carer is required"),d.date||(e.date="Date is required"),d.scheduled_time||(e.scheduled_time="Scheduled time is required"),d.difficulty_rating&&(isNaN(Number(d.difficulty_rating))||1>Number(d.difficulty_rating)||Number(d.difficulty_rating)>5)&&(e.difficulty_rating="Difficulty rating must be between 1 and 5"),d.satisfaction_rating&&(isNaN(Number(d.satisfaction_rating))||1>Number(d.satisfaction_rating)||Number(d.satisfaction_rating)>5)&&(e.satisfaction_rating="Satisfaction rating must be between 1 and 5"),E(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),n&&validateForm()){S(!0);try{let e={activity:d.activity,assigned_user:d.user,scheduled_date:d.date,scheduled_time:d.scheduled_time,status:d.status,completed:"completed"===d.status,notes:d.notes||void 0,completion_notes:d.completion_notes||void 0,difficulty_rating:d.difficulty_rating?parseInt(d.difficulty_rating):void 0,satisfaction_rating:d.satisfaction_rating?parseInt(d.satisfaction_rating):void 0};await g.x.updateSchedule(n.id,e),p.default.success("Activity schedule updated successfully!"),i(),handleClose()}catch(e){console.error("Error updating activity schedule:",e),p.default.error(e.message||"Failed to update activity schedule")}finally{S(!1)}}},handleClose=()=>{C||(E({}),s())},Z=n&&("scheduled"===n.status||"cancelled"===n.status),B="completed"===d.status||"in_progress"===d.status;return t&&n?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#000000]",children:"Edit Scheduled Activity"}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"Update activity schedule and status"})]})]}),(0,a.jsx)("button",{onClick:handleClose,disabled:C,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),(0,a.jsx)("div",{className:"p-6 bg-[#F9F5F4] border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:(0,a.jsx)(r.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:n.activity.name}),(0,a.jsx)("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"completed":return"bg-[#4ECDC4]/10 text-[#4ECDC4]";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-[#FF6B6B]/10 text-[#FF6B6B]";case"skipped":return"bg-orange-100 text-orange-800"}})(n.status)),children:n.status.replace("_"," ")})]}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D] mb-3",children:n.activity.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-[#6D6D6D]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(0,u.p6)(n.scheduled_date)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(0,u.mr)(n.scheduled_time)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:n.assigned_user.full_name})]})]})]})]})}),!Z&&(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5 text-orange-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-orange-800 mb-1",children:"Limited Editing"}),(0,a.jsxs)("p",{className:"text-sm text-orange-700",children:["This activity is ",n.status,". Only certain fields can be modified for ",n.status," activities."]})]})]})}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:"Activity & Assignment"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Activity *"}),(0,a.jsxs)("select",{value:d.activity,onChange:e=>handleInputChange("activity",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",k.activity?"border-[#FF6B6B]":"border-[#D3D3D3]",!Z&&"bg-gray-100"),disabled:!Z||C||_,children:[(0,a.jsx)("option",{value:"",children:"Select an activity"}),y.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.category.replace("_"," "),")"]},e.id))]}),k.activity&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:k.activity})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Assigned User/Carer *"}),(0,a.jsxs)("select",{value:d.user,onChange:e=>handleInputChange("user",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",k.user?"border-[#FF6B6B]":"border-[#D3D3D3]",!Z&&"bg-gray-100"),disabled:!Z||C||_,children:[(0,a.jsx)("option",{value:"",children:"Select a user/carer"}),D.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))]}),k.user&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:k.user})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:"Schedule & Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Date *"}),(0,a.jsx)("input",{type:"date",value:d.date,onChange:e=>handleInputChange("date",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",k.date?"border-[#FF6B6B]":"border-[#D3D3D3]",!Z&&"bg-gray-100"),disabled:!Z||C}),k.date&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:k.date})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Scheduled Time *"}),(0,a.jsx)("input",{type:"time",value:d.scheduled_time,onChange:e=>handleInputChange("scheduled_time",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",k.scheduled_time?"border-[#FF6B6B]":"border-[#D3D3D3]",!Z&&"bg-gray-100"),disabled:!Z||C}),k.scheduled_time&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:k.scheduled_time})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Status *"}),(0,a.jsx)("select",{value:d.status,onChange:e=>handleInputChange("status",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:C,children:v.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),B&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:"Completion Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Difficulty Rating (1-5)"}),(0,a.jsxs)("select",{value:d.difficulty_rating,onChange:e=>handleInputChange("difficulty_rating",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",k.difficulty_rating?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:C,children:[(0,a.jsx)("option",{value:"",children:"Select rating"}),(0,a.jsx)("option",{value:"1",children:"1 - Very Easy"}),(0,a.jsx)("option",{value:"2",children:"2 - Easy"}),(0,a.jsx)("option",{value:"3",children:"3 - Moderate"}),(0,a.jsx)("option",{value:"4",children:"4 - Difficult"}),(0,a.jsx)("option",{value:"5",children:"5 - Very Difficult"})]}),k.difficulty_rating&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:k.difficulty_rating})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Satisfaction Rating (1-5)"}),(0,a.jsxs)("select",{value:d.satisfaction_rating,onChange:e=>handleInputChange("satisfaction_rating",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",k.satisfaction_rating?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:C,children:[(0,a.jsx)("option",{value:"",children:"Select rating"}),(0,a.jsx)("option",{value:"1",children:"1 - Very Unsatisfied"}),(0,a.jsx)("option",{value:"2",children:"2 - Unsatisfied"}),(0,a.jsx)("option",{value:"3",children:"3 - Neutral"}),(0,a.jsx)("option",{value:"4",children:"4 - Satisfied"}),(0,a.jsx)("option",{value:"5",children:"5 - Very Satisfied"})]}),k.satisfaction_rating&&(0,a.jsx)("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:k.satisfaction_rating})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Completion Notes"}),(0,a.jsx)("textarea",{value:d.completion_notes,onChange:e=>handleInputChange("completion_notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Notes about the completion of this activity",rows:3,disabled:C})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:"Notes"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"General Notes"}),(0,a.jsx)("textarea",{value:d.notes,onChange:e=>handleInputChange("notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Any additional notes about this activity",rows:3,disabled:C})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:handleClose,disabled:C,className:"px-6 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:C,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center space-x-2",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{children:"Updating..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Update Schedule"})]})})]})]})]})}):null}var f=s(5367),y=s(7158);let N=[{id:1,label:"Review Activity",description:"Verify activity details"},{id:2,label:"Confirm Deletion",description:"Final confirmation"}];function DeleteScheduleModal(e){let{isOpen:t,onClose:s,onSuccess:i,activityLog:n}=e,[d,b]=(0,l.useState)(1),[v,D]=(0,l.useState)(!1),[w,C]=(0,l.useState)(""),handleClose=()=>{v||(b(1),C(""),s())},handleDelete=async()=>{if(n){D(!0);try{await g.x.deleteSchedule(n.id),p.default.success("Activity schedule deleted successfully!"),i(),handleClose()}catch(e){console.error("Error deleting activity schedule:",e),p.default.error(e.message||"Failed to delete activity schedule")}finally{D(!1)}}},getDangerLevel=e=>{switch(e){case"completed":case"in_progress":return"high";case"scheduled":return"medium";default:return"low"}},S="delete"===w.toLowerCase();return t&&n?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#FF6B6B] rounded-lg flex items-center justify-center",children:(0,a.jsx)(f.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#000000]",children:"Delete Scheduled Activity"}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D]",children:"This action cannot be undone"})]})]}),(0,a.jsx)("button",{onClick:handleClose,disabled:v,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:N.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:(0,u.cn)("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",d>=e.id?"bg-[#FF6B6B] text-white":"bg-gray-200 text-gray-600"),children:e.id}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:(0,u.cn)("text-sm font-medium",d>=e.id?"text-[#000000]":"text-[#6D6D6D]"),children:e.label}),(0,a.jsx)("p",{className:"text-xs text-[#6D6D6D]",children:e.description})]})]}),t<N.length-1&&(0,a.jsx)(y.Z,{className:"w-5 h-5 text-[#6D6D6D] mx-4"})]},e.id))})}),(0,a.jsxs)("div",{className:"p-6",children:[1===d&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-[#F9F5F4] rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:(0,a.jsx)(r.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000]",children:n.activity.name}),(0,a.jsx)("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"completed":return"bg-[#4ECDC4]/10 text-[#4ECDC4]";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-[#FF6B6B]/10 text-[#FF6B6B]";case"skipped":return"bg-orange-100 text-orange-800"}})(n.status)),children:n.status.replace("_"," ")})]}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D] mb-3",children:n.activity.description}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Scheduled Date"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-[#4ECDC4]"}),(0,a.jsx)("span",{className:"text-sm font-medium text-[#000000]",children:(0,u.p6)(n.scheduled_date)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Scheduled Time"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-[#4ECDC4]"}),(0,a.jsx)("span",{className:"text-sm font-medium text-[#000000]",children:(0,u.mr)(n.scheduled_time)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Assigned User"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 text-[#4ECDC4]"}),(0,a.jsx)("span",{className:"text-sm font-medium text-[#000000]",children:n.assigned_user.full_name})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Category"}),(0,a.jsx)("span",{className:"text-sm font-medium text-[#000000]",children:n.activity.category.replace("_"," ")})]})]}),n.completed&&(0,a.jsxs)("div",{className:"bg-[#EEF8F7] rounded-lg p-4 border border-[#4ECDC4]/20",children:[(0,a.jsx)("h4",{className:"font-semibold text-[#000000] mb-2",children:"Completion Data"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.difficulty_rating&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[#6D6D6D]",children:"Difficulty Rating:"}),(0,a.jsxs)("span",{className:"text-[#000000] font-medium ml-2",children:[n.difficulty_rating,"/5"]})]}),n.satisfaction_rating&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[#6D6D6D]",children:"Satisfaction Rating:"}),(0,a.jsxs)("span",{className:"text-[#000000] font-medium ml-2",children:[n.satisfaction_rating,"/5"]})]})]}),n.completion_notes&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Completion Notes"}),(0,a.jsx)("p",{className:"text-sm text-[#000000]",children:n.completion_notes})]})]}),n.notes&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Notes"}),(0,a.jsx)("p",{className:"text-sm text-[#000000] bg-white rounded-md p-2 border",children:n.notes})]})]})]})}),(0,a.jsxs)("div",{className:(0,u.cn)("flex items-start gap-3 p-4 rounded-lg border","high"===getDangerLevel(n.status)&&"bg-red-50 border-red-200","medium"===getDangerLevel(n.status)&&"bg-orange-50 border-orange-200","low"===getDangerLevel(n.status)&&"bg-yellow-50 border-yellow-200"),children:[(0,a.jsx)(j.Z,{className:(0,u.cn)("w-5 h-5 mt-0.5","high"===getDangerLevel(n.status)&&"text-red-500","medium"===getDangerLevel(n.status)&&"text-orange-500","low"===getDangerLevel(n.status)&&"text-yellow-500")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:(0,u.cn)("font-semibold mb-1","high"===getDangerLevel(n.status)&&"text-red-800","medium"===getDangerLevel(n.status)&&"text-orange-800","low"===getDangerLevel(n.status)&&"text-yellow-800"),children:"high"===getDangerLevel(n.status)?"High Risk Deletion":"medium"===getDangerLevel(n.status)?"Medium Risk Deletion":"Deletion Warning"}),(0,a.jsx)("p",{className:(0,u.cn)("text-sm","high"===getDangerLevel(n.status)&&"text-red-700","medium"===getDangerLevel(n.status)&&"text-orange-700","low"===getDangerLevel(n.status)&&"text-yellow-700"),children:(e=>{switch(e){case"completed":return"This activity has been completed. Deleting it will remove all completion data and ratings.";case"in_progress":return"This activity is currently in progress. Deleting it will interrupt the current session.";case"scheduled":return"This activity is scheduled for the future. Deleting it will remove it from the schedule.";case"cancelled":return"This activity was cancelled. Deleting it will permanently remove it from records.";case"skipped":return"This activity was skipped. Deleting it will permanently remove it from records.";default:return"This will permanently delete the activity schedule."}})(n.status)})]})]})]}),2===d&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-[#FF6B6B] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(j.Z,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#000000] mb-2",children:"Final Confirmation"}),(0,a.jsx)("p",{className:"text-sm text-[#6D6D6D] mb-6",children:"Are you absolutely sure you want to delete this activity schedule? This action cannot be undone."})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-lg p-4 border border-[#FF6B6B]/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)(r.Z,{className:"w-5 h-5 text-[#FF6B6B]"}),(0,a.jsx)("span",{className:"font-medium text-[#000000]",children:n.activity.name})]}),(0,a.jsxs)("div",{className:"text-sm text-[#6D6D6D]",children:[(0,a.jsxs)("p",{children:["User: ",n.assigned_user.full_name]}),(0,a.jsxs)("p",{children:["Date: ",(0,u.p6)(n.scheduled_date)," at ",(0,u.mr)(n.scheduled_time)]}),(0,a.jsxs)("p",{children:["Status: ",n.status.replace("_"," ")]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#000000]",children:'Type "DELETE" to confirm deletion'}),(0,a.jsx)("input",{type:"text",value:w,onChange:e=>C(e.target.value),placeholder:"Type DELETE to confirm",className:"w-full px-3 py-2 border border-[#FF6B6B] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6B6B] focus:border-[#FF6B6B]",disabled:v}),(0,a.jsx)("p",{className:"text-xs text-[#6D6D6D]",children:"This will permanently delete the activity schedule and all associated data."})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"text-sm text-[#6D6D6D]",children:["Step ",d," of ",N.length]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[d>1&&(0,a.jsx)("button",{onClick:()=>{d>1&&b(d-1)},disabled:v,className:"px-4 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:handleClose,disabled:v,className:"px-4 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Cancel"}),d<N.length?(0,a.jsx)("button",{onClick:()=>{d<N.length&&b(d+1)},disabled:v,className:"px-4 py-2 bg-[#FF6B6B] text-white rounded-lg hover:bg-[#FF5252] transition-colors disabled:opacity-50",children:"Next"}):(0,a.jsx)("button",{onClick:handleDelete,disabled:v||!S,className:"px-4 py-2 bg-[#FF6B6B] text-white rounded-lg hover:bg-[#FF5252] transition-colors disabled:opacity-50 flex items-center space-x-2",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{children:"Deleting..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Delete Activity"})]})})]})]})]})}):null}var D=s(1291),w=s(3008),C=s(1981),S=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let _=(0,S.Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),F=(0,S.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var k=s(8823);let formatLocalDate=e=>{let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(a)},getTodayLocalDate=()=>formatLocalDate(new Date),generateCalendarDays=(e,t)=>{let s=new Date(e,t,1),a=new Date(e,t+1,0),l=new Date(s),i=new Date(a);l.setDate(l.getDate()-l.getDay()),i.setDate(i.getDate()+(6-i.getDay()));let n=[],d=new Date(l);for(;d<=i;)n.push(new Date(d)),d.setDate(d.getDate()+1);return n},generateWeekDays=e=>{let t=[],s=new Date(e);for(let e=0;e<7;e++)t.push(new Date(s)),s.setDate(s.getDate()+1);return t},getWeekStart=e=>{let t=new Date(e);return t.setDate(t.getDate()-t.getDay()),t},CalendarDay=e=>{let{date:t,activities:s,onAddSchedule:l,onEditSchedule:i,isCurrentMonth:n=!0,view:c="month"}=e,r=new Date().toDateString()===t.toDateString(),o=t.toLocaleDateString("en-US",{weekday:"short"}),x=t.getDate(),h=t<new Date(new Date().setHours(0,0,0,0)),g="month"===c?"min-h-[120px]":"min-h-[200px]";return(0,a.jsxs)("div",{className:(0,u.cn)("border border-border-default rounded-lg p-3",g,r&&"bg-bg-highlight border-btn-primary",!n&&"opacity-40",h&&"bg-gray-50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:["week"===c&&(0,a.jsx)("p",{className:"text-xs text-text-muted",children:o}),(0,a.jsx)("p",{className:(0,u.cn)("text-sm font-semibold",r?"text-btn-primary":"text-text-primary",!n&&"text-text-muted"),children:x})]}),r&&(0,a.jsx)("div",{className:"w-2 h-2 bg-btn-primary rounded-full"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[s.slice(0,"month"===c?3:10).map((e,t)=>{var s;return(0,a.jsxs)("div",{className:(0,u.cn)("text-xs p-2 rounded cursor-pointer transition-colors","completed"===e.status?"bg-green-100 text-green-800 hover:bg-green-200":"in_progress"===e.status?"bg-blue-100 text-blue-800 hover:bg-blue-200":"cancelled"===e.status?"bg-red-100 text-red-800 hover:bg-red-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"),onClick:()=>i(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"truncate",children:e.scheduled_time})]}),(0,a.jsx)("div",{className:"truncate font-medium",children:(null===(s=e.activity)||void 0===s?void 0:s.name)||"Activity"})]},e.id||t)}),s.length>("month"===c?3:10)&&(0,a.jsxs)("div",{className:"text-xs text-text-muted",children:["+",s.length-("month"===c?3:10)," more"]})]}),!h&&(0,a.jsxs)("button",{onClick:()=>l(formatLocalDate(t)),className:"mt-2 w-full text-xs text-btn-primary hover:bg-bg-highlight p-1 rounded transition-colors flex items-center justify-center gap-1",children:[(0,a.jsx)(d.Z,{className:"w-3 h-3"}),"Add"]})]})},MonthView=e=>{let{activityLogs:t,onAddSchedule:s,onEditSchedule:l,onDeleteSchedule:i,currentDate:n,onDateChange:d}=e,c=generateCalendarDays(n.getFullYear(),n.getMonth()),getActivitiesForDate=e=>{let s=formatLocalDate(e);return t.filter(e=>e.scheduled_date===s)||[]},navigateMonth=e=>{let t=new Date(n);"prev"===e?t.setMonth(t.getMonth()-1):t.setMonth(t.getMonth()+1),d(t)};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-card-title",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]," ",n.getFullYear()]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{d(new Date)},className:"px-3 py-1 text-sm bg-btn-primary text-white rounded hover:bg-btn-primary-hover transition-colors",children:"Today"}),(0,a.jsx)("button",{onClick:()=>navigateMonth("prev"),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",children:(0,a.jsx)(D.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>navigateMonth("next"),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"text-center text-sm font-medium text-text-secondary py-2",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-2",children:c.map((e,t)=>{let i=e.getMonth()===n.getMonth(),d=getActivitiesForDate(e);return(0,a.jsx)(CalendarDay,{date:e,activities:d,onAddSchedule:s,onEditSchedule:l,isCurrentMonth:i,view:"month"},t)})})]})},WeekView=e=>{let{activityLogs:t,onAddSchedule:s,onEditSchedule:l,onDeleteSchedule:i,currentDate:n,onDateChange:d}=e,c=getWeekStart(n),r=generateWeekDays(c),getActivitiesForDate=e=>{let s=formatLocalDate(e);return t.filter(e=>e.scheduled_date===s)||[]},navigateWeek=e=>{let t=new Date(n);"prev"===e?t.setDate(t.getDate()-7):t.setDate(t.getDate()+7),d(t)};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-card-title",children:(e=>{let t=new Date(e);return(t.setDate(t.getDate()+6),e.getMonth()===t.getMonth())?"".concat(e.toLocaleDateString("en-US",{month:"long",day:"numeric"})," - ").concat(t.getDate(),", ").concat(e.getFullYear()):"".concat(e.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),", ").concat(t.getFullYear())})(c)})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{d(new Date)},className:"px-3 py-1 text-sm bg-btn-primary text-white rounded hover:bg-btn-primary-hover transition-colors",children:"Today"}),(0,a.jsx)("button",{onClick:()=>navigateWeek("prev"),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",children:(0,a.jsx)(D.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>navigateWeek("next"),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-4",children:r.map((e,t)=>{let i=getActivitiesForDate(e);return(0,a.jsx)(CalendarDay,{date:e,activities:i,onAddSchedule:s,onEditSchedule:l,view:"week"},t)})})]})},ActivityList=e=>{let{activityLogs:t,onAddSchedule:s,onEditSchedule:l,onDeleteSchedule:i}=e,n=getTodayLocalDate(),c=t.filter(e=>e.scheduled_date===n);return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-card-title",children:"Today's Activities"}),(0,a.jsxs)("button",{onClick:()=>s(n),className:"btn-primary flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Schedule Activity"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===c.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-card-subtext mb-4",children:"No activities scheduled for today"}),(0,a.jsxs)("button",{onClick:()=>s(n),className:"btn-primary flex items-center gap-2 mx-auto",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Schedule First Activity"]})]}):c.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-bg-highlight rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:(0,u.cn)("w-3 h-3 rounded-full","completed"===e.status&&"bg-text-positive","in_progress"===e.status&&"bg-blue-500","scheduled"===e.status&&"bg-gray-400","cancelled"===e.status&&"bg-text-danger")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-card-title",children:e.activity.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"w-3 h-3 text-nav-icon"}),(0,a.jsx)("span",{className:"text-xs text-card-subtext",children:(0,u.mr)(e.scheduled_time)})]}),e.assigned_user&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"w-3 h-3 text-nav-icon"}),(0,a.jsx)("span",{className:"text-xs text-card-subtext",children:e.assigned_user.full_name})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium","completed"===e.status&&"bg-text-positive/10 text-text-positive","in_progress"===e.status&&"bg-blue-100 text-blue-800","scheduled"===e.status&&"bg-gray-100 text-gray-800","cancelled"===e.status&&"bg-text-danger/10 text-text-danger"),children:e.status.replace("_"," ")}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>l(e),className:"p-1 text-[#4ECDC4] hover:bg-[#4ECDC4]/10 rounded",title:"Edit activity",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>i(e),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Delete activity",children:(0,a.jsx)(f.Z,{className:"w-4 h-4"})})]})]})]},e.id))})]})},ActiveActivitiesStatus=e=>{let{activityLogs:t,onEditSchedule:s,onDeleteSchedule:l}=e,i=t.filter(e=>"in_progress"===e.status),n=t.filter(e=>"completed"===e.status);return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-card-title flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-blue-500"}),"In Progress Activities (",i.length,")"]})}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===i.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-card-subtext",children:"No activities in progress"})}):i.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-card-title",children:e.activity.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3 text-nav-icon"}),(0,a.jsx)("span",{className:"text-xs text-card-subtext",children:(0,u.p6)(e.scheduled_date)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"w-3 h-3 text-nav-icon"}),(0,a.jsx)("span",{className:"text-xs text-card-subtext",children:(0,u.mr)(e.scheduled_time)})]}),e.assigned_user&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"w-3 h-3 text-nav-icon"}),(0,a.jsx)("span",{className:"text-xs text-card-subtext",children:e.assigned_user.full_name})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"In Progress"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>s(e),className:"p-1 text-[#4ECDC4] hover:bg-[#4ECDC4]/10 rounded",title:"Edit activity",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>l(e),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Delete activity",children:(0,a.jsx)(f.Z,{className:"w-4 h-4"})})]})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-card-title flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5 text-text-positive"}),"Completed Activities (",n.length,")"]})}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===n.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-card-subtext",children:"No completed activities"})}):n.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-text-positive rounded-full"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-card-title",children:e.activity.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3 text-nav-icon"}),(0,a.jsx)("span",{className:"text-xs text-card-subtext",children:(0,u.p6)(e.scheduled_date)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"w-3 h-3 text-nav-icon"}),(0,a.jsx)("span",{className:"text-xs text-card-subtext",children:(0,u.mr)(e.scheduled_time)})]}),e.assigned_user&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"w-3 h-3 text-nav-icon"}),(0,a.jsx)("span",{className:"text-xs text-card-subtext",children:e.assigned_user.full_name})]})]}),e.completion_percentage&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-text-positive h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.completion_percentage,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-card-subtext",children:[e.completion_percentage,"%"]})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-text-positive/10 text-text-positive",children:"Completed"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>s(e),className:"p-1 text-[#4ECDC4] hover:bg-[#4ECDC4]/10 rounded",title:"Edit activity",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>l(e),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Delete activity",children:(0,a.jsx)(f.Z,{className:"w-4 h-4"})})]})]})]},e.id))})]})]})},QuickStats=e=>{let{activityLogs:t}=e,s=getTodayLocalDate(),l=t.filter(e=>e.scheduled_date===s);return console.log("=== QuickStats Debug ==="),console.log("Today (local):",s),console.log("Total activities:",t.length),console.log("Activity dates:",t.map(e=>({id:e.id,date:e.scheduled_date,status:e.status}))),console.log("Today activities found:",l.length),console.log("Scheduled today:",l.filter(e=>"scheduled"===e.status).length),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Scheduled Today"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:l.filter(e=>"scheduled"===e.status).length||0})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-gray-800"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"In Progress"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:l.filter(e=>"in_progress"===e.status).length||0})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 text-blue-800"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:l.filter(e=>"completed"===e.status).length||0})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-text-positive/10 rounded-lg flex items-center justify-center",children:(0,a.jsx)(w.Z,{className:"w-6 h-6 text-text-positive"})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-card-subtext",children:"Total Activities"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-card-title",children:t.length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-btn-primary rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-white"})})]})})]})};function SchedulerPage(){let[e,t]=(0,l.useState)(!1),[s,c]=(0,l.useState)(!1),[r,o]=(0,l.useState)(!1),[x,m]=(0,l.useState)(null),[h,g]=(0,l.useState)(""),[b,j]=(0,l.useState)("month"),[v,f]=(0,l.useState)(new Date),{schedules:y,isLoading:N,isError:D,mutate:w}=(0,k.gZ)(),handleAddSchedule=e=>{e&&g(e),t(!0)},handleEditSchedule=e=>{m(e),c(!0)},handleDeleteSchedule=e=>{m(e),o(!0)},handleModalSuccess=()=>{w(),p.default.success("Schedule updated successfully!")},handleModalClose=()=>{m(null),g("")},handleViewChange=e=>{j(e)};return N?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-btn-primary"})})}):D?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(C.Z,{className:"w-16 h-16 text-text-danger mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Error Loading Schedule"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"Please try refreshing the page"})]})})}):(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(n.Z,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Scheduler"}]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Activity Scheduler"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"Plan and schedule daily activities with full calendar functionality"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,a.jsxs)("button",{onClick:()=>handleViewChange("month"),className:(0,u.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors flex items-center gap-2","month"===b?"bg-white text-btn-primary shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(_,{className:"w-4 h-4"}),"Month"]}),(0,a.jsxs)("button",{onClick:()=>handleViewChange("week"),className:(0,u.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors flex items-center gap-2","week"===b?"bg-white text-btn-primary shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(F,{className:"w-4 h-4"}),"Week"]})]}),(0,a.jsxs)("button",{onClick:()=>handleAddSchedule(),className:"btn-primary flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Schedule Activity"]})]})]}),(0,a.jsx)(QuickStats,{activityLogs:y}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"xl:col-span-3",children:"month"===b?(0,a.jsx)(MonthView,{activityLogs:y,onAddSchedule:handleAddSchedule,onEditSchedule:handleEditSchedule,onDeleteSchedule:handleDeleteSchedule,currentDate:v,onDateChange:f}):(0,a.jsx)(WeekView,{activityLogs:y,onAddSchedule:handleAddSchedule,onEditSchedule:handleEditSchedule,onDeleteSchedule:handleDeleteSchedule,currentDate:v,onDateChange:f})}),(0,a.jsx)("div",{className:"xl:col-span-1",children:(0,a.jsx)(ActivityList,{activityLogs:y,onAddSchedule:handleAddSchedule,onEditSchedule:handleEditSchedule,onDeleteSchedule:handleDeleteSchedule})})]}),(0,a.jsx)("div",{className:"xl:hidden",children:(0,a.jsx)(ActiveActivitiesStatus,{activityLogs:y,onEditSchedule:handleEditSchedule,onDeleteSchedule:handleDeleteSchedule})})]}),(0,a.jsx)(AddScheduleModal,{isOpen:e,onClose:()=>{t(!1),handleModalClose()},onSuccess:handleModalSuccess,selectedDate:h}),(0,a.jsx)(EditScheduleModal,{isOpen:s,onClose:()=>{c(!1),handleModalClose()},onSuccess:handleModalSuccess,activityLog:x}),(0,a.jsx)(DeleteScheduleModal,{isOpen:r,onClose:()=>{o(!1),handleModalClose()},onSuccess:handleModalSuccess,activityLog:x})]})}}},function(e){e.O(0,[186,607,462,180,390,971,472,744],function(){return e(e.s=457)}),_N_E=e.O()}]);