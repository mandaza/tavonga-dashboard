(()=>{var e={};e.id=5225,e.ids=[5225],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},1870:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d});var a=s(7096),l=s(6132),n=s(7284),r=s.n(n),i=s(2564),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["shifts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,523)),"/Users/mandaza/Documents/Project/tavonga/web-app/app/shifts/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,498)),"/Users/mandaza/Documents/Project/tavonga/web-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/mandaza/Documents/Project/tavonga/web-app/app/shifts/page.tsx"],x="/shifts/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/shifts/page",pathname:"/shifts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5380:(e,t,s)=>{Promise.resolve().then(s.bind(s,2330))},2330:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ShiftsPage});var a=s(784),l=s(9885),n=s(6729),r=s(7194),i=s(2385),c=s(6206),d=s(7094),o=s(3680),x=s(87),m=s(517),u=s(8699),h=s(4292),p=s(345);let g=[{value:"morning",label:"Morning (6AM - 2PM)"},{value:"afternoon",label:"Afternoon (2PM - 10PM)"},{value:"evening",label:"Evening (6PM - 12AM)"},{value:"night",label:"Night (10PM - 6AM)"},{value:"full_day",label:"Full Day (24 hours)"},{value:"custom",label:"Custom Hours"}],getDefaultTimes=e=>{switch(e){case"morning":return{start:"06:00",end:"14:00"};case"afternoon":return{start:"14:00",end:"22:00"};case"evening":return{start:"18:00",end:"00:00"};case"night":return{start:"22:00",end:"06:00"};case"full_day":return{start:"00:00",end:"23:59"};default:return{start:"",end:""}}};function AddShiftModal({isOpen:e,onClose:t,onSuccess:s}){let[n,r]=(0,l.useState)({carer:"",date:"",shift_type:"morning",start_time:"06:00",end_time:"14:00",break_duration:"30",location:"",client_name:"",client_address:"",notes:"",special_instructions:"",emergency_contact:""}),[f,b]=(0,l.useState)([]),[j,N]=(0,l.useState)(!1),[y,v]=(0,l.useState)(!1),[_,C]=(0,l.useState)({});(0,l.useEffect)(()=>{e&&loadCarers()},[e]),(0,l.useEffect)(()=>{if("custom"!==n.shift_type){let e=getDefaultTimes(n.shift_type);r(t=>({...t,start_time:e.start,end_time:e.end}))}},[n.shift_type]);let loadCarers=async()=>{v(!0);try{let e=await h.x.getUsers({role:"carer"});b(e.results||[])}catch(e){console.error("Error loading carers:",e),p.default.error("Failed to load carers")}finally{v(!1)}},handleInputChange=(e,t)=>{r(s=>({...s,[e]:t})),_[e]&&C(t=>({...t,[e]:""}))},validateForm=()=>{let e={};if(n.carer||(e.carer="Carer is required"),n.date||(e.date="Date is required"),n.start_time||(e.start_time="Start time is required"),n.end_time||(e.end_time="End time is required"),n.start_time&&n.end_time){let t=new Date(`2000-01-01T${n.start_time}`),s=new Date(`2000-01-01T${n.end_time}`);("night"===n.shift_type||"evening"===n.shift_type)&&s<t&&s.setDate(s.getDate()+1),s<=t&&"night"!==n.shift_type&&"evening"!==n.shift_type&&(e.end_time="End time must be after start time")}return n.break_duration&&isNaN(Number(n.break_duration))&&(e.break_duration="Break duration must be a valid number"),n.location.trim()||(e.location="Location is required"),C(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){N(!0);try{let e={carer:n.carer,date:n.date,shift_type:n.shift_type,start_time:n.start_time,end_time:n.end_time,break_duration:n.break_duration?parseInt(n.break_duration):0,location:n.location,client_name:n.client_name||void 0,client_address:n.client_address||void 0,notes:n.notes||void 0,special_instructions:n.special_instructions||void 0,emergency_contact:n.emergency_contact||void 0};await h.x.createShift(e),p.default.success("Shift scheduled successfully!"),s(),handleClose()}catch(e){console.error("Error creating shift:",e),p.default.error(e.message||"Failed to schedule shift")}finally{N(!1)}}},handleClose=()=>{j||(r({carer:"",date:"",shift_type:"morning",start_time:"06:00",end_time:"14:00",break_duration:"30",location:"",client_name:"",client_address:"",notes:"",special_instructions:"",emergency_contact:""}),C({}),t())};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(i.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Schedule New Shift"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Create a new shift assignment for carers"})]})]}),a.jsx("button",{onClick:handleClose,disabled:j,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:a.jsx(c.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Assigned Carer *"}),(0,a.jsxs)("select",{value:n.carer,onChange:e=>handleInputChange("carer",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.carer?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:j||y,children:[a.jsx("option",{value:"",children:"Select a carer"}),f.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))]}),_.carer&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.carer})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Date *"}),a.jsx("input",{type:"date",value:n.date,onChange:e=>handleInputChange("date",e.target.value),min:(()=>{let e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})(),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.date?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:j}),_.date&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.date})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Shift Type *"}),a.jsx("select",{value:n.shift_type,onChange:e=>handleInputChange("shift_type",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:j,children:g.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Time Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Start Time *"}),a.jsx("input",{type:"time",value:n.start_time,onChange:e=>handleInputChange("start_time",e.target.value),disabled:"custom"!==n.shift_type||j,className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.start_time?"border-[#FF6B6B]":"border-[#D3D3D3]","custom"!==n.shift_type&&"bg-gray-100")}),_.start_time&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.start_time})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"End Time *"}),a.jsx("input",{type:"time",value:n.end_time,onChange:e=>handleInputChange("end_time",e.target.value),disabled:"custom"!==n.shift_type||j,className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.end_time?"border-[#FF6B6B]":"border-[#D3D3D3]","custom"!==n.shift_type&&"bg-gray-100")}),_.end_time&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.end_time})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Break Duration (minutes)"}),a.jsx("input",{type:"number",value:n.break_duration,onChange:e=>handleInputChange("break_duration",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.break_duration?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"30",min:"0",max:"480",disabled:j}),_.break_duration&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.break_duration})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Location & Client Details"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(d.Z,{className:"w-4 h-4 inline mr-1"}),"Location *"]}),a.jsx("input",{type:"text",value:n.location,onChange:e=>handleInputChange("location",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.location?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"e.g., Main Facility, Client Home, Community Center",disabled:j}),_.location&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.location})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(o.Z,{className:"w-4 h-4 inline mr-1"}),"Client Name"]}),a.jsx("input",{type:"text",value:n.client_name,onChange:e=>handleInputChange("client_name",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"Client name (if applicable)",disabled:j})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Client Address"}),a.jsx("input",{type:"text",value:n.client_address,onChange:e=>handleInputChange("client_address",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"Client address (if applicable)",disabled:j})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Emergency Contact"}),a.jsx("input",{type:"text",value:n.emergency_contact,onChange:e=>handleInputChange("emergency_contact",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"Emergency contact information",disabled:j})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Notes & Instructions"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Special Instructions"}),a.jsx("textarea",{value:n.special_instructions,onChange:e=>handleInputChange("special_instructions",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Any special instructions for this shift",rows:3,disabled:j})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"General Notes"}),a.jsx("textarea",{value:n.notes,onChange:e=>handleInputChange("notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Additional notes about this shift",rows:3,disabled:j})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:handleClose,disabled:j,className:"px-6 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:j,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center space-x-2",children:j?(0,a.jsxs)(a.Fragment,{children:[a.jsx(x.Z,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Scheduling..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(m.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Schedule Shift"})]})})]})]})]})}):null}var f=s(9494),b=s(5441),j=s(4409);let N=[{value:"morning",label:"Morning (6AM - 2PM)"},{value:"afternoon",label:"Afternoon (2PM - 10PM)"},{value:"evening",label:"Evening (6PM - 12AM)"},{value:"night",label:"Night (10PM - 6AM)"},{value:"full_day",label:"Full Day (24 hours)"},{value:"custom",label:"Custom Hours"}];function EditShiftModal({isOpen:e,onClose:t,onSuccess:s,shift:n}){let[r,i]=(0,l.useState)({carer:"",date:"",shift_type:"morning",start_time:"",end_time:"",break_duration:"30",location:"",client_name:"",client_address:"",notes:"",special_instructions:"",emergency_contact:""}),[m,g]=(0,l.useState)([]),[y,v]=(0,l.useState)(!1),[_,C]=(0,l.useState)(!1),[D,w]=(0,l.useState)({});(0,l.useEffect)(()=>{e&&(loadCarers(),n&&populateForm(n))},[e,n]);let loadCarers=async()=>{C(!0);try{let e=await h.x.getUsers({role:"carer"});g(e.results||[])}catch(e){console.error("Error loading carers:",e),p.default.error("Failed to load carers")}finally{C(!1)}},populateForm=e=>{i({carer:e.carer.id||"",date:e.date||"",shift_type:e.shift_type||"morning",start_time:e.start_time||"",end_time:e.end_time||"",break_duration:e.break_duration?e.break_duration.toString():"30",location:e.location||"",client_name:e.client_name||"",client_address:e.client_address||"",notes:e.notes||"",special_instructions:e.special_instructions||"",emergency_contact:e.emergency_contact||""})},handleInputChange=(e,t)=>{i(s=>({...s,[e]:t})),D[e]&&w(t=>({...t,[e]:""}))},validateForm=()=>{let e={};if(r.carer||(e.carer="Carer is required"),r.date||(e.date="Date is required"),r.start_time||(e.start_time="Start time is required"),r.end_time||(e.end_time="End time is required"),r.start_time&&r.end_time){let t=new Date(`2000-01-01T${r.start_time}`),s=new Date(`2000-01-01T${r.end_time}`);("night"===r.shift_type||"evening"===r.shift_type)&&s<t&&s.setDate(s.getDate()+1),s<=t&&"night"!==r.shift_type&&"evening"!==r.shift_type&&(e.end_time="End time must be after start time")}return r.break_duration&&isNaN(Number(r.break_duration))&&(e.break_duration="Break duration must be a valid number"),r.location.trim()||(e.location="Location is required"),w(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),n&&validateForm()){v(!0);try{let e={carer:r.carer,date:r.date,shift_type:r.shift_type,start_time:r.start_time,end_time:r.end_time,break_duration:r.break_duration?parseInt(r.break_duration):0,location:r.location,client_name:r.client_name||void 0,client_address:r.client_address||void 0,notes:r.notes||void 0,special_instructions:r.special_instructions||void 0,emergency_contact:r.emergency_contact||void 0};await h.x.updateShift(n.id,e),p.default.success("Shift updated successfully!"),s(),handleClose()}catch(e){console.error("Error updating shift:",e),p.default.error(e.message||"Failed to update shift")}finally{v(!1)}}},handleClose=()=>{y||(w({}),t())},k=n&&("scheduled"===n.status||"cancelled"===n.status);return e&&n?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(f.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Edit Shift"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Update shift information and assignments"})]})]}),a.jsx("button",{onClick:handleClose,disabled:y,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:a.jsx(c.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),a.jsx("div",{className:"p-6 bg-[#F9F5F4] border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(b.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:n.carer.full_name}),a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"completed":return"bg-[#4ECDC4]/10 text-[#4ECDC4]";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-[#FF6B6B]/10 text-[#FF6B6B]";case"no_show":return"bg-orange-100 text-orange-800"}})(n.status)),children:n.status.replace("_"," ")}),a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"morning":return"bg-yellow-100 text-yellow-800";case"afternoon":return"bg-orange-100 text-orange-800";case"evening":return"bg-purple-100 text-purple-800";case"night":return"bg-blue-100 text-blue-800";case"full_day":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(n.shift_type)),children:n.shift_type.replace("_"," ")})]}),a.jsx("p",{className:"text-sm text-[#6D6D6D] mb-3",children:(0,u.p6)(n.date)}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-[#6D6D6D]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(b.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[(0,u.mr)(n.start_time)," - ",(0,u.mr)(n.end_time)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(d.Z,{className:"w-4 h-4"}),a.jsx("span",{children:n.location})]}),n.duration_hours&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(b.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[n.duration_hours,"h"]})]})]})]})]})}),!k&&a.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[a.jsx(j.Z,{className:"w-5 h-5 text-orange-500 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-orange-800 mb-1",children:"Limited Editing"}),(0,a.jsxs)("p",{className:"text-sm text-orange-700",children:["This shift is ",n.status,". Only certain fields can be modified for ",n.status," shifts."]})]})]})}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Assigned Carer *"}),(0,a.jsxs)("select",{value:r.carer,onChange:e=>handleInputChange("carer",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",D.carer?"border-[#FF6B6B]":"border-[#D3D3D3]",!k&&"bg-gray-100"),disabled:!k||y||_,children:[a.jsx("option",{value:"",children:"Select a carer"}),m.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))]}),D.carer&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:D.carer})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Date *"}),a.jsx("input",{type:"date",value:r.date,onChange:e=>handleInputChange("date",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",D.date?"border-[#FF6B6B]":"border-[#D3D3D3]",!k&&"bg-gray-100"),disabled:!k||y}),D.date&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:D.date})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Shift Type *"}),a.jsx("select",{value:r.shift_type,onChange:e=>handleInputChange("shift_type",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]","border-[#D3D3D3]",!k&&"bg-gray-100"),disabled:!k||y,children:N.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Time Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Start Time *"}),a.jsx("input",{type:"time",value:r.start_time,onChange:e=>handleInputChange("start_time",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",D.start_time?"border-[#FF6B6B]":"border-[#D3D3D3]",!k&&"bg-gray-100"),disabled:!k||y}),D.start_time&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:D.start_time})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"End Time *"}),a.jsx("input",{type:"time",value:r.end_time,onChange:e=>handleInputChange("end_time",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",D.end_time?"border-[#FF6B6B]":"border-[#D3D3D3]",!k&&"bg-gray-100"),disabled:!k||y}),D.end_time&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:D.end_time})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Break Duration (minutes)"}),a.jsx("input",{type:"number",value:r.break_duration,onChange:e=>handleInputChange("break_duration",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",D.break_duration?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"30",min:"0",max:"480",disabled:y}),D.break_duration&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:D.break_duration})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Location & Client Details"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(d.Z,{className:"w-4 h-4 inline mr-1"}),"Location *"]}),a.jsx("input",{type:"text",value:r.location,onChange:e=>handleInputChange("location",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",D.location?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"e.g., Main Facility, Client Home, Community Center",disabled:y}),D.location&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:D.location})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(o.Z,{className:"w-4 h-4 inline mr-1"}),"Client Name"]}),a.jsx("input",{type:"text",value:r.client_name,onChange:e=>handleInputChange("client_name",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"Client name (if applicable)",disabled:y})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Client Address"}),a.jsx("input",{type:"text",value:r.client_address,onChange:e=>handleInputChange("client_address",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"Client address (if applicable)",disabled:y})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Emergency Contact"}),a.jsx("input",{type:"text",value:r.emergency_contact,onChange:e=>handleInputChange("emergency_contact",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"Emergency contact information",disabled:y})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Notes & Instructions"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Special Instructions"}),a.jsx("textarea",{value:r.special_instructions,onChange:e=>handleInputChange("special_instructions",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Any special instructions for this shift",rows:3,disabled:y})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"General Notes"}),a.jsx("textarea",{value:r.notes,onChange:e=>handleInputChange("notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Additional notes about this shift",rows:3,disabled:y})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:handleClose,disabled:y,className:"px-6 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:y,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center space-x-2",children:y?(0,a.jsxs)(a.Fragment,{children:[a.jsx(x.Z,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Updating..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(f.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Update Shift"})]})})]})]})]})}):null}var y=s(6303),v=s(2032);function DeleteShiftModal({isOpen:e,onClose:t,onSuccess:s,shift:n}){let[r,i]=(0,l.useState)(!1),[g,f]=(0,l.useState)(0),handleDelete=async()=>{if(n){i(!0);try{await h.x.deleteShift(n.id),p.default.success("Shift deleted successfully!"),s(),handleClose()}catch(e){console.error("Error deleting shift:",e),p.default.error(e.message||"Failed to delete shift")}finally{i(!1)}}},handleClose=()=>{r||(f(0),t())};return e&&n?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#FF6B6B] rounded-lg flex items-center justify-center",children:a.jsx(y.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Delete Shift"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:0===g?"Review shift details before deletion":"Final confirmation required"})]})]}),a.jsx("button",{onClick:handleClose,disabled:r,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors disabled:opacity-50",children:a.jsx(c.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),a.jsx("div",{className:"p-6",children:0===g?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[a.jsx(j.Z,{className:"w-5 h-5 text-orange-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-orange-800 mb-1",children:"Warning"}),a.jsx("p",{className:"text-sm text-orange-700",children:n?"in_progress"===n.status?"This shift is currently in progress. Deleting it will affect clock-in/out records.":"completed"===n.status?"This shift has been completed with recorded clock-in/out times. Deleting it will permanently remove this data.":n.clock_in||n.clock_out?"This shift has clock-in/out records. Deleting it will permanently remove this attendance data.":"This shift will be permanently deleted from the system.":""})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Shift Details"}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-[#4ECDC4] rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(b.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-semibold text-[#000000]",children:n.carer.full_name}),a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"completed":return"bg-[#4ECDC4]/10 text-[#4ECDC4]";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-[#FF6B6B]/10 text-[#FF6B6B]";case"no_show":return"bg-orange-100 text-orange-800"}})(n.status)),children:n.status.replace("_"," ")}),a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"morning":return"bg-yellow-100 text-yellow-800";case"afternoon":return"bg-orange-100 text-orange-800";case"evening":return"bg-purple-100 text-purple-800";case"night":return"bg-blue-100 text-blue-800";case"full_day":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(n.shift_type)),children:n.shift_type.replace("_"," ")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-[#6D6D6D]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),a.jsx("span",{children:(0,u.p6)(n.date)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[(0,u.mr)(n.start_time)," - ",(0,u.mr)(n.end_time)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-4 h-4"}),a.jsx("span",{children:n.location})]}),n.client_name&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-4 h-4"}),a.jsx("span",{children:n.client_name})]})]})]})]})]}),(n.clock_in||n.clock_out)&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Attendance Records"}),(0,a.jsxs)("div",{className:"space-y-2",children:[n.clock_in&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(v.Z,{className:"w-4 h-4 text-green-500"}),(0,a.jsxs)("span",{className:"text-blue-700",children:["Clock In: ",(0,u.mr)(n.clock_in),n.clock_in_location&&` at ${n.clock_in_location}`]})]}),n.clock_out&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(v.Z,{className:"w-4 h-4 text-green-500"}),(0,a.jsxs)("span",{className:"text-blue-700",children:["Clock Out: ",(0,u.mr)(n.clock_out),n.clock_out_location&&` at ${n.clock_out_location}`]})]}),n.duration_hours&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(b.Z,{className:"w-4 h-4 text-blue-500"}),(0,a.jsxs)("span",{className:"text-blue-700",children:["Total Duration: ",n.duration_hours," hours"]})]})]})]}),(n.notes||n.special_instructions)&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-[#000000] mb-2",children:"Notes & Instructions"}),n.special_instructions&&(0,a.jsxs)("div",{className:"mb-2",children:[a.jsx("p",{className:"text-sm font-medium text-[#6D6D6D]",children:"Special Instructions:"}),a.jsx("p",{className:"text-sm text-[#000000]",children:n.special_instructions})]}),n.notes&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[#6D6D6D]",children:"Notes:"}),a.jsx("p",{className:"text-sm text-[#000000]",children:n.notes})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-[#FF6B6B] rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(j.Z,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-[#000000] mb-2",children:"Are you absolutely sure?"}),(0,a.jsxs)("p",{className:"text-[#6D6D6D] mb-4",children:["This action cannot be undone. The shift for ",a.jsx("strong",{children:n.carer.full_name})," on"," ",a.jsx("strong",{children:(0,u.p6)(n.date)})," will be permanently deleted."]}),(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[a.jsx("p",{className:"text-sm text-red-700 font-medium",children:"This will permanently remove:"}),(0,a.jsxs)("ul",{className:"text-sm text-red-700 mt-2 space-y-1",children:[a.jsx("li",{children:"• Shift schedule information"}),(n.clock_in||n.clock_out)&&a.jsx("li",{children:"• Clock-in/out records"}),n.duration_hours&&a.jsx("li",{children:"• Attendance duration data"}),(n.notes||n.special_instructions)&&a.jsx("li",{children:"• Notes and instructions"}),a.jsx("li",{children:"• All associated shift data"})]})]})]}),a.jsx("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-[#4ECDC4] rounded-full flex items-center justify-center",children:a.jsx(v.Z,{className:"w-5 h-5 text-white"})}),a.jsx("div",{className:"w-8 h-1 bg-[#4ECDC4] rounded-full"}),a.jsx("div",{className:"w-8 h-8 bg-[#FF6B6B] rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"2"})})]})})]})}),a.jsx("div",{className:"flex justify-end space-x-4 p-6 border-t border-gray-200",children:0===g?(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:handleClose,disabled:r,className:"px-6 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>{f(1)},disabled:r,className:"px-6 py-2 bg-[#FF6B6B] text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[a.jsx(j.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Proceed to Delete"})]})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>{f(0)},disabled:r,className:"px-6 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Go Back"}),a.jsx("button",{onClick:handleDelete,disabled:r,className:"px-6 py-2 bg-[#FF6B6B] text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 flex items-center space-x-2",children:r?(0,a.jsxs)(a.Fragment,{children:[a.jsx(x.Z,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Deleting..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(y.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Delete Permanently"})]})})]})})]})}):null}var _=s(1057),C=s(7552),D=s(8168),w=s(9518),k=s(5574),F=s(5905);let ShiftCard=({shift:e,onClockIn:t,onClockOut:s,onEdit:n,onDelete:r})=>{let[i,c]=(0,l.useState)(!1),handleClockIn=async()=>{c(!0);try{await t(e.id)}catch(e){console.error("Error clocking in:",e)}finally{c(!1)}},handleClockOut=async()=>{c(!0);try{await s(e.id)}catch(e){console.error("Error clocking out:",e)}finally{c(!1)}};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-card-title",children:e.carer.full_name}),a.jsx("p",{className:"text-sm text-card-subtext",children:(0,u.p6)(e.date)})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"completed":return"bg-text-positive/10 text-text-positive";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-text-danger/10 text-text-danger";case"no_show":return"bg-orange-100 text-orange-800"}})(e.status)),children:e.status.replace("_"," ")}),a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"morning":return"bg-yellow-100 text-yellow-800";case"afternoon":return"bg-orange-100 text-orange-800";case"evening":return"bg-purple-100 text-purple-800";case"night":return"bg-blue-100 text-blue-800";case"full_day":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.shift_type)),children:e.shift_type.replace("_"," ")})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:[(0,u.mr)(e.start_time)," - ",(0,u.mr)(e.end_time)]})]}),e.location&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-4 h-4 text-nav-icon"}),a.jsx("span",{className:"text-sm text-card-subtext",children:e.location})]}),e.client_name&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-4 h-4 text-nav-icon"}),a.jsx("span",{className:"text-sm text-card-subtext",children:e.client_name})]}),e.clock_in&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(v.Z,{className:"w-4 h-4 text-text-positive"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:["Clock in: ",(0,u.mr)(e.clock_in),e.clock_in_location&&` (${e.clock_in_location})`]})]}),e.clock_out&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(_.Z,{className:"w-4 h-4 text-text-danger"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:["Clock out: ",(0,u.mr)(e.clock_out),e.clock_out_location&&` (${e.clock_out_location})`]})]}),e.duration_hours&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:["Duration: ",e.duration_hours," hours"]})]}),e.is_late&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j.Z,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"text-sm text-orange-600",children:"Late arrival"})]}),e.is_early_leave&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j.Z,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"text-sm text-orange-600",children:"Left early"})]}),e.is_overdue&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j.Z,{className:"w-4 h-4 text-red-500"}),a.jsx("span",{className:"text-sm text-red-600",children:"Overdue"})]})]}),"scheduled"===e.status&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-border-default",children:[(0,a.jsxs)("button",{onClick:handleClockIn,disabled:i,className:"btn-primary flex items-center gap-2",children:[i?a.jsx(x.Z,{className:"w-4 h-4 animate-spin"}):a.jsx(C.Z,{className:"w-4 h-4"}),"Start Shift"]}),(0,a.jsxs)("button",{className:"btn-secondary flex items-center gap-2",children:[a.jsx(_.Z,{className:"w-4 h-4"}),"Cancel"]})]}),"in_progress"===e.status&&a.jsx("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-border-default",children:(0,a.jsxs)("button",{onClick:handleClockOut,disabled:i,className:"btn-primary flex items-center gap-2",children:[i?a.jsx(x.Z,{className:"w-4 h-4 animate-spin"}):a.jsx(D.Z,{className:"w-4 h-4"}),"End Shift"]})}),e.notes&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border-default",children:[a.jsx("p",{className:"text-xs text-card-subtext mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-card-subtext",children:e.notes})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-border-default",children:[(0,a.jsxs)("button",{onClick:()=>n(e),className:"btn-secondary flex items-center gap-2",disabled:i,children:[a.jsx(f.Z,{className:"w-4 h-4"}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>r(e),className:"text-[#FF6B6B] hover:bg-[#FF6B6B]/10 px-3 py-1 rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2",disabled:i,children:[a.jsx(y.Z,{className:"w-4 h-4"}),"Delete"]})]})]})},ShiftTable=({shifts:e,onClockIn:t,onClockOut:s,onEdit:l,onDelete:n})=>(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-card-title",children:"All Shifts"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(w.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),a.jsx("input",{type:"text",placeholder:"Search shifts...",className:"input-field pl-10 w-64"})]}),(0,a.jsxs)("select",{className:"input-field w-32",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"scheduled",children:"Scheduled"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"}),a.jsx("option",{value:"no_show",children:"No Show"})]}),(0,a.jsxs)("button",{className:"btn-secondary flex items-center gap-2",children:[a.jsx(k.Z,{className:"w-4 h-4"}),"Export"]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border-default",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Carer"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Time"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Type"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Location"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Clock In"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Clock Out"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Actions"})]})}),a.jsx("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-border-default hover:bg-bg-highlight",children:[a.jsx("td",{className:"py-3 px-4 text-text-primary",children:e.carer.full_name}),a.jsx("td",{className:"py-3 px-4 text-text-secondary",children:(0,u.p6)(e.date)}),(0,a.jsxs)("td",{className:"py-3 px-4 text-text-secondary",children:[(0,u.mr)(e.start_time)," - ",(0,u.mr)(e.end_time)]}),a.jsx("td",{className:"py-3 px-4 text-text-secondary capitalize",children:e.shift_type.replace("_"," ")}),a.jsx("td",{className:"py-3 px-4 text-text-secondary",children:e.location||"-"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium","completed"===e.status&&"bg-text-positive/10 text-text-positive","in_progress"===e.status&&"bg-blue-100 text-blue-800","scheduled"===e.status&&"bg-gray-100 text-gray-800","cancelled"===e.status&&"bg-text-danger/10 text-text-danger","no_show"===e.status&&"bg-orange-100 text-orange-800"),children:e.status.replace("_"," ")})}),a.jsx("td",{className:"py-3 px-4 text-text-secondary",children:e.clock_in?(0,u.mr)(e.clock_in):"-"}),a.jsx("td",{className:"py-3 px-4 text-text-secondary",children:e.clock_out?(0,u.mr)(e.clock_out):"-"}),a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["scheduled"===e.status&&a.jsx("button",{onClick:()=>t(e.id),className:"p-1 text-text-positive hover:bg-text-positive/10 rounded",title:"Start Shift",children:a.jsx(C.Z,{className:"w-4 h-4"})}),"in_progress"===e.status&&a.jsx("button",{onClick:()=>s(e.id),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"End Shift",children:a.jsx(D.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>l(e),className:"p-1 text-blue-500 hover:bg-blue-50 rounded",title:"Edit Shift",children:a.jsx(f.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>n(e),className:"p-1 text-[#FF6B6B] hover:bg-red-50 rounded",title:"Delete Shift",children:a.jsx(y.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]});function ShiftsPage(){let{shifts:e,isLoading:t,mutate:s}=(0,F.dE)(),[c,d]=(0,l.useState)("grid"),[o,g]=(0,l.useState)(""),[f,N]=(0,l.useState)("all"),[y,_]=(0,l.useState)(""),[C,D]=(0,l.useState)(!1),[E,S]=(0,l.useState)(!1),[B,Z]=(0,l.useState)(!1),[I,M]=(0,l.useState)(null),P=e.filter(e=>{let t=e.carer.full_name?.toLowerCase().includes(o.toLowerCase())||e.client_name?.toLowerCase().includes(o.toLowerCase())||e.location?.toLowerCase().includes(o.toLowerCase()),s="all"===f||e.status===f,a=!y||e.date===y;return t&&s&&a}),handleClockIn=async e=>{try{await h.x.clockIn(e),p.default.success("Shift started successfully"),s()}catch(e){p.default.error(e.message||"Failed to start shift")}},handleClockOut=async e=>{try{await h.x.clockOut(e),p.default.success("Shift ended successfully"),s()}catch(e){p.default.error(e.message||"Failed to end shift")}},handleEditShift=e=>{M(e),S(!0)},handleDeleteShift=e=>{M(e),Z(!0)},handleModalClose=()=>{D(!1),S(!1),Z(!1),M(null)},handleModalSuccess=()=>{s()};return t?a.jsx(n.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(x.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-btn-primary"}),a.jsx("p",{className:"text-text-secondary",children:"Loading shifts..."})]})})}):a.jsx(n.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(r.Z,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Shifts"}]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Shift Management"}),a.jsx("p",{className:"text-text-secondary",children:"Schedule, monitor, and manage carer shifts"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-bg-highlight rounded-lg p-1",children:[a.jsx("button",{onClick:()=>d("grid"),className:(0,u.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","grid"===c?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Grid"}),a.jsx("button",{onClick:()=>d("table"),className:(0,u.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","table"===c?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Table"})]}),(0,a.jsxs)("button",{onClick:()=>{D(!0)},className:"btn-primary flex items-center gap-2",children:[a.jsx(i.Z,{className:"w-4 h-4"}),"Schedule Shift"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Total Shifts"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.length})]}),a.jsx("div",{className:"w-12 h-12 bg-btn-primary rounded-lg flex items-center justify-center",children:a.jsx(b.Z,{className:"w-6 h-6 text-white"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Scheduled"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"scheduled"===e.status).length})]}),a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx(m.Z,{className:"w-6 h-6 text-gray-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"In Progress"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"in_progress"===e.status).length})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(b.Z,{className:"w-6 h-6 text-blue-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Completed"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"completed"===e.status).length})]}),a.jsx("div",{className:"w-12 h-12 bg-text-positive/10 rounded-lg flex items-center justify-center",children:a.jsx(v.Z,{className:"w-6 h-6 text-text-positive"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Morning Shifts"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"morning"===e.shift_type).length})]}),a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx(b.Z,{className:"w-6 h-6 text-yellow-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Afternoon Shifts"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"afternoon"===e.shift_type).length})]}),a.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(b.Z,{className:"w-6 h-6 text-orange-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Full Day Shifts"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"full_day"===e.shift_type).length})]}),a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(b.Z,{className:"w-6 h-6 text-green-800"})})]})})]}),(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-card-title mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("button",{className:"btn-secondary flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),"View Calendar"]}),(0,a.jsxs)("button",{className:"btn-secondary flex items-center gap-2",children:[a.jsx(k.Z,{className:"w-4 h-4"}),"Export Schedule"]}),(0,a.jsxs)("button",{className:"btn-secondary flex items-center gap-2",children:[a.jsx(j.Z,{className:"w-4 h-4"}),"View Alerts"]})]})]}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(w.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),a.jsx("input",{type:"text",placeholder:"Search shifts by carer, client, or location...",value:o,onChange:e=>g(e.target.value),className:"input-field pl-10"})]}),(0,a.jsxs)("select",{value:f,onChange:e=>N(e.target.value),className:"input-field w-40",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"scheduled",children:"Scheduled"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"}),a.jsx("option",{value:"no_show",children:"No Show"})]}),a.jsx("input",{type:"date",value:y,onChange:e=>_(e.target.value),className:"input-field w-40"})]})}),0===P.length?(0,a.jsxs)("div",{className:"card p-12 text-center",children:[a.jsx(b.Z,{className:"w-12 h-12 text-text-muted mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-card-title mb-2",children:"No shifts found"}),a.jsx("p",{className:"text-text-secondary",children:o||"all"!==f||y?"Try adjusting your search or filters":"No shifts have been scheduled yet"})]}):"grid"===c?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(e=>a.jsx(ShiftCard,{shift:e,onClockIn:handleClockIn,onClockOut:handleClockOut,onEdit:handleEditShift,onDelete:handleDeleteShift},e.id))}):a.jsx(ShiftTable,{shifts:P,onClockIn:handleClockIn,onClockOut:handleClockOut,onEdit:handleEditShift,onDelete:handleDeleteShift}),a.jsx(AddShiftModal,{isOpen:C,onClose:handleModalClose,onSuccess:handleModalSuccess}),a.jsx(EditShiftModal,{isOpen:E,onClose:handleModalClose,onSuccess:handleModalSuccess,shift:I}),a.jsx(DeleteShiftModal,{isOpen:B,onClose:handleModalClose,onSuccess:handleModalSuccess,shift:I})]})})}},523:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>n,default:()=>c});var a=s(5153);let l=(0,a.createProxy)(String.raw`/Users/mandaza/Documents/Project/tavonga/web-app/app/shifts/page.tsx`),{__esModule:n,$$typeof:r}=l,i=l.default,c=i}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[4312,9708,6897,516,1717,8282,3248,2234,3672,5905],()=>__webpack_exec__(1870));module.exports=s})();