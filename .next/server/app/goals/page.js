(()=>{var e={};e.id=9639,e.ids=[9639],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},8085:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c});var a=t(7096),l=t(6132),r=t(7284),i=t.n(r),n=t(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["goals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6405)),"/Users/mandaza/Documents/Project/tavonga/web-app/app/goals/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,498)),"/Users/mandaza/Documents/Project/tavonga/web-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/mandaza/Documents/Project/tavonga/web-app/app/goals/page.tsx"],x="/goals/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/goals/page",pathname:"/goals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},394:(e,s,t)=>{Promise.resolve().then(t.bind(t,5658))},5658:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>GoalsPage});var a=t(784),l=t(9885),r=t(6729),i=t(7194),n=t(5256),d=t(1831),c=t(696),o=t(517),x=t(9815),m=t(1672),h=t(87),u=t(6665),p=t(9494),g=t(6303),j=t(9518),b=t(2385),f=t(7),N=t(2032),v=t(5441),y=t(7281),D=t(3223),w=t(8699),C=t(2252),_=t(5905),F=t(4292),E=t(345),k=t(6206),B=t(2995);function AddGoalModal({isOpen:e,onClose:s,onSuccess:t}){let[r,i]=(0,l.useState)({name:"",description:"",category:"",target_date:"",priority:"medium",notes:"",assigned_carers:[],primary_activities:[],related_activities:[],completion_threshold:80}),[n,d]=(0,l.useState)({}),[h,u]=(0,l.useState)(!1),p=(0,_.Tg)(),{users:g}=(0,_.UV)(),{activities:j}=(0,_.G$)(),b=g.filter(e=>e.is_carer||"support_worker"===e.role),handleInputChange=e=>{let{name:s,value:t}=e.target;i(e=>({...e,[s]:t})),n[s]&&d(e=>({...e,[s]:""}))},handleMultiSelectChange=(e,s)=>{i(t=>({...t,[e]:t[e].includes(s)?t[e].filter(e=>e!==s):[...t[e],s]}))},validateForm=()=>{let e={};return r.name.trim()||(e.name="Goal name is required"),r.description.trim()||(e.description="Description is required"),r.category.trim()||(e.category="Category is required"),(r.completion_threshold<1||r.completion_threshold>100)&&(e.completion_threshold="Completion threshold must be between 1 and 100"),d(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){u(!0);try{await p(r),E.default.success("Goal created successfully!"),t(),s(),i({name:"",description:"",category:"",target_date:"",priority:"medium",notes:"",assigned_carers:[],primary_activities:[],related_activities:[],completion_threshold:80})}catch(e){E.default.error(e.message||"Failed to create goal")}finally{u(!1)}}},handleClose=()=>{h||s()};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(c.Z,{className:"w-5 h-5 text-white"})}),a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Add New Goal"})]}),a.jsx("button",{onClick:handleClose,disabled:h,className:"w-8 h-8 bg-[#F0F0F0] rounded-lg flex items-center justify-center hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:a.jsx(k.Z,{className:"w-4 h-4 text-[#000000]"})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Goal Name *"}),a.jsx("input",{type:"text",name:"name",value:r.name,onChange:handleInputChange,placeholder:"Enter goal name",className:`w-full px-4 py-3 rounded-lg border ${n.name?"border-[#FF6B6B]":"border-[#D3D3D3]"} focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]`}),n.name&&a.jsx("p",{className:"text-[#FF6B6B] text-sm mt-1",children:n.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Category *"}),a.jsx("input",{type:"text",name:"category",value:r.category,onChange:handleInputChange,placeholder:"e.g., Independence, Communication, Social Skills",className:`w-full px-4 py-3 rounded-lg border ${n.category?"border-[#FF6B6B]":"border-[#D3D3D3]"} focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]`}),n.category&&a.jsx("p",{className:"text-[#FF6B6B] text-sm mt-1",children:n.category})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Description *"}),a.jsx("textarea",{name:"description",value:r.description,onChange:handleInputChange,placeholder:"Describe the goal and what success looks like",rows:3,className:`w-full px-4 py-3 rounded-lg border ${n.description?"border-[#FF6B6B]":"border-[#D3D3D3]"} focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none`}),n.description&&a.jsx("p",{className:"text-[#FF6B6B] text-sm mt-1",children:n.description})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Goal Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-4 h-4"}),"Target Date"]})}),a.jsx("input",{type:"date",name:"target_date",value:r.target_date,onChange:handleInputChange,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(y.Z,{className:"w-4 h-4"}),"Priority"]})}),(0,a.jsxs)("select",{name:"priority",value:r.priority,onChange:handleInputChange,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"urgent",children:"Urgent"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Completion Threshold (%)"}),a.jsx("input",{type:"number",name:"completion_threshold",value:r.completion_threshold,onChange:handleInputChange,min:"1",max:"100",className:`w-full px-4 py-3 rounded-lg border ${n.completion_threshold?"border-[#FF6B6B]":"border-[#D3D3D3]"} focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]`}),n.completion_threshold&&a.jsx("p",{className:"text-[#FF6B6B] text-sm mt-1",children:n.completion_threshold})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Assignments"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),"Assigned Carers"]})}),a.jsx("div",{className:"max-h-40 overflow-y-auto border border-[#D3D3D3] rounded-lg p-3 bg-white",children:0===b.length?a.jsx("p",{className:"text-[#6D6D6D] text-sm",children:"No carers available"}):b.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-2 hover:bg-[#EEF8F7] rounded cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r.assigned_carers.includes(e.id),onChange:()=>handleMultiSelectChange("assigned_carers",e.id),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4] border-[#D3D3D3]"}),a.jsx("span",{className:"text-sm text-[#000000]",children:e.full_name}),(0,a.jsxs)("span",{className:"text-xs text-[#6D6D6D]",children:["(",e.role,")"]})]},e.id))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-4 h-4"}),"Related Activities"]})}),a.jsx("div",{className:"max-h-40 overflow-y-auto border border-[#D3D3D3] rounded-lg p-3 bg-white",children:0===j.length?a.jsx("p",{className:"text-[#6D6D6D] text-sm",children:"No activities available"}):j.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-2 hover:bg-[#EEF8F7] rounded cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r.related_activities.includes(e.id),onChange:()=>handleMultiSelectChange("related_activities",e.id),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4] border-[#D3D3D3]"}),a.jsx("span",{className:"text-sm text-[#000000]",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-[#6D6D6D]",children:["(",e.category,")"]})]},e.id))})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Additional Notes"}),a.jsx("textarea",{name:"notes",value:r.notes,onChange:handleInputChange,placeholder:"Any additional notes, special instructions, or considerations...",rows:4,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-[#E0E0E0]",children:[a.jsx("button",{type:"button",onClick:handleClose,disabled:h,className:"px-6 py-3 bg-[#F0F0F0] text-[#000000] rounded-lg hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:h,className:"px-6 py-3 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center gap-2",children:h?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(B.Z,{className:"w-4 h-4"}),"Create Goal"]})})]})]})]})}):null}function EditGoalModal({isOpen:e,onClose:s,onSuccess:t,goal:r}){let[i,n]=(0,l.useState)({name:"",description:"",category:"",target_date:"",priority:"medium",notes:"",assigned_carers:[],primary_activities:[],related_activities:[],completion_threshold:80}),[d,h]=(0,l.useState)({}),[u,p]=(0,l.useState)(!1),g=(0,_.xg)(),{users:j}=(0,_.UV)(),{activities:b}=(0,_.G$)(),f=j.filter(e=>e.is_carer||"support_worker"===e.role);(0,l.useEffect)(()=>{r&&n({name:r.name||"",description:r.description||"",category:r.category||"",target_date:r.target_date||"",priority:r.priority||"medium",notes:r.notes||"",assigned_carers:r.assigned_carers?.map(e=>e.id)||[],primary_activities:r.primary_activities?.map(e=>e.id)||[],related_activities:r.related_activities?.map(e=>e.id)||[],completion_threshold:r.completion_threshold||80})},[r]);let handleInputChange=e=>{let{name:s,value:t}=e.target;n(e=>({...e,[s]:t})),d[s]&&h(e=>({...e,[s]:""}))},handleMultiSelectChange=(e,s)=>{n(t=>({...t,[e]:t[e].includes(s)?t[e].filter(e=>e!==s):[...t[e],s]}))},validateForm=()=>{let e={};return i.name.trim()||(e.name="Goal name is required"),i.description.trim()||(e.description="Description is required"),i.category.trim()||(e.category="Category is required"),(i.completion_threshold<1||i.completion_threshold>100)&&(e.completion_threshold="Completion threshold must be between 1 and 100"),h(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()&&r){p(!0);try{await g(r.id,i),E.default.success("Goal updated successfully!"),t(),s()}catch(e){E.default.error(e.message||"Failed to update goal")}finally{p(!1)}}},handleClose=()=>{u||s()};return e&&r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(c.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Edit Goal"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Update goal details and settings"})]})]}),a.jsx("button",{onClick:handleClose,disabled:u,className:"w-8 h-8 bg-[#F0F0F0] rounded-lg flex items-center justify-center hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:a.jsx(k.Z,{className:"w-4 h-4 text-[#000000]"})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-[#EEF8F7] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Current Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Status"}),a.jsx("p",{className:"font-medium text-[#000000] capitalize",children:r.status})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Progress"}),(0,a.jsxs)("p",{className:"font-medium text-[#000000]",children:[r.calculated_progress,"%"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Activities"}),a.jsx("p",{className:"font-medium text-[#000000]",children:r.total_activities_count})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Completed"}),a.jsx("p",{className:"font-medium text-[#000000]",children:r.completed_activities_count})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Goal Name *"}),a.jsx("input",{type:"text",name:"name",value:i.name,onChange:handleInputChange,placeholder:"Enter goal name",className:`w-full px-4 py-3 rounded-lg border ${d.name?"border-[#FF6B6B]":"border-[#D3D3D3]"} focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]`}),d.name&&a.jsx("p",{className:"text-[#FF6B6B] text-sm mt-1",children:d.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Category *"}),a.jsx("input",{type:"text",name:"category",value:i.category,onChange:handleInputChange,placeholder:"e.g., Independence, Communication, Social Skills",className:`w-full px-4 py-3 rounded-lg border ${d.category?"border-[#FF6B6B]":"border-[#D3D3D3]"} focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]`}),d.category&&a.jsx("p",{className:"text-[#FF6B6B] text-sm mt-1",children:d.category})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Description *"}),a.jsx("textarea",{name:"description",value:i.description,onChange:handleInputChange,placeholder:"Describe the goal and what success looks like",rows:3,className:`w-full px-4 py-3 rounded-lg border ${d.description?"border-[#FF6B6B]":"border-[#D3D3D3]"} focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none`}),d.description&&a.jsx("p",{className:"text-[#FF6B6B] text-sm mt-1",children:d.description})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Goal Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-4 h-4"}),"Target Date"]})}),a.jsx("input",{type:"date",name:"target_date",value:i.target_date,onChange:handleInputChange,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(y.Z,{className:"w-4 h-4"}),"Priority"]})}),(0,a.jsxs)("select",{name:"priority",value:i.priority,onChange:handleInputChange,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"urgent",children:"Urgent"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Completion Threshold (%)"}),a.jsx("input",{type:"number",name:"completion_threshold",value:i.completion_threshold,onChange:handleInputChange,min:"1",max:"100",className:`w-full px-4 py-3 rounded-lg border ${d.completion_threshold?"border-[#FF6B6B]":"border-[#D3D3D3]"} focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]`}),d.completion_threshold&&a.jsx("p",{className:"text-[#FF6B6B] text-sm mt-1",children:d.completion_threshold})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Assignments"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),"Assigned Carers"]})}),a.jsx("div",{className:"max-h-40 overflow-y-auto border border-[#D3D3D3] rounded-lg p-3 bg-white",children:0===f.length?a.jsx("p",{className:"text-[#6D6D6D] text-sm",children:"No carers available"}):f.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-2 hover:bg-[#EEF8F7] rounded cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.assigned_carers.includes(e.id),onChange:()=>handleMultiSelectChange("assigned_carers",e.id),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4] border-[#D3D3D3]"}),a.jsx("span",{className:"text-sm text-[#000000]",children:e.full_name}),(0,a.jsxs)("span",{className:"text-xs text-[#6D6D6D]",children:["(",e.role,")"]})]},e.id))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-4 h-4"}),"Related Activities"]})}),a.jsx("div",{className:"max-h-40 overflow-y-auto border border-[#D3D3D3] rounded-lg p-3 bg-white",children:0===b.length?a.jsx("p",{className:"text-[#6D6D6D] text-sm",children:"No activities available"}):b.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-2 hover:bg-[#EEF8F7] rounded cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.related_activities.includes(e.id),onChange:()=>handleMultiSelectChange("related_activities",e.id),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4] border-[#D3D3D3]"}),a.jsx("span",{className:"text-sm text-[#000000]",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-[#6D6D6D]",children:["(",e.category,")"]})]},e.id))})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Additional Notes"}),a.jsx("textarea",{name:"notes",value:i.notes,onChange:handleInputChange,placeholder:"Any additional notes, special instructions, or considerations...",rows:4,className:"w-full px-4 py-3 rounded-lg border border-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-[#E0E0E0]",children:[a.jsx("button",{type:"button",onClick:handleClose,disabled:u,className:"px-6 py-3 bg-[#F0F0F0] text-[#000000] rounded-lg hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u,className:"px-6 py-3 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center gap-2",children:u?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(B.Z,{className:"w-4 h-4"}),"Update Goal"]})})]})]})]})}):null}var G=t(4409);function DeleteGoalModal({isOpen:e,onClose:s,onConfirm:t,goal:r}){let[i,n]=(0,l.useState)(!1),handleConfirm=async()=>{if(r){n(!0);try{await t(r.id),s()}catch(e){console.error("Error deleting goal:",e)}finally{n(!1)}}},handleClose=()=>{i||s()};return e&&r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#FF6B6B] rounded-lg flex items-center justify-center",children:a.jsx(G.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Delete Goal"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"This action cannot be undone"})]})]}),a.jsx("button",{onClick:handleClose,disabled:i,className:"w-8 h-8 bg-[#F0F0F0] rounded-lg flex items-center justify-center hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:a.jsx(k.Z,{className:"w-4 h-4 text-[#000000]"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("div",{className:"bg-[#FF6B6B]/10 border border-[#FF6B6B]/20 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(G.Z,{className:"w-5 h-5 text-[#FF6B6B] mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[#000000] mb-1",children:"Are you sure you want to delete this goal?"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"This will permanently remove the goal and all its associated data. This action cannot be undone."})]})]})}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-[20px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-4",children:"Goal to be deleted:"}),(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-[#6D6D6D]"}),a.jsx("h4",{className:"font-semibold text-[#000000]",children:r.name})]}),a.jsx("p",{className:"text-sm text-[#6D6D6D] mb-3",children:r.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"active":return"bg-[#4ECDC4]/10 text-[#4ECDC4]";case"completed":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-[#FF6B6B]/10 text-[#FF6B6B]";default:return"bg-gray-100 text-gray-800"}})(r.status)}`,children:r.status}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(r.priority)}`,children:r.priority})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(o.Z,{className:"w-4 h-4 text-[#6D6D6D]"}),a.jsx("span",{className:"text-sm font-medium text-[#000000]",children:"Target Date"})]}),a.jsx("p",{className:"text-sm text-[#6D6D6D] pl-6",children:r.target_date?(0,w.p6)(r.target_date):"No target date"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(x.Z,{className:"w-4 h-4 text-[#6D6D6D]"}),a.jsx("span",{className:"text-sm font-medium text-[#000000]",children:"Activities"})]}),(0,a.jsxs)("p",{className:"text-sm text-[#6D6D6D] pl-6",children:[r.total_activities_count," linked"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(m.Z,{className:"w-4 h-4 text-[#6D6D6D]"}),a.jsx("span",{className:"text-sm font-medium text-[#000000]",children:"Assigned Carers"})]}),(0,a.jsxs)("p",{className:"text-sm text-[#6D6D6D] pl-6",children:[r.assigned_carers.length," assigned"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-[#000000]",children:"Progress"}),(0,a.jsxs)("span",{className:"text-sm text-[#6D6D6D]",children:[r.calculated_progress,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-[#4ECDC4] h-2 rounded-full transition-all duration-300",style:{width:`${r.calculated_progress}%`}})})]}),r.category&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-[#E0E0E0]",children:[a.jsx("span",{className:"text-sm font-medium text-[#000000]",children:"Category: "}),a.jsx("span",{className:"text-sm text-[#6D6D6D]",children:r.category})]})]}),a.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-[#6D6D6D] text-center",children:[a.jsx("strong",{children:"Note:"})," Deleting this goal will also remove all progress tracking and associated data. Linked activities will remain but will no longer be connected to this goal."]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4 p-6 border-t border-[#E0E0E0]",children:[a.jsx("button",{onClick:handleClose,disabled:i,className:"px-6 py-3 bg-[#F0F0F0] text-[#000000] rounded-lg hover:bg-[#E5E5E5] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:handleConfirm,disabled:i,className:"px-6 py-3 bg-[#FF6B6B] text-white rounded-lg hover:bg-[#FF5252] transition-colors disabled:opacity-50 flex items-center gap-2",children:i?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(g.Z,{className:"w-4 h-4"}),"Delete Goal"]})})]})]})}):null}let GoalProgressChart=({goals:e})=>{let s={labels:e.map(e=>e.name.substring(0,15)+"..."),datasets:[{label:"Progress (%)",data:e.map(e=>e.calculated_progress),backgroundColor:e.map(e=>e.calculated_progress>=80?"#4ECDC4":e.calculated_progress>=50?"#FFA726":"#FF6B6B"),borderColor:e.map(e=>e.calculated_progress>=80?"#3DB9B2":e.calculated_progress>=50?"#FF9800":"#FF5252"),borderWidth:2,borderRadius:4}]};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-card-title",children:"Goal Progress Overview"}),a.jsx(n.Z,{className:"w-5 h-5 text-nav-icon"})]}),a.jsx("div",{className:"h-64",children:a.jsx(D.$Q,{data:s,options:{...C.q_,plugins:{...C.q_.plugins,legend:{display:!1}},scales:{x:{...C.q_.scales.x,grid:{display:!1},ticks:{...C.q_.scales.x.ticks,maxRotation:45,minRotation:45}},y:{...C.q_.scales.y,beginAtZero:!0,max:100,ticks:{...C.q_.scales.y.ticks,stepSize:20,callback:function(e){return e+"%"}}}}}})})]})},GoalCard=({goal:e,onEdit:s,onDelete:t})=>{var r;let[i,n]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1),handleDelete=async()=>{b(!0);try{await t(e.id),n(!1)}catch(e){console.error("Error deleting goal:",e)}finally{b(!1)}};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"font-semibold text-card-title",children:e.name}),e.is_overdue&&a.jsx(d.Z,{className:"w-4 h-4 text-red-500"})]}),a.jsx("p",{className:"text-sm text-card-subtext mb-3",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.category&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-nav-icon"}),a.jsx("span",{className:"text-sm text-card-subtext",children:e.category})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:["Target: ",e.target_date?(0,w.p6)(e.target_date):"No target date"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:[e.total_activities_count," activity",1!==e.total_activities_count?"s":""," linked",e.completed_activities_count>0&&(0,a.jsxs)("span",{className:"text-text-positive",children:[" (",e.completed_activities_count," completed)"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:[e.assigned_carers.length," carer",1!==e.assigned_carers.length?"s":""," assigned"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:(0,w.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"active":return"bg-text-positive/10 text-text-positive";case"completed":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-text-danger/10 text-text-danger";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status}),a.jsx("span",{className:(0,w.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority)),children:e.priority}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("button",{onClick:()=>n(!i),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",disabled:j,children:j?a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}):a.jsx(u.Z,{className:"w-4 h-4 text-nav-icon"})}),i&&a.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-bg-primary border border-border-default rounded-lg shadow-card z-50",children:(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("button",{onClick:()=>s(e),className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors",children:[a.jsx(p.Z,{className:"w-4 h-4 text-nav-icon"}),a.jsx("span",{className:"text-sm text-text-primary",children:"Edit Goal"})]}),(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors",children:[a.jsx(x.Z,{className:"w-4 h-4 text-nav-icon"}),a.jsx("span",{className:"text-sm text-text-primary",children:"Link Activities"})]}),(0,a.jsxs)("button",{onClick:handleDelete,disabled:j,className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors text-text-danger",children:[j?a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}):a.jsx(g.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Delete"})]})]})})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-card-subtext",children:"Progress"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-card-title",children:[e.calculated_progress,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:(0,w.cn)("h-2 rounded-full transition-all duration-300",(r=e.calculated_progress)>=80?"bg-text-positive":r>=50?"bg-yellow-500":"bg-text-danger"),style:{width:`${e.calculated_progress}%`}})}),e.progress_percentage!==e.calculated_progress&&(0,a.jsxs)("p",{className:"text-xs text-card-subtext mt-1",children:["Manual progress: ",e.progress_percentage,"% | Calculated: ",e.calculated_progress,"%"]})]}),e.all_activities.length>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border-default",children:[a.jsx("p",{className:"text-xs text-card-subtext mb-2",children:"Linked Activities:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.all_activities.slice(0,3).map(e=>a.jsx("span",{className:"px-2 py-1 bg-btn-primary/10 text-btn-primary rounded-full text-xs",children:e.name},e.id)),e.all_activities.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:["+",e.all_activities.length-3]})]})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border-default",children:[a.jsx("p",{className:"text-xs text-card-subtext mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-card-subtext",children:e.notes})]})]})},GoalTable=({goals:e,onEdit:s,onDelete:t})=>(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-card-title",children:"All Goals"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),a.jsx("input",{type:"text",placeholder:"Search goals...",className:"input-field pl-10 w-64"})]}),(0,a.jsxs)("select",{className:"input-field w-32",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"paused",children:"Paused"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border-default",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Goal"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Priority"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Progress"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Target Date"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Activities"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Carers"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Created"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Actions"})]})}),a.jsx("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-border-default hover:bg-bg-highlight",children:[a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-text-primary font-medium",children:e.name}),e.is_overdue&&a.jsx(d.Z,{className:"w-4 h-4 text-red-500"})]}),a.jsx("p",{className:"text-sm text-text-secondary",children:e.description}),e.category&&a.jsx("p",{className:"text-xs text-text-muted",children:e.category})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:(0,w.cn)("px-2 py-1 rounded-full text-xs font-medium","active"===e.status&&"bg-text-positive/10 text-text-positive","completed"===e.status&&"bg-green-100 text-green-800","paused"===e.status&&"bg-yellow-100 text-yellow-800","cancelled"===e.status&&"bg-text-danger/10 text-text-danger"),children:e.status})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:(0,w.cn)("px-2 py-1 rounded-full text-xs font-medium","urgent"===e.priority&&"bg-red-100 text-red-800","high"===e.priority&&"bg-orange-100 text-orange-800","medium"===e.priority&&"bg-yellow-100 text-yellow-800","low"===e.priority&&"bg-green-100 text-green-800"),children:e.priority})}),a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:(0,w.cn)("h-2 rounded-full",e.calculated_progress>=80?"bg-text-positive":e.calculated_progress>=50?"bg-yellow-500":"bg-text-danger"),style:{width:`${e.calculated_progress}%`}})}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:[e.calculated_progress,"%"]})]})}),a.jsx("td",{className:"py-3 px-4 text-text-secondary",children:e.target_date?(0,w.p6)(e.target_date):"-"}),a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.jsx("span",{className:"px-2 py-1 bg-btn-primary/10 text-btn-primary rounded-full text-xs",children:e.total_activities_count}),e.completed_activities_count>0&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-text-positive/10 text-text-positive rounded-full text-xs",children:[e.completed_activities_count," âœ“"]})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:e.assigned_carers.length})}),a.jsx("td",{className:"py-3 px-4 text-text-secondary",children:(0,w.p6)(e.created_at)}),a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>s(e),className:"p-1 text-nav-icon hover:bg-bg-highlight rounded",title:"Edit Goal",children:a.jsx(p.Z,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-1 text-nav-icon hover:bg-bg-highlight rounded",title:"Link Activities",children:a.jsx(x.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>t(e.id),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Delete Goal",children:a.jsx(g.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]});function GoalsPage(){let{goals:e,isLoading:s,mutate:t}=(0,_.g0)(),[n,o]=(0,l.useState)("grid"),[m,u]=(0,l.useState)(""),[p,g]=(0,l.useState)("all"),[D,C]=(0,l.useState)("all"),[k,B]=(0,l.useState)(!1),[G,Z]=(0,l.useState)(!1),[S,A]=(0,l.useState)(!1),[P,M]=(0,l.useState)(null),q=e.filter(e=>{let s=e.name?.toLowerCase().includes(m.toLowerCase())||e.description?.toLowerCase().includes(m.toLowerCase())||e.category?.toLowerCase().includes(m.toLowerCase()),t="all"===p||e.status===p,a="all"===D||e.priority===D;return s&&t&&a}),handleEditGoal=e=>{M(e),Z(!0)},handleDeleteGoal=s=>{let t=e.find(e=>e.id===s);t&&(M(t),A(!0))},handleDeleteConfirm=async e=>{try{await F.x.deleteGoal(e),E.default.success("Goal deleted successfully"),t()}catch(e){E.default.error(e.message||"Failed to delete goal")}},handleModalSuccess=()=>{t()},handleModalClose=()=>{M(null),B(!1),Z(!1),A(!1)};return s?a.jsx(r.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(h.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-btn-primary"}),a.jsx("p",{className:"text-text-secondary",children:"Loading goals..."})]})})}):(0,a.jsxs)(r.Z,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(i.Z,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Goals"}]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Goal Management"}),a.jsx("p",{className:"text-text-secondary",children:"Create, track, and manage care goals and progress"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-bg-highlight rounded-lg p-1",children:[a.jsx("button",{onClick:()=>o("grid"),className:(0,w.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","grid"===n?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Grid"}),a.jsx("button",{onClick:()=>o("table"),className:(0,w.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","table"===n?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Table"})]}),(0,a.jsxs)("button",{onClick:()=>B(!0),className:"btn-primary flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-4 h-4"}),"Add Goal"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Total Goals"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.length})]}),a.jsx("div",{className:"w-12 h-12 bg-btn-primary rounded-lg flex items-center justify-center",children:a.jsx(c.Z,{className:"w-6 h-6 text-white"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Active Goals"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"active"===e.status).length})]}),a.jsx("div",{className:"w-12 h-12 bg-text-positive/10 rounded-lg flex items-center justify-center",children:a.jsx(f.Z,{className:"w-6 h-6 text-text-positive"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Completed"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"completed"===e.status).length})]}),a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(N.Z,{className:"w-6 h-6 text-green-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Avg Progress"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-card-title",children:[(()=>{if(0===e.length)return 0;let s=e.reduce((e,s)=>e+s.calculated_progress,0);return Math.round(s/e.length)})(),"%"]})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(v.Z,{className:"w-6 h-6 text-blue-800"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"High Priority"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"high"===e.priority).length+e.filter(e=>"urgent"===e.priority).length})]}),a.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(y.Z,{className:"w-6 h-6 text-orange-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Paused"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"paused"===e.status).length})]}),a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx(v.Z,{className:"w-6 h-6 text-yellow-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Overdue"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>e.is_overdue).length})]}),a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:a.jsx(d.Z,{className:"w-6 h-6 text-red-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Total Activities"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.reduce((e,s)=>e+s.total_activities_count,0)})]}),a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(x.Z,{className:"w-6 h-6 text-purple-800"})})]})})]}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),a.jsx("input",{type:"text",placeholder:"Search goals by name, description, or category...",value:m,onChange:e=>u(e.target.value),className:"input-field pl-10"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"input-field w-40",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"paused",children:"Paused"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]}),(0,a.jsxs)("select",{value:D,onChange:e=>C(e.target.value),className:"input-field w-32",children:[a.jsx("option",{value:"all",children:"All Priority"}),a.jsx("option",{value:"urgent",children:"Urgent"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]})}),0===q.length?(0,a.jsxs)("div",{className:"card p-12 text-center",children:[a.jsx(c.Z,{className:"w-12 h-12 text-text-muted mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-card-title mb-2",children:"No goals found"}),a.jsx("p",{className:"text-text-secondary",children:m||"all"!==p||"all"!==D?"Try adjusting your search or filters":"No goals have been created yet"})]}):"grid"===n?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(e=>a.jsx(GoalCard,{goal:e,onEdit:handleEditGoal,onDelete:handleDeleteGoal},e.id))}):a.jsx(GoalTable,{goals:q,onEdit:handleEditGoal,onDelete:handleDeleteGoal}),e.length>0&&a.jsx(GoalProgressChart,{goals:e})]}),a.jsx(AddGoalModal,{isOpen:k,onClose:handleModalClose,onSuccess:handleModalSuccess}),a.jsx(EditGoalModal,{isOpen:G,onClose:handleModalClose,onSuccess:handleModalSuccess,goal:P}),a.jsx(DeleteGoalModal,{isOpen:S,onClose:handleModalClose,onConfirm:handleDeleteConfirm,goal:P})]})}},6405:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>d});var a=t(5153);let l=(0,a.createProxy)(String.raw`/Users/mandaza/Documents/Project/tavonga/web-app/app/goals/page.tsx`),{__esModule:r,$$typeof:i}=l,n=l.default,d=n}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[4312,9708,6897,516,3223,4809,8610,4924,2234,3672,5905,2252],()=>__webpack_exec__(8085));module.exports=t})();