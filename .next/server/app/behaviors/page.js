(()=>{var e={};e.id=5572,e.ids=[5572],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},7416:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d});var a=s(7096),r=s(6132),i=s(7284),l=s.n(i),n=s(2564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["behaviors",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4032)),"/Users/mandaza/Documents/Project/tavonga/web-app/app/behaviors/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,498)),"/Users/mandaza/Documents/Project/tavonga/web-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/mandaza/Documents/Project/tavonga/web-app/app/behaviors/page.tsx"],x="/behaviors/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/behaviors/page",pathname:"/behaviors",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8906:(e,t,s)=>{Promise.resolve().then(s.bind(s,8635))},8635:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>BehaviorsPage});var a=s(784),r=s(9885),i=s(6729),l=s(7194),n=s(5256),o=s(1831),d=s(6494),c=s(517),x=s(7094),m=s(5441),h=s(87),u=s(6665),p=s(8626),g=s(9494),b=s(6303),v=s(4409),f=s(4901),j=s(9815),y=s(2032),N=s(1057),_=s(9518),C=s(2385),D=s(7),w=s(3223),F=s(8699),B=s(2252),E=s(5905),k=s(6206),S=s(3680),I=s(4292),q=s(345);let Z=[{value:"home",label:"Home"},{value:"school",label:"School"},{value:"community",label:"Community"},{value:"therapy",label:"Therapy"},{value:"transport",label:"Transport"},{value:"other",label:"Other"}],A=[{value:"aggression",label:"Aggression"},{value:"self_injury",label:"Self Injury"},{value:"property_damage",label:"Property Damage"},{value:"elopement",label:"Elopement"},{value:"non_compliance",label:"Non Compliance"},{value:"disruption",label:"Disruption"},{value:"other",label:"Other"}],T=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-orange-100 text-orange-800"},{value:"critical",label:"Critical",color:"bg-red-100 text-red-800"}],L=["Hitting","Kicking","Biting","Scratching","Throwing objects","Spitting","Verbal aggression","Screaming","Crying","Self-hitting","Head banging","Scratching self","Running away","Hiding","Refusing instructions","Destroying property","Making noise","Interrupting"],P=["Loud noises","Change in routine","Denied request","Frustration","Overstimulation","Fatigue","Hunger","Social pressure","Confusion","Physical discomfort","Transition between activities","Crowded spaces"],U=["Increased agitation","Restlessness","Verbal complaints","Fidgeting","Facial expressions changes","Repetitive movements","Withdrawal","Increased volume","Clenched fists","Pacing","Difficulty following instructions"];function AddBehaviorModal({isOpen:e,onClose:t,onSuccess:s}){let[i,l]=(0,r.useState)({user:"",date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),location:"home",specific_location:"",activity_before:"",behavior_type:"aggression",behaviors:[],warning_signs:[],duration_minutes:"",severity:"medium",harm_to_self:!1,harm_to_others:!1,property_damage:!1,damage_description:"",intervention_used:"",intervention_effective:!1,intervention_notes:"",follow_up_required:!1,follow_up_notes:"",notes:"",triggers_identified:[]}),[n,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)({}),[f,y]=(0,r.useState)(""),[N,_]=(0,r.useState)(""),[D,w]=(0,r.useState)("");(0,r.useEffect)(()=>{e&&loadUsers()},[e]);let loadUsers=async()=>{p(!0);try{let e=await I.x.getUsers();o(e.results||[])}catch(e){console.error("Error loading users:",e),q.default.error("Failed to load users")}finally{p(!1)}},handleInputChange=(e,t)=>{l(s=>({...s,[e]:t})),g[e]&&b(t=>({...t,[e]:""}))},handleArrayToggle=(e,t)=>{l(s=>({...s,[e]:s[e].includes(t)?s[e].filter(e=>e!==t):[...s[e],t]}))},addCustomItem=(e,t)=>{t.trim()&&!i[e].includes(t.trim())&&l(s=>({...s,[e]:[...s[e],t.trim()]}))},removeItem=(e,t)=>{l(s=>({...s,[e]:s[e].filter(e=>e!==t)}))},validateForm=()=>{let e={};return i.user||(e.user="User is required"),i.date||(e.date="Date is required"),i.time||(e.time="Time is required"),0===i.behaviors.length&&(e.behaviors="At least one behavior must be selected"),i.intervention_used.trim()||(e.intervention_used="Intervention used is required"),i.duration_minutes&&isNaN(Number(i.duration_minutes))&&(e.duration_minutes="Duration must be a valid number"),i.property_damage&&!i.damage_description.trim()&&(e.damage_description="Damage description is required when property damage occurred"),i.follow_up_required&&!i.follow_up_notes.trim()&&(e.follow_up_notes="Follow-up notes are required when follow-up is needed"),b(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){c(!0);try{let e={user:i.user,date:i.date,time:i.time,location:i.location,specific_location:i.specific_location||void 0,activity_before:i.activity_before||void 0,behavior_type:i.behavior_type,behaviors:i.behaviors,warning_signs:i.warning_signs,duration_minutes:i.duration_minutes?parseInt(i.duration_minutes):void 0,severity:i.severity,harm_to_self:i.harm_to_self,harm_to_others:i.harm_to_others,property_damage:i.property_damage,damage_description:i.damage_description||void 0,intervention_used:i.intervention_used,intervention_effective:i.intervention_effective,intervention_notes:i.intervention_notes||void 0,follow_up_required:i.follow_up_required,follow_up_notes:i.follow_up_notes||void 0,notes:i.notes||void 0,triggers_identified:i.triggers_identified,photos:[],videos:[],is_critical:"critical"===i.severity,requires_immediate_attention:"critical"===i.severity||i.follow_up_required};await I.x.createBehavior(e),q.default.success("Behavior log created successfully!"),s(),handleClose()}catch(e){console.error("Error creating behavior:",e),q.default.error(e.message||"Failed to create behavior log")}finally{c(!1)}}},handleClose=()=>{d||(l({user:"",date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),location:"home",specific_location:"",activity_before:"",behavior_type:"aggression",behaviors:[],warning_signs:[],duration_minutes:"",severity:"medium",harm_to_self:!1,harm_to_others:!1,property_damage:!1,damage_description:"",intervention_used:"",intervention_effective:!1,intervention_notes:"",follow_up_required:!1,follow_up_notes:"",notes:"",triggers_identified:[]}),b({}),y(""),_(""),w(""),t())};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(v.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Add Behavior Log"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Record a new behavior incident"})]})]}),a.jsx("button",{onClick:handleClose,disabled:d,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:a.jsx(k.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(S.Z,{className:"w-4 h-4 inline mr-1"}),"User *"]}),(0,a.jsxs)("select",{value:i.user,onChange:e=>handleInputChange("user",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",g.user?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:d||u,children:[a.jsx("option",{value:"",children:"Select user"}),n.map(e=>a.jsx("option",{value:e.id,children:e.full_name||`${e.first_name} ${e.last_name}`},e.id))]}),g.user&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:g.user})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Date *"}),a.jsx("input",{type:"date",value:i.date,onChange:e=>handleInputChange("date",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",g.date?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:d}),g.date&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:g.date})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(m.Z,{className:"w-4 h-4 inline mr-1"}),"Time *"]}),a.jsx("input",{type:"time",value:i.time,onChange:e=>handleInputChange("time",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",g.time?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:d}),g.time&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:g.time})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(x.Z,{className:"w-4 h-4 inline mr-1"}),"Location *"]}),a.jsx("select",{value:i.location,onChange:e=>handleInputChange("location",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:d,children:Z.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Specific Location"}),a.jsx("input",{type:"text",value:i.specific_location,onChange:e=>handleInputChange("specific_location",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"e.g., Living room, Classroom 2A",disabled:d})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(j.Z,{className:"w-4 h-4 inline mr-1"}),"Activity Before"]}),a.jsx("input",{type:"text",value:i.activity_before,onChange:e=>handleInputChange("activity_before",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"What was happening before the behavior?",disabled:d})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Behavior Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Behavior Type *"}),a.jsx("select",{value:i.behavior_type,onChange:e=>handleInputChange("behavior_type",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:d,children:A.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Severity *"}),a.jsx("select",{value:i.severity,onChange:e=>handleInputChange("severity",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:d,children:T.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Duration (minutes)"}),a.jsx("input",{type:"number",value:i.duration_minutes,onChange:e=>handleInputChange("duration_minutes",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",g.duration_minutes?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"5",min:"1",disabled:d}),g.duration_minutes&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:g.duration_minutes})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Specific Behaviors *"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(e=>a.jsx("button",{type:"button",onClick:()=>handleArrayToggle("behaviors",e),className:(0,F.cn)("px-3 py-1 text-sm rounded-full border transition-colors",i.behaviors.includes(e)?"bg-[#4ECDC4] text-white border-[#4ECDC4]":"bg-white text-[#6D6D6D] border-[#D3D3D3] hover:border-[#4ECDC4]"),disabled:d,children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:f,onChange:e=>y(e.target.value),placeholder:"Add custom behavior",className:"flex-1 px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:d}),a.jsx("button",{type:"button",onClick:()=>{addCustomItem("behaviors",f),y("")},className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors",disabled:d||!f.trim(),children:"Add"})]}),i.behaviors.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:i.behaviors.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-[#4ECDC4] text-white text-sm rounded-full",children:[e,a.jsx("button",{type:"button",onClick:()=>removeItem("behaviors",e),className:"text-white hover:text-red-200 ml-1",disabled:d,children:a.jsx(k.Z,{className:"w-3 h-3"})})]},e))}),g.behaviors&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:g.behaviors})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Warning Signs"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(e=>a.jsx("button",{type:"button",onClick:()=>handleArrayToggle("warning_signs",e),className:(0,F.cn)("px-3 py-1 text-sm rounded-full border transition-colors",i.warning_signs.includes(e)?"bg-[#4ECDC4] text-white border-[#4ECDC4]":"bg-white text-[#6D6D6D] border-[#D3D3D3] hover:border-[#4ECDC4]"),disabled:d,children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:D,onChange:e=>w(e.target.value),placeholder:"Add custom warning sign",className:"flex-1 px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:d}),a.jsx("button",{type:"button",onClick:()=>{addCustomItem("warning_signs",D),w("")},className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors",disabled:d||!D.trim(),children:"Add"})]}),i.warning_signs.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:i.warning_signs.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-[#4ECDC4] text-white text-sm rounded-full",children:[e,a.jsx("button",{type:"button",onClick:()=>removeItem("warning_signs",e),className:"text-white hover:text-red-200 ml-1",disabled:d,children:a.jsx(k.Z,{className:"w-3 h-3"})})]},e))})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Triggers Identified"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(e=>a.jsx("button",{type:"button",onClick:()=>handleArrayToggle("triggers_identified",e),className:(0,F.cn)("px-3 py-1 text-sm rounded-full border transition-colors",i.triggers_identified.includes(e)?"bg-[#4ECDC4] text-white border-[#4ECDC4]":"bg-white text-[#6D6D6D] border-[#D3D3D3] hover:border-[#4ECDC4]"),disabled:d,children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:N,onChange:e=>_(e.target.value),placeholder:"Add custom trigger",className:"flex-1 px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:d}),a.jsx("button",{type:"button",onClick:()=>{addCustomItem("triggers_identified",N),_("")},className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors",disabled:d||!N.trim(),children:"Add"})]}),i.triggers_identified.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:i.triggers_identified.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-[#4ECDC4] text-white text-sm rounded-full",children:[e,a.jsx("button",{type:"button",onClick:()=>removeItem("triggers_identified",e),className:"text-white hover:text-red-200 ml-1",disabled:d,children:a.jsx(k.Z,{className:"w-3 h-3"})})]},e))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Risk Assessment"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"harm_to_self",checked:i.harm_to_self,onChange:e=>handleInputChange("harm_to_self",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:d}),a.jsx("label",{htmlFor:"harm_to_self",className:"text-sm text-[#000000]",children:"Harm to Self"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"harm_to_others",checked:i.harm_to_others,onChange:e=>handleInputChange("harm_to_others",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:d}),a.jsx("label",{htmlFor:"harm_to_others",className:"text-sm text-[#000000]",children:"Harm to Others"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"property_damage",checked:i.property_damage,onChange:e=>handleInputChange("property_damage",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:d}),a.jsx("label",{htmlFor:"property_damage",className:"text-sm text-[#000000]",children:"Property Damage"})]})]}),i.property_damage&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Damage Description *"}),a.jsx("textarea",{value:i.damage_description,onChange:e=>handleInputChange("damage_description",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",g.damage_description?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"Describe the property damage",rows:2,disabled:d}),g.damage_description&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:g.damage_description})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Intervention"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Intervention Used *"}),a.jsx("textarea",{value:i.intervention_used,onChange:e=>handleInputChange("intervention_used",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",g.intervention_used?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"Describe the intervention that was used",rows:3,disabled:d}),g.intervention_used&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:g.intervention_used})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"intervention_effective",checked:i.intervention_effective,onChange:e=>handleInputChange("intervention_effective",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:d}),a.jsx("label",{htmlFor:"intervention_effective",className:"text-sm text-[#000000]",children:"Intervention was effective"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"follow_up_required",checked:i.follow_up_required,onChange:e=>handleInputChange("follow_up_required",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:d}),a.jsx("label",{htmlFor:"follow_up_required",className:"text-sm text-[#000000]",children:"Follow-up required"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Intervention Notes"}),a.jsx("textarea",{value:i.intervention_notes,onChange:e=>handleInputChange("intervention_notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Additional notes about the intervention",rows:2,disabled:d})]}),i.follow_up_required&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Follow-up Notes *"}),a.jsx("textarea",{value:i.follow_up_notes,onChange:e=>handleInputChange("follow_up_notes",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",g.follow_up_notes?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"Describe the follow-up actions required",rows:2,disabled:d}),g.follow_up_notes&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:g.follow_up_notes})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Additional Information"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Notes"}),a.jsx("textarea",{value:i.notes,onChange:e=>handleInputChange("notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Any additional notes or observations",rows:3,disabled:d})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:handleClose,disabled:d,className:"flex-1 px-4 py-2 border border-[#D3D3D3] text-[#6D6D6D] rounded-lg hover:bg-[#F9F5F4] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(C.Z,{className:"w-4 h-4"}),"Create Behavior Log"]})})]})]})]})}):null}let z=[{value:"home",label:"Home"},{value:"school",label:"School"},{value:"community",label:"Community"},{value:"therapy",label:"Therapy"},{value:"transport",label:"Transport"},{value:"other",label:"Other"}],H=[{value:"aggression",label:"Aggression"},{value:"self_injury",label:"Self Injury"},{value:"property_damage",label:"Property Damage"},{value:"elopement",label:"Elopement"},{value:"non_compliance",label:"Non Compliance"},{value:"disruption",label:"Disruption"},{value:"other",label:"Other"}],M=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-orange-100 text-orange-800"},{value:"critical",label:"Critical",color:"bg-red-100 text-red-800"}],O=["Hitting","Kicking","Biting","Scratching","Throwing objects","Spitting","Verbal aggression","Screaming","Crying","Self-hitting","Head banging","Scratching self","Running away","Hiding","Refusing instructions","Destroying property","Making noise","Interrupting"],R=["Loud noises","Change in routine","Denied request","Frustration","Overstimulation","Fatigue","Hunger","Social pressure","Confusion","Physical discomfort","Transition between activities","Crowded spaces"],$=["Increased agitation","Restlessness","Verbal complaints","Fidgeting","Facial expressions changes","Repetitive movements","Withdrawal","Increased volume","Clenched fists","Pacing","Difficulty following instructions"];function EditBehaviorModal({isOpen:e,onClose:t,onSuccess:s,behavior:i}){let[l,n]=(0,r.useState)({user:"",date:"",time:"",location:"home",specific_location:"",activity_before:"",behavior_type:"aggression",behaviors:[],warning_signs:[],duration_minutes:"",severity:"medium",harm_to_self:!1,harm_to_others:!1,property_damage:!1,damage_description:"",intervention_used:"",intervention_effective:!1,intervention_notes:"",follow_up_required:!1,follow_up_notes:"",notes:"",triggers_identified:[]}),[o,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),[v,f]=(0,r.useState)({}),[y,N]=(0,r.useState)(""),[_,C]=(0,r.useState)(""),[D,w]=(0,r.useState)("");(0,r.useEffect)(()=>{e&&i&&(loadUsers(),n({user:i.user?.id||"",date:i.date||"",time:i.time||"",location:i.location||"home",specific_location:i.specific_location||"",activity_before:i.activity_before||"",behavior_type:i.behavior_type||"aggression",behaviors:i.behaviors||[],warning_signs:i.warning_signs||[],duration_minutes:i.duration_minutes?String(i.duration_minutes):"",severity:i.severity||"medium",harm_to_self:i.harm_to_self||!1,harm_to_others:i.harm_to_others||!1,property_damage:i.property_damage||!1,damage_description:i.damage_description||"",intervention_used:i.intervention_used||"",intervention_effective:i.intervention_effective||!1,intervention_notes:i.intervention_notes||"",follow_up_required:i.follow_up_required||!1,follow_up_notes:i.follow_up_notes||"",notes:i.notes||"",triggers_identified:i.triggers_identified||[]}))},[e,i]);let loadUsers=async()=>{b(!0);try{let e=await I.x.getUsers();d(e.results||[])}catch(e){console.error("Error loading users:",e),q.default.error("Failed to load users")}finally{b(!1)}},handleInputChange=(e,t)=>{n(s=>({...s,[e]:t})),v[e]&&f(t=>({...t,[e]:""}))},handleArrayToggle=(e,t)=>{n(s=>({...s,[e]:s[e].includes(t)?s[e].filter(e=>e!==t):[...s[e],t]}))},addCustomItem=(e,t)=>{t.trim()&&!l[e].includes(t.trim())&&n(s=>({...s,[e]:[...s[e],t.trim()]}))},removeItem=(e,t)=>{n(s=>({...s,[e]:s[e].filter(e=>e!==t)}))},validateForm=()=>{let e={};return l.user||(e.user="User is required"),l.date||(e.date="Date is required"),l.time||(e.time="Time is required"),0===l.behaviors.length&&(e.behaviors="At least one behavior must be selected"),l.intervention_used.trim()||(e.intervention_used="Intervention used is required"),l.duration_minutes&&isNaN(Number(l.duration_minutes))&&(e.duration_minutes="Duration must be a valid number"),l.property_damage&&!l.damage_description.trim()&&(e.damage_description="Damage description is required when property damage occurred"),l.follow_up_required&&!l.follow_up_notes.trim()&&(e.follow_up_notes="Follow-up notes are required when follow-up is needed"),f(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()&&i){u(!0);try{let e={user:l.user,date:l.date,time:l.time,location:l.location,specific_location:l.specific_location||void 0,activity_before:l.activity_before||void 0,behavior_type:l.behavior_type,behaviors:l.behaviors,warning_signs:l.warning_signs,duration_minutes:l.duration_minutes?parseInt(l.duration_minutes):void 0,severity:l.severity,harm_to_self:l.harm_to_self,harm_to_others:l.harm_to_others,property_damage:l.property_damage,damage_description:l.damage_description||void 0,intervention_used:l.intervention_used,intervention_effective:l.intervention_effective,intervention_notes:l.intervention_notes||void 0,follow_up_required:l.follow_up_required,follow_up_notes:l.follow_up_notes||void 0,notes:l.notes||void 0,triggers_identified:l.triggers_identified,is_critical:"critical"===l.severity,requires_immediate_attention:"critical"===l.severity||l.follow_up_required};await I.x.updateBehavior(i.id,e),q.default.success("Behavior log updated successfully!"),s(),handleClose()}catch(e){console.error("Error updating behavior:",e),q.default.error(e.message||"Failed to update behavior log")}finally{u(!1)}}},handleClose=()=>{c||(f({}),N(""),C(""),w(""),t())};return e&&i?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(g.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Edit Behavior Log"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Update behavior incident details"})]})]}),a.jsx("button",{onClick:handleClose,disabled:c,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:a.jsx(k.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(S.Z,{className:"w-4 h-4 inline mr-1"}),"User *"]}),(0,a.jsxs)("select",{value:l.user,onChange:e=>handleInputChange("user",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",v.user?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:c||p,children:[a.jsx("option",{value:"",children:"Select user"}),o.map(e=>a.jsx("option",{value:e.id,children:e.full_name||`${e.first_name} ${e.last_name}`},e.id))]}),v.user&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:v.user})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Date *"}),a.jsx("input",{type:"date",value:l.date,onChange:e=>handleInputChange("date",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",v.date?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:c}),v.date&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:v.date})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(m.Z,{className:"w-4 h-4 inline mr-1"}),"Time *"]}),a.jsx("input",{type:"time",value:l.time,onChange:e=>handleInputChange("time",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",v.time?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:c}),v.time&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:v.time})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(x.Z,{className:"w-4 h-4 inline mr-1"}),"Location *"]}),a.jsx("select",{value:l.location,onChange:e=>handleInputChange("location",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:c,children:z.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Specific Location"}),a.jsx("input",{type:"text",value:l.specific_location,onChange:e=>handleInputChange("specific_location",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"e.g., Living room, Classroom 2A",disabled:c})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(j.Z,{className:"w-4 h-4 inline mr-1"}),"Activity Before"]}),a.jsx("input",{type:"text",value:l.activity_before,onChange:e=>handleInputChange("activity_before",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",placeholder:"What was happening before the behavior?",disabled:c})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Behavior Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Behavior Type *"}),a.jsx("select",{value:l.behavior_type,onChange:e=>handleInputChange("behavior_type",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:c,children:H.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Severity *"}),a.jsx("select",{value:l.severity,onChange:e=>handleInputChange("severity",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:c,children:M.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Duration (minutes)"}),a.jsx("input",{type:"number",value:l.duration_minutes,onChange:e=>handleInputChange("duration_minutes",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",v.duration_minutes?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"5",min:"1",disabled:c}),v.duration_minutes&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:v.duration_minutes})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Specific Behaviors *"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(e=>a.jsx("button",{type:"button",onClick:()=>handleArrayToggle("behaviors",e),className:(0,F.cn)("px-3 py-1 text-sm rounded-full border transition-colors",l.behaviors.includes(e)?"bg-[#4ECDC4] text-white border-[#4ECDC4]":"bg-white text-[#6D6D6D] border-[#D3D3D3] hover:border-[#4ECDC4]"),disabled:c,children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:y,onChange:e=>N(e.target.value),placeholder:"Add custom behavior",className:"flex-1 px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:c}),a.jsx("button",{type:"button",onClick:()=>{addCustomItem("behaviors",y),N("")},className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors",disabled:c||!y.trim(),children:"Add"})]}),l.behaviors.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:l.behaviors.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-[#4ECDC4] text-white text-sm rounded-full",children:[e,a.jsx("button",{type:"button",onClick:()=>removeItem("behaviors",e),className:"text-white hover:text-red-200 ml-1",disabled:c,children:a.jsx(k.Z,{className:"w-3 h-3"})})]},e))}),v.behaviors&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:v.behaviors})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Warning Signs"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(e=>a.jsx("button",{type:"button",onClick:()=>handleArrayToggle("warning_signs",e),className:(0,F.cn)("px-3 py-1 text-sm rounded-full border transition-colors",l.warning_signs.includes(e)?"bg-[#4ECDC4] text-white border-[#4ECDC4]":"bg-white text-[#6D6D6D] border-[#D3D3D3] hover:border-[#4ECDC4]"),disabled:c,children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:D,onChange:e=>w(e.target.value),placeholder:"Add custom warning sign",className:"flex-1 px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:c}),a.jsx("button",{type:"button",onClick:()=>{addCustomItem("warning_signs",D),w("")},className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors",disabled:c||!D.trim(),children:"Add"})]}),l.warning_signs.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:l.warning_signs.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-[#4ECDC4] text-white text-sm rounded-full",children:[e,a.jsx("button",{type:"button",onClick:()=>removeItem("warning_signs",e),className:"text-white hover:text-red-200 ml-1",disabled:c,children:a.jsx(k.Z,{className:"w-3 h-3"})})]},e))})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Triggers Identified"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(e=>a.jsx("button",{type:"button",onClick:()=>handleArrayToggle("triggers_identified",e),className:(0,F.cn)("px-3 py-1 text-sm rounded-full border transition-colors",l.triggers_identified.includes(e)?"bg-[#4ECDC4] text-white border-[#4ECDC4]":"bg-white text-[#6D6D6D] border-[#D3D3D3] hover:border-[#4ECDC4]"),disabled:c,children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:_,onChange:e=>C(e.target.value),placeholder:"Add custom trigger",className:"flex-1 px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:c}),a.jsx("button",{type:"button",onClick:()=>{addCustomItem("triggers_identified",_),C("")},className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors",disabled:c||!_.trim(),children:"Add"})]}),l.triggers_identified.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:l.triggers_identified.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-[#4ECDC4] text-white text-sm rounded-full",children:[e,a.jsx("button",{type:"button",onClick:()=>removeItem("triggers_identified",e),className:"text-white hover:text-red-200 ml-1",disabled:c,children:a.jsx(k.Z,{className:"w-3 h-3"})})]},e))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Risk Assessment"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"harm_to_self",checked:l.harm_to_self,onChange:e=>handleInputChange("harm_to_self",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:c}),a.jsx("label",{htmlFor:"harm_to_self",className:"text-sm text-[#000000]",children:"Harm to Self"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"harm_to_others",checked:l.harm_to_others,onChange:e=>handleInputChange("harm_to_others",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:c}),a.jsx("label",{htmlFor:"harm_to_others",className:"text-sm text-[#000000]",children:"Harm to Others"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"property_damage",checked:l.property_damage,onChange:e=>handleInputChange("property_damage",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:c}),a.jsx("label",{htmlFor:"property_damage",className:"text-sm text-[#000000]",children:"Property Damage"})]})]}),l.property_damage&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Damage Description *"}),a.jsx("textarea",{value:l.damage_description,onChange:e=>handleInputChange("damage_description",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",v.damage_description?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"Describe the property damage",rows:2,disabled:c}),v.damage_description&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:v.damage_description})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Intervention"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Intervention Used *"}),a.jsx("textarea",{value:l.intervention_used,onChange:e=>handleInputChange("intervention_used",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",v.intervention_used?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"Describe the intervention that was used",rows:3,disabled:c}),v.intervention_used&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:v.intervention_used})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"intervention_effective",checked:l.intervention_effective,onChange:e=>handleInputChange("intervention_effective",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:c}),a.jsx("label",{htmlFor:"intervention_effective",className:"text-sm text-[#000000]",children:"Intervention was effective"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"follow_up_required",checked:l.follow_up_required,onChange:e=>handleInputChange("follow_up_required",e.target.checked),className:"w-4 h-4 text-[#4ECDC4] rounded focus:ring-[#4ECDC4]",disabled:c}),a.jsx("label",{htmlFor:"follow_up_required",className:"text-sm text-[#000000]",children:"Follow-up required"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Intervention Notes"}),a.jsx("textarea",{value:l.intervention_notes,onChange:e=>handleInputChange("intervention_notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Additional notes about the intervention",rows:2,disabled:c})]}),l.follow_up_required&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Follow-up Notes *"}),a.jsx("textarea",{value:l.follow_up_notes,onChange:e=>handleInputChange("follow_up_notes",e.target.value),className:(0,F.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",v.follow_up_notes?"border-[#FF6B6B]":"border-[#D3D3D3]"),placeholder:"Describe the follow-up actions required",rows:2,disabled:c}),v.follow_up_notes&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:v.follow_up_notes})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Additional Information"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Notes"}),a.jsx("textarea",{value:l.notes,onChange:e=>handleInputChange("notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Any additional notes or observations",rows:3,disabled:c})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:handleClose,disabled:c,className:"flex-1 px-4 py-2 border border-[#D3D3D3] text-[#6D6D6D] rounded-lg hover:bg-[#F9F5F4] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:c?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(g.Z,{className:"w-4 h-4"}),"Update Behavior Log"]})})]})]})]})}):null}function DeleteBehaviorModal({isOpen:e,onClose:t,onSuccess:s,behavior:i}){let[l,n]=(0,r.useState)(!1),handleDelete=async()=>{if(i){n(!0);try{await I.x.deleteBehavior(i.id),q.default.success("Behavior log deleted successfully!"),s(),t()}catch(e){console.error("Error deleting behavior:",e),q.default.error(e.message||"Failed to delete behavior log")}finally{n(!1)}}};return e&&i?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#FF6B6B] rounded-lg flex items-center justify-center",children:a.jsx(b.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Delete Behavior Log"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"This action cannot be undone"})]})]}),a.jsx("button",{onClick:t,disabled:l,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:a.jsx(k.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-[#FFF5F5] rounded-lg border border-[#FF6B6B] border-opacity-20",children:[a.jsx(v.Z,{className:"w-5 h-5 text-[#FF6B6B]"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[#000000]",children:"Are you sure you want to delete this behavior log?"}),a.jsx("p",{className:"text-sm text-[#6D6D6D] mt-1",children:"This will permanently remove all data associated with this incident."})]})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-lg p-4 space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-[#000000]",children:"Behavior Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[#6D6D6D]",children:"User:"}),a.jsx("div",{className:"text-[#000000] font-medium",children:i.user?.full_name||`${i.user?.first_name} ${i.user?.last_name}`})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[#6D6D6D]",children:"Date & Time:"}),(0,a.jsxs)("div",{className:"text-[#000000] font-medium",children:[(0,F.p6)(i.date)," at ",(0,F.mr)(i.time)]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[#6D6D6D]",children:"Location:"}),a.jsx("div",{className:"text-[#000000] font-medium capitalize",children:i.location.replace("_"," ")})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[#6D6D6D]",children:"Severity:"}),a.jsx("div",{children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${(e=>{switch(e){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(i.severity)}`,children:i.severity.charAt(0).toUpperCase()+i.severity.slice(1)})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[#6D6D6D] text-sm",children:"Behavior Type:"}),a.jsx("div",{className:"text-[#000000] font-medium capitalize",children:i.behavior_type.replace("_"," ")})]}),i.behaviors&&i.behaviors.length>0&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[#6D6D6D] text-sm",children:"Behaviors:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[i.behaviors.slice(0,3).map((e,t)=>a.jsx("span",{className:"px-2 py-1 bg-[#4ECDC4] text-white text-xs rounded-full",children:e},t)),i.behaviors.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-[#D3D3D3] text-[#6D6D6D] text-xs rounded-full",children:["+",i.behaviors.length-3," more"]})]})]}),i.follow_up_required&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(v.Z,{className:"w-4 h-4 text-[#FF6B6B]"}),a.jsx("span",{className:"text-[#FF6B6B] font-medium",children:"Follow-up required"})]})]}),a.jsx("div",{className:"bg-[#FFF5F5] border border-[#FF6B6B] border-opacity-20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(v.Z,{className:"w-5 h-5 text-[#FF6B6B] mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[#000000]",children:"This action is irreversible"}),a.jsx("p",{className:"text-sm text-[#6D6D6D] mt-1",children:"Once deleted, this behavior log and all associated data will be permanently removed from the system. This includes any photos, videos, notes, and intervention records."})]})]})})]}),(0,a.jsxs)("div",{className:"flex gap-4 p-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:t,disabled:l,className:"flex-1 px-4 py-2 border border-[#D3D3D3] text-[#6D6D6D] rounded-lg hover:bg-[#F9F5F4] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"button",onClick:handleDelete,disabled:l,className:"flex-1 px-4 py-2 bg-[#FF6B6B] text-white rounded-lg hover:bg-[#FF5252] transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(b.Z,{className:"w-4 h-4"}),"Delete Behavior Log"]})})]})]})}):null}let BehaviorChart=({behaviors:e})=>{let t=Array.from({length:7},(e,t)=>{let s=new Date;return s.setDate(s.getDate()-t),s.toISOString().split("T")[0]}).reverse(),s=t.map(t=>e.filter(e=>e.date===t).length),r={labels:t.map(e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Behaviors",data:s,backgroundColor:"#FF6B6B",borderColor:"#FF5252",borderWidth:2,tension:.4}]};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-card-title",children:"Behavior Trends (Last 7 Days)"}),a.jsx(n.Z,{className:"w-5 h-5 text-nav-icon"})]}),a.jsx("div",{className:"h-64",children:a.jsx(w.x1,{data:r,options:{...B.q_,plugins:{...B.q_.plugins,legend:{display:!1}},scales:{x:{...B.q_.scales.x,grid:{display:!1}},y:{...B.q_.scales.y,beginAtZero:!0,ticks:{...B.q_.scales.y.ticks,stepSize:1}}}}})})]})},SeverityChart=({behaviors:e})=>{let t={low:e.filter(e=>"low"===e.severity).length,medium:e.filter(e=>"medium"===e.severity).length,high:e.filter(e=>"high"===e.severity).length,critical:e.filter(e=>"critical"===e.severity).length},s={labels:["Low","Medium","High","Critical"],datasets:[{label:"Behaviors by Severity",data:[t.low,t.medium,t.high,t.critical],backgroundColor:["#4ECDC4","#FFA726","#FF6B6B","#D32F2F"],borderColor:["#3DB9B2","#FF9800","#FF5252","#C62828"],borderWidth:2,borderRadius:4}]};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-card-title",children:"Behaviors by Severity"}),a.jsx(n.Z,{className:"w-5 h-5 text-nav-icon"})]}),a.jsx("div",{className:"h-64",children:a.jsx(w.$Q,{data:s,options:{...B.q_,plugins:{...B.q_.plugins,legend:{display:!1}},scales:{x:{...B.q_.scales.x,grid:{display:!1}},y:{...B.q_.scales.y,beginAtZero:!0,ticks:{...B.q_.scales.y.ticks,stepSize:1}}}}})})]})},BehaviorCard=({behavior:e,onEdit:t,onDelete:s})=>{let[i,l]=(0,r.useState)(!1),[n,_]=(0,r.useState)(!1),handleDelete=async()=>{_(!0);try{await s(e.id),l(!1)}catch(e){console.error("Error deleting behavior:",e)}finally{_(!1)}};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"font-semibold text-card-title",children:e.user.full_name}),e.is_critical&&a.jsx(o.Z,{className:"w-4 h-4 text-red-500"}),e.requires_immediate_attention&&a.jsx(d.Z,{className:"w-4 h-4 text-orange-500"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:[(0,F.p6)(e.date)," at ",(0,F.mr)(e.time)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:[e.location,e.specific_location&&` - ${e.specific_location}`]})]}),e.duration_minutes&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4 text-nav-icon"}),(0,a.jsxs)("span",{className:"text-sm text-card-subtext",children:["Duration: ",e.duration_minutes," minutes"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:(0,F.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.severity)),children:e.severity}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("button",{onClick:()=>l(!i),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",disabled:n,children:n?a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}):a.jsx(u.Z,{className:"w-4 h-4 text-nav-icon"})}),i&&a.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-bg-primary border border-border-default rounded-lg shadow-card z-50",children:(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("button",{onClick:()=>t(e),className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors",children:[a.jsx(p.Z,{className:"w-4 h-4 text-nav-icon"}),a.jsx("span",{className:"text-sm text-text-primary",children:"View Details"})]}),(0,a.jsxs)("button",{onClick:()=>t(e),className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors",children:[a.jsx(g.Z,{className:"w-4 h-4 text-nav-icon"}),a.jsx("span",{className:"text-sm text-text-primary",children:"Edit"})]}),(0,a.jsxs)("button",{onClick:handleDelete,disabled:n,className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-bg-highlight transition-colors text-text-danger",children:[n?a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}):a.jsx(b.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Delete"})]})]})})]})]})]}),a.jsx("div",{className:"mb-4",children:a.jsx("span",{className:(0,F.cn)("px-3 py-1 rounded-full text-xs font-medium border",(e=>{switch(e){case"aggression":return"bg-red-50 text-red-700 border-red-200";case"self_injury":return"bg-purple-50 text-purple-700 border-purple-200";case"property_damage":return"bg-orange-50 text-orange-700 border-orange-200";case"elopement":return"bg-blue-50 text-blue-700 border-blue-200";case"non_compliance":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"disruption":return"bg-pink-50 text-pink-700 border-pink-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}})(e.behavior_type)),children:e.behavior_type.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())})}),e.behaviors&&e.behaviors.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs text-card-subtext mb-2",children:"Behaviors Observed:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.behaviors.map((e,t)=>a.jsx("span",{className:"px-2 py-1 bg-btn-primary/10 text-btn-primary rounded-full text-xs",children:e},t))})]}),(e.harm_to_self||e.harm_to_others||e.property_damage)&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs text-card-subtext mb-2",children:"Impact:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.harm_to_self&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs flex items-center gap-1",children:[a.jsx(v.Z,{className:"w-3 h-3"}),"Harm to Self"]}),e.harm_to_others&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs flex items-center gap-1",children:[a.jsx(f.Z,{className:"w-3 h-3"}),"Harm to Others"]}),e.property_damage&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-xs flex items-center gap-1",children:[a.jsx(j.Z,{className:"w-3 h-3"}),"Property Damage"]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs text-card-subtext mb-2",children:"Intervention:"}),a.jsx("p",{className:"text-sm text-card-subtext",children:e.intervention_used||"No intervention specified"}),void 0!==e.intervention_effective&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[e.intervention_effective?a.jsx(y.Z,{className:"w-4 h-4 text-green-500"}):a.jsx(N.Z,{className:"w-4 h-4 text-red-500"}),a.jsx("span",{className:"text-xs text-card-subtext",children:e.intervention_effective?"Effective":"Ineffective"})]})]}),e.follow_up_required&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border-default",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"text-sm font-medium text-orange-700",children:"Follow-up Required"})]}),e.follow_up_notes&&a.jsx("p",{className:"text-sm text-card-subtext mt-1",children:e.follow_up_notes})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border-default",children:[a.jsx("p",{className:"text-xs text-card-subtext mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-card-subtext",children:e.notes})]})]})},BehaviorTable=({behaviors:e,onEdit:t,onDelete:s})=>(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-card-title",children:"All Behaviors"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(_.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),a.jsx("input",{type:"text",placeholder:"Search behaviors...",className:"input-field pl-10 w-64"})]}),(0,a.jsxs)("select",{className:"input-field w-32",children:[a.jsx("option",{value:"all",children:"All Severity"}),a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border-default",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Client"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Date & Time"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Type"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Severity"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Location"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Duration"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Impact"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Intervention"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-primary",children:"Actions"})]})}),a.jsx("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-border-default hover:bg-bg-highlight",children:[a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-text-primary font-medium",children:e.user.full_name}),a.jsx("p",{className:"text-sm text-text-secondary",children:e.user.email})]})}),a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-text-primary",children:(0,F.p6)(e.date)}),a.jsx("p",{className:"text-sm text-text-secondary",children:(0,F.mr)(e.time)})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"px-2 py-1 bg-btn-primary/10 text-btn-primary rounded-full text-xs",children:e.behavior_type.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:(0,F.cn)("px-2 py-1 rounded-full text-xs font-medium","critical"===e.severity&&"bg-red-100 text-red-800","high"===e.severity&&"bg-orange-100 text-orange-800","medium"===e.severity&&"bg-yellow-100 text-yellow-800","low"===e.severity&&"bg-green-100 text-green-800"),children:e.severity})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:e.location})}),a.jsx("td",{className:"py-3 px-4 text-text-secondary",children:e.duration_minutes?`${e.duration_minutes}m`:"-"}),a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.harm_to_self&&a.jsx("span",{className:"px-1 py-0.5 bg-red-100 text-red-800 rounded text-xs",children:"Self"}),e.harm_to_others&&a.jsx("span",{className:"px-1 py-0.5 bg-red-100 text-red-800 rounded text-xs",children:"Others"}),e.property_damage&&a.jsx("span",{className:"px-1 py-0.5 bg-orange-100 text-orange-800 rounded text-xs",children:"Property"})]})}),a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[void 0!==e.intervention_effective&&(e.intervention_effective?a.jsx(y.Z,{className:"w-4 h-4 text-green-500"}):a.jsx(N.Z,{className:"w-4 h-4 text-red-500"})),a.jsx("span",{className:"text-sm text-card-subtext",children:e.intervention_used?e.intervention_used.substring(0,30)+"...":"No intervention specified"})]})}),a.jsx("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>t(e),className:"p-1 text-nav-icon hover:bg-bg-highlight rounded",title:"View Details",children:a.jsx(p.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>t(e),className:"p-1 text-nav-icon hover:bg-bg-highlight rounded",title:"Edit Behavior",children:a.jsx(g.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>s(e.id),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Delete Behavior",children:a.jsx(b.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]});function BehaviorsPage(){let{behaviors:e,isLoading:t,mutate:s}=(0,E.SU)(),[n,d]=(0,r.useState)("grid"),[x,u]=(0,r.useState)(""),[p,g]=(0,r.useState)("all"),[b,j]=(0,r.useState)("all"),[N,w]=(0,r.useState)("all"),[B,k]=(0,r.useState)(!1),[S,I]=(0,r.useState)(!1),[q,Z]=(0,r.useState)(!1),[A,T]=(0,r.useState)(null),L=e.filter(e=>{let t=e.user.full_name?.toLowerCase().includes(x.toLowerCase())||e.behaviors&&e.behaviors.some(e=>e.toLowerCase().includes(x.toLowerCase()))||e.intervention_used?.toLowerCase().includes(x.toLowerCase())||e.notes?.toLowerCase().includes(x.toLowerCase()),s="all"===p||e.severity===p,a="all"===b||e.behavior_type===b,r="all"===N||e.location===N;return t&&s&&a&&r}),handleEditBehavior=e=>{T(e),I(!0)},handleDeleteBehavior=t=>{let s=e.find(e=>e.id===t);s&&(T(s),Z(!0))},handleModalSuccess=()=>{s()};return t?a.jsx(i.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(h.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-btn-primary"}),a.jsx("p",{className:"text-text-secondary",children:"Loading behaviors..."})]})})}):(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(l.Z,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Behaviors"}]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Behavior Management"}),a.jsx("p",{className:"text-text-secondary",children:"Track, analyze, and manage client behaviors and interventions"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-bg-highlight rounded-lg p-1",children:[a.jsx("button",{onClick:()=>d("grid"),className:(0,F.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","grid"===n?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Grid"}),a.jsx("button",{onClick:()=>d("table"),className:(0,F.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors","table"===n?"bg-bg-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"),children:"Table"})]}),(0,a.jsxs)("button",{onClick:()=>k(!0),className:"btn-primary flex items-center gap-2",children:[a.jsx(C.Z,{className:"w-4 h-4"}),"Log Behavior"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Total Behaviors"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.length})]}),a.jsx("div",{className:"w-12 h-12 bg-btn-primary rounded-lg flex items-center justify-center",children:a.jsx(v.Z,{className:"w-6 h-6 text-white"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Critical Behaviors"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>e.is_critical).length})]}),a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:a.jsx(o.Z,{className:"w-6 h-6 text-red-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Follow-up Required"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>e.follow_up_required).length})]}),a.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(m.Z,{className:"w-6 h-6 text-orange-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Intervention Success"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-card-title",children:[(()=>{let t=e.filter(e=>!0===e.intervention_effective).length,s=e.filter(e=>void 0!==e.intervention_effective).length;return 0===s?0:Math.round(t/s*100)})(),"%"]})]}),a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(y.Z,{className:"w-6 h-6 text-green-800"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"High Severity"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"high"===e.severity).length+e.filter(e=>"critical"===e.severity).length})]}),a.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(D.Z,{className:"w-6 h-6 text-orange-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Aggression"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"aggression"===e.behavior_type).length})]}),a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:a.jsx(f.Z,{className:"w-6 h-6 text-red-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Self-Injury"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>"self_injury"===e.behavior_type).length})]}),a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(v.Z,{className:"w-6 h-6 text-purple-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"This Week"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.filter(e=>{let t=new Date(e.date),s=new Date;return s.setDate(s.getDate()-7),t>=s}).length})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(c.Z,{className:"w-6 h-6 text-blue-800"})})]})})]}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(_.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),a.jsx("input",{type:"text",placeholder:"Search by client name, behaviors, intervention, or notes...",value:x,onChange:e=>u(e.target.value),className:"input-field pl-10"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"input-field w-40",children:[a.jsx("option",{value:"all",children:"All Severity"}),a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"input-field w-40",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"aggression",children:"Aggression"}),a.jsx("option",{value:"self_injury",children:"Self-Injury"}),a.jsx("option",{value:"property_damage",children:"Property Damage"}),a.jsx("option",{value:"elopement",children:"Elopement"}),a.jsx("option",{value:"non_compliance",children:"Non-Compliance"}),a.jsx("option",{value:"disruption",children:"Disruption"}),a.jsx("option",{value:"other",children:"Other"})]}),(0,a.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"input-field w-32",children:[a.jsx("option",{value:"all",children:"All Locations"}),a.jsx("option",{value:"home",children:"Home"}),a.jsx("option",{value:"school",children:"School"}),a.jsx("option",{value:"community",children:"Community"}),a.jsx("option",{value:"therapy",children:"Therapy"}),a.jsx("option",{value:"transport",children:"Transport"}),a.jsx("option",{value:"other",children:"Other"})]})]})}),0===L.length?(0,a.jsxs)("div",{className:"card p-12 text-center",children:[a.jsx(v.Z,{className:"w-12 h-12 text-text-muted mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-card-title mb-2",children:"No behaviors found"}),a.jsx("p",{className:"text-text-secondary",children:x||"all"!==p||"all"!==b||"all"!==N?"Try adjusting your search or filters":"No behaviors have been logged yet"})]}):"grid"===n?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(e=>a.jsx(BehaviorCard,{behavior:e,onEdit:handleEditBehavior,onDelete:handleDeleteBehavior},e.id))}):a.jsx(BehaviorTable,{behaviors:L,onEdit:handleEditBehavior,onDelete:handleDeleteBehavior}),e.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(BehaviorChart,{behaviors:e}),a.jsx(SeverityChart,{behaviors:e})]})]}),a.jsx(AddBehaviorModal,{isOpen:B,onClose:()=>k(!1),onSuccess:handleModalSuccess}),a.jsx(EditBehaviorModal,{isOpen:S,onClose:()=>I(!1),onSuccess:handleModalSuccess,behavior:A}),a.jsx(DeleteBehaviorModal,{isOpen:q,onClose:()=>Z(!1),onSuccess:handleModalSuccess,behavior:A})]})}},4032:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var a=s(5153);let r=(0,a.createProxy)(String.raw`/Users/mandaza/Documents/Project/tavonga/web-app/app/behaviors/page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,o=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[4312,9708,6897,516,3223,1717,4809,8610,855,8607,2234,3672,5905,2252],()=>__webpack_exec__(7416));module.exports=s})();