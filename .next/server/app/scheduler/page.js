(()=>{var e={};e.id=2163,e.ids=[2163],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},753:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c});var a=s(7096),l=s(6132),i=s(7284),n=s.n(i),d=s(2564),r={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(r[e]=()=>d[e]);s.d(t,r);let c=["",{children:["scheduler",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8966)),"/Users/mandaza/Documents/Project/tavonga/web-app/app/scheduler/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,498)),"/Users/mandaza/Documents/Project/tavonga/web-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/mandaza/Documents/Project/tavonga/web-app/app/scheduler/page.tsx"],x="/scheduler/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/scheduler/page",pathname:"/scheduler",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1801:(e,t,s)=>{Promise.resolve().then(s.bind(s,9282))},9282:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>SchedulerPage});var a=s(784),l=s(9885),i=s(6729),n=s(7194),d=s(2385),r=s(6206),c=s(9815),o=s(3680),x=s(517),m=s(5441),h=s(87),u=s(8699),g=s(4292),p=s(345);function AddScheduleModal({isOpen:e,onClose:t,onSuccess:s,selectedDate:i}){let[n,b]=(0,l.useState)({activity:"",user:"",date:i||"",scheduled_time:"",notes:""}),[j,v]=(0,l.useState)([]),[f,N]=(0,l.useState)([]),[y,D]=(0,l.useState)(!1),[w,C]=(0,l.useState)(!1),[_,S]=(0,l.useState)({});(0,l.useEffect)(()=>{e&&loadData()},[e]),(0,l.useEffect)(()=>{i&&b(e=>({...e,date:i}))},[i]);let loadData=async()=>{C(!0);try{let[e,t]=await Promise.all([g.x.getActivities({is_active:!0}),g.x.getUsers({role:"carer"})]);v(e.results||[]),N(t.results||[])}catch(e){console.error("Error loading data:",e),p.default.error("Failed to load activities and users")}finally{C(!1)}},handleInputChange=(e,t)=>{b(s=>({...s,[e]:t})),_[e]&&S(t=>({...t,[e]:""}))},validateForm=()=>{let e={};return n.activity||(e.activity="Activity is required"),n.user||(e.user="User/Carer is required"),n.date||(e.date="Date is required"),n.scheduled_time||(e.scheduled_time="Scheduled time is required"),S(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){D(!0);try{let e={activity:n.activity,assigned_user:n.user,scheduled_date:n.date,scheduled_time:n.scheduled_time,notes:n.notes||void 0};await g.x.createSchedule(e),p.default.success("Activity scheduled successfully!"),s(),handleClose()}catch(e){console.error("Error scheduling activity:",e),p.default.error(e.message||"Failed to schedule activity")}finally{D(!1)}}},handleClose=()=>{y||(b({activity:"",user:"",date:i||"",scheduled_time:"",notes:""}),S({}),t())},F=j.find(e=>e.id===n.activity);return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(d.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Schedule Activity"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Add a new activity to the schedule"})]})]}),a.jsx("button",{onClick:handleClose,disabled:y,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:a.jsx(r.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Activity Details"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(c.Z,{className:"w-4 h-4 inline mr-1"}),"Activity *"]}),(0,a.jsxs)("select",{value:n.activity,onChange:e=>handleInputChange("activity",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.activity?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:y||w,children:[a.jsx("option",{value:"",children:"Select an activity"}),j.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.category.replace("_"," "),")"]},e.id))]}),_.activity&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.activity})]}),F&&(0,a.jsxs)("div",{className:"bg-[#EEF8F7] rounded-lg p-4 border border-[#4ECDC4]/20",children:[a.jsx("h4",{className:"font-medium text-[#000000] mb-2",children:F.name}),a.jsx("p",{className:"text-sm text-[#6D6D6D] mb-2",children:F.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-[#6D6D6D]",children:[a.jsx("span",{className:"px-2 py-1 bg-white rounded-md",children:F.category.replace("_"," ")}),a.jsx("span",{className:"px-2 py-1 bg-white rounded-md",children:F.difficulty}),F.estimated_duration&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-white rounded-md",children:["~",F.estimated_duration," min"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Assignment"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(o.Z,{className:"w-4 h-4 inline mr-1"}),"Assigned User/Carer *"]}),(0,a.jsxs)("select",{value:n.user,onChange:e=>handleInputChange("user",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.user?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:y||w,children:[a.jsx("option",{value:"",children:"Select a user/carer"}),f.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))]}),_.user&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.user})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Scheduling"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(x.Z,{className:"w-4 h-4 inline mr-1"}),"Date *"]}),a.jsx("input",{type:"date",value:n.date,onChange:e=>handleInputChange("date",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.date?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:y}),_.date&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.date})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:[a.jsx(m.Z,{className:"w-4 h-4 inline mr-1"}),"Scheduled Time *"]}),a.jsx("input",{type:"time",value:n.scheduled_time,onChange:e=>handleInputChange("scheduled_time",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",_.scheduled_time?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:y}),_.scheduled_time&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:_.scheduled_time})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Additional Information"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Notes"}),a.jsx("textarea",{value:n.notes,onChange:e=>handleInputChange("notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Any special notes or instructions for this activity",rows:3,disabled:y})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:handleClose,disabled:y,className:"px-6 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:y||w,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center space-x-2",children:y?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Scheduling..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(x.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Schedule Activity"})]})})]})]})]})}):null}var b=s(9494),j=s(4409);let v=[{value:"scheduled",label:"Scheduled"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"},{value:"skipped",label:"Skipped"}];function EditScheduleModal({isOpen:e,onClose:t,onSuccess:s,activityLog:i}){let[n,d]=(0,l.useState)({activity:"",user:"",date:"",scheduled_time:"",status:"scheduled",notes:"",completion_notes:"",difficulty_rating:"",satisfaction_rating:""}),[f,N]=(0,l.useState)([]),[y,D]=(0,l.useState)([]),[w,C]=(0,l.useState)(!1),[_,S]=(0,l.useState)(!1),[F,E]=(0,l.useState)({});(0,l.useEffect)(()=>{e&&(loadData(),i&&populateForm(i))},[e,i]);let loadData=async()=>{S(!0);try{let[e,t]=await Promise.all([g.x.getActivities({is_active:!0}),g.x.getUsers({role:"carer"})]);N(e.results||[]),D(t.results||[])}catch(e){console.error("Error loading data:",e),p.default.error("Failed to load activities and users")}finally{S(!1)}},populateForm=e=>{d({activity:e.activity.id,user:e.assigned_user.id,date:e.scheduled_date,scheduled_time:e.scheduled_time,status:e.status,notes:e.notes||"",completion_notes:e.completion_notes||"",difficulty_rating:e.difficulty_rating?e.difficulty_rating.toString():"",satisfaction_rating:e.satisfaction_rating?e.satisfaction_rating.toString():""})},handleInputChange=(e,t)=>{d(s=>({...s,[e]:t})),F[e]&&E(t=>({...t,[e]:""}))},validateForm=()=>{let e={};return n.activity||(e.activity="Activity is required"),n.user||(e.user="User/Carer is required"),n.date||(e.date="Date is required"),n.scheduled_time||(e.scheduled_time="Scheduled time is required"),n.difficulty_rating&&(isNaN(Number(n.difficulty_rating))||1>Number(n.difficulty_rating)||Number(n.difficulty_rating)>5)&&(e.difficulty_rating="Difficulty rating must be between 1 and 5"),n.satisfaction_rating&&(isNaN(Number(n.satisfaction_rating))||1>Number(n.satisfaction_rating)||Number(n.satisfaction_rating)>5)&&(e.satisfaction_rating="Satisfaction rating must be between 1 and 5"),E(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),i&&validateForm()){C(!0);try{let e={activity:n.activity,assigned_user:n.user,scheduled_date:n.date,scheduled_time:n.scheduled_time,status:n.status,completed:"completed"===n.status,notes:n.notes||void 0,completion_notes:n.completion_notes||void 0,difficulty_rating:n.difficulty_rating?parseInt(n.difficulty_rating):void 0,satisfaction_rating:n.satisfaction_rating?parseInt(n.satisfaction_rating):void 0};await g.x.updateSchedule(i.id,e),p.default.success("Activity schedule updated successfully!"),s(),handleClose()}catch(e){console.error("Error updating activity schedule:",e),p.default.error(e.message||"Failed to update activity schedule")}finally{C(!1)}}},handleClose=()=>{w||(E({}),t())},k=i&&("scheduled"===i.status||"cancelled"===i.status),B="completed"===n.status||"in_progress"===n.status;return e&&i?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(b.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Edit Scheduled Activity"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"Update activity schedule and status"})]})]}),a.jsx("button",{onClick:handleClose,disabled:w,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:a.jsx(r.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),a.jsx("div",{className:"p-6 bg-[#F9F5F4] border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(c.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:i.activity.name}),a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"completed":return"bg-[#4ECDC4]/10 text-[#4ECDC4]";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-[#FF6B6B]/10 text-[#FF6B6B]";case"skipped":return"bg-orange-100 text-orange-800"}})(i.status)),children:i.status.replace("_"," ")})]}),a.jsx("p",{className:"text-sm text-[#6D6D6D] mb-3",children:i.activity.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-[#6D6D6D]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(x.Z,{className:"w-4 h-4"}),a.jsx("span",{children:(0,u.p6)(i.scheduled_date)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(m.Z,{className:"w-4 h-4"}),a.jsx("span",{children:(0,u.mr)(i.scheduled_time)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(o.Z,{className:"w-4 h-4"}),a.jsx("span",{children:i.assigned_user.full_name})]})]})]})]})}),!k&&a.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[a.jsx(j.Z,{className:"w-5 h-5 text-orange-500 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-orange-800 mb-1",children:"Limited Editing"}),(0,a.jsxs)("p",{className:"text-sm text-orange-700",children:["This activity is ",i.status,". Only certain fields can be modified for ",i.status," activities."]})]})]})}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Activity & Assignment"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Activity *"}),(0,a.jsxs)("select",{value:n.activity,onChange:e=>handleInputChange("activity",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",F.activity?"border-[#FF6B6B]":"border-[#D3D3D3]",!k&&"bg-gray-100"),disabled:!k||w||_,children:[a.jsx("option",{value:"",children:"Select an activity"}),f.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.category.replace("_"," "),")"]},e.id))]}),F.activity&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:F.activity})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Assigned User/Carer *"}),(0,a.jsxs)("select",{value:n.user,onChange:e=>handleInputChange("user",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",F.user?"border-[#FF6B6B]":"border-[#D3D3D3]",!k&&"bg-gray-100"),disabled:!k||w||_,children:[a.jsx("option",{value:"",children:"Select a user/carer"}),y.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))]}),F.user&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:F.user})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Schedule & Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Date *"}),a.jsx("input",{type:"date",value:n.date,onChange:e=>handleInputChange("date",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",F.date?"border-[#FF6B6B]":"border-[#D3D3D3]",!k&&"bg-gray-100"),disabled:!k||w}),F.date&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:F.date})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Scheduled Time *"}),a.jsx("input",{type:"time",value:n.scheduled_time,onChange:e=>handleInputChange("scheduled_time",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",F.scheduled_time?"border-[#FF6B6B]":"border-[#D3D3D3]",!k&&"bg-gray-100"),disabled:!k||w}),F.scheduled_time&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:F.scheduled_time})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Status *"}),a.jsx("select",{value:n.status,onChange:e=>handleInputChange("status",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",disabled:w,children:v.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]})]})]}),B&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Completion Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Difficulty Rating (1-5)"}),(0,a.jsxs)("select",{value:n.difficulty_rating,onChange:e=>handleInputChange("difficulty_rating",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",F.difficulty_rating?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:w,children:[a.jsx("option",{value:"",children:"Select rating"}),a.jsx("option",{value:"1",children:"1 - Very Easy"}),a.jsx("option",{value:"2",children:"2 - Easy"}),a.jsx("option",{value:"3",children:"3 - Moderate"}),a.jsx("option",{value:"4",children:"4 - Difficult"}),a.jsx("option",{value:"5",children:"5 - Very Difficult"})]}),F.difficulty_rating&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:F.difficulty_rating})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Satisfaction Rating (1-5)"}),(0,a.jsxs)("select",{value:n.satisfaction_rating,onChange:e=>handleInputChange("satisfaction_rating",e.target.value),className:(0,u.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",F.satisfaction_rating?"border-[#FF6B6B]":"border-[#D3D3D3]"),disabled:w,children:[a.jsx("option",{value:"",children:"Select rating"}),a.jsx("option",{value:"1",children:"1 - Very Unsatisfied"}),a.jsx("option",{value:"2",children:"2 - Unsatisfied"}),a.jsx("option",{value:"3",children:"3 - Neutral"}),a.jsx("option",{value:"4",children:"4 - Satisfied"}),a.jsx("option",{value:"5",children:"5 - Very Satisfied"})]}),F.satisfaction_rating&&a.jsx("p",{className:"mt-1 text-sm text-[#FF6B6B]",children:F.satisfaction_rating})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"Completion Notes"}),a.jsx("textarea",{value:n.completion_notes,onChange:e=>handleInputChange("completion_notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Notes about the completion of this activity",rows:3,disabled:w})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:"Notes"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000] mb-2",children:"General Notes"}),a.jsx("textarea",{value:n.notes,onChange:e=>handleInputChange("notes",e.target.value),className:"w-full px-3 py-2 border border-[#D3D3D3] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] resize-none",placeholder:"Any additional notes about this activity",rows:3,disabled:w})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:handleClose,disabled:w,className:"px-6 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:w,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3DB9B2] transition-colors disabled:opacity-50 flex items-center space-x-2",children:w?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Updating..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(b.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Update Schedule"})]})})]})]})]})}):null}var f=s(6303),N=s(1922);let y=[{id:1,label:"Review Activity",description:"Verify activity details"},{id:2,label:"Confirm Deletion",description:"Final confirmation"}];function DeleteScheduleModal({isOpen:e,onClose:t,onSuccess:s,activityLog:i}){let[n,d]=(0,l.useState)(1),[b,v]=(0,l.useState)(!1),[D,w]=(0,l.useState)(""),handleClose=()=>{b||(d(1),w(""),t())},handleDelete=async()=>{if(i){v(!0);try{await g.x.deleteSchedule(i.id),p.default.success("Activity schedule deleted successfully!"),s(),handleClose()}catch(e){console.error("Error deleting activity schedule:",e),p.default.error(e.message||"Failed to delete activity schedule")}finally{v(!1)}}},getDangerLevel=e=>{switch(e){case"completed":case"in_progress":return"high";case"scheduled":return"medium";default:return"low"}},C="delete"===D.toLowerCase();return e&&i?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-[20px] w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#FF6B6B] rounded-lg flex items-center justify-center",children:a.jsx(f.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#000000]",children:"Delete Scheduled Activity"}),a.jsx("p",{className:"text-sm text-[#6D6D6D]",children:"This action cannot be undone"})]})]}),a.jsx("button",{onClick:handleClose,disabled:b,className:"p-2 hover:bg-[#F9F5F4] rounded-lg transition-colors",children:a.jsx(r.Z,{className:"w-5 h-5 text-[#6D6D6D]"})})]}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center justify-between mb-4",children:y.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:(0,u.cn)("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",n>=e.id?"bg-[#FF6B6B] text-white":"bg-gray-200 text-gray-600"),children:e.id}),(0,a.jsxs)("div",{className:"ml-3",children:[a.jsx("p",{className:(0,u.cn)("text-sm font-medium",n>=e.id?"text-[#000000]":"text-[#6D6D6D]"),children:e.label}),a.jsx("p",{className:"text-xs text-[#6D6D6D]",children:e.description})]})]}),t<y.length-1&&a.jsx(N.Z,{className:"w-5 h-5 text-[#6D6D6D] mx-4"})]},e.id))})}),(0,a.jsxs)("div",{className:"p-6",children:[1===n&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-[#F9F5F4] rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:a.jsx(c.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#000000]",children:i.activity.name}),a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium",(e=>{switch(e){case"completed":return"bg-[#4ECDC4]/10 text-[#4ECDC4]";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-[#FF6B6B]/10 text-[#FF6B6B]";case"skipped":return"bg-orange-100 text-orange-800"}})(i.status)),children:i.status.replace("_"," ")})]}),a.jsx("p",{className:"text-sm text-[#6D6D6D] mb-3",children:i.activity.description}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Scheduled Date"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-4 h-4 text-[#4ECDC4]"}),a.jsx("span",{className:"text-sm font-medium text-[#000000]",children:(0,u.p6)(i.scheduled_date)})]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Scheduled Time"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4 text-[#4ECDC4]"}),a.jsx("span",{className:"text-sm font-medium text-[#000000]",children:(0,u.mr)(i.scheduled_time)})]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Assigned User"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-4 h-4 text-[#4ECDC4]"}),a.jsx("span",{className:"text-sm font-medium text-[#000000]",children:i.assigned_user.full_name})]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Category"}),a.jsx("span",{className:"text-sm font-medium text-[#000000]",children:i.activity.category.replace("_"," ")})]})]}),i.completed&&(0,a.jsxs)("div",{className:"bg-[#EEF8F7] rounded-lg p-4 border border-[#4ECDC4]/20",children:[a.jsx("h4",{className:"font-semibold text-[#000000] mb-2",children:"Completion Data"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.difficulty_rating&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[#6D6D6D]",children:"Difficulty Rating:"}),(0,a.jsxs)("span",{className:"text-[#000000] font-medium ml-2",children:[i.difficulty_rating,"/5"]})]}),i.satisfaction_rating&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[#6D6D6D]",children:"Satisfaction Rating:"}),(0,a.jsxs)("span",{className:"text-[#000000] font-medium ml-2",children:[i.satisfaction_rating,"/5"]})]})]}),i.completion_notes&&(0,a.jsxs)("div",{className:"mt-3",children:[a.jsx("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Completion Notes"}),a.jsx("p",{className:"text-sm text-[#000000]",children:i.completion_notes})]})]}),i.notes&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("p",{className:"text-xs text-[#6D6D6D] mb-1",children:"Notes"}),a.jsx("p",{className:"text-sm text-[#000000] bg-white rounded-md p-2 border",children:i.notes})]})]})]})}),(0,a.jsxs)("div",{className:(0,u.cn)("flex items-start gap-3 p-4 rounded-lg border","high"===getDangerLevel(i.status)&&"bg-red-50 border-red-200","medium"===getDangerLevel(i.status)&&"bg-orange-50 border-orange-200","low"===getDangerLevel(i.status)&&"bg-yellow-50 border-yellow-200"),children:[a.jsx(j.Z,{className:(0,u.cn)("w-5 h-5 mt-0.5","high"===getDangerLevel(i.status)&&"text-red-500","medium"===getDangerLevel(i.status)&&"text-orange-500","low"===getDangerLevel(i.status)&&"text-yellow-500")}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:(0,u.cn)("font-semibold mb-1","high"===getDangerLevel(i.status)&&"text-red-800","medium"===getDangerLevel(i.status)&&"text-orange-800","low"===getDangerLevel(i.status)&&"text-yellow-800"),children:"high"===getDangerLevel(i.status)?"High Risk Deletion":"medium"===getDangerLevel(i.status)?"Medium Risk Deletion":"Deletion Warning"}),a.jsx("p",{className:(0,u.cn)("text-sm","high"===getDangerLevel(i.status)&&"text-red-700","medium"===getDangerLevel(i.status)&&"text-orange-700","low"===getDangerLevel(i.status)&&"text-yellow-700"),children:(e=>{switch(e){case"completed":return"This activity has been completed. Deleting it will remove all completion data and ratings.";case"in_progress":return"This activity is currently in progress. Deleting it will interrupt the current session.";case"scheduled":return"This activity is scheduled for the future. Deleting it will remove it from the schedule.";case"cancelled":return"This activity was cancelled. Deleting it will permanently remove it from records.";case"skipped":return"This activity was skipped. Deleting it will permanently remove it from records.";default:return"This will permanently delete the activity schedule."}})(i.status)})]})]})]}),2===n&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-[#FF6B6B] rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(j.Z,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-lg font-semibold text-[#000000] mb-2",children:"Final Confirmation"}),a.jsx("p",{className:"text-sm text-[#6D6D6D] mb-6",children:"Are you absolutely sure you want to delete this activity schedule? This action cannot be undone."})]}),(0,a.jsxs)("div",{className:"bg-[#F9F5F4] rounded-lg p-4 border border-[#FF6B6B]/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(c.Z,{className:"w-5 h-5 text-[#FF6B6B]"}),a.jsx("span",{className:"font-medium text-[#000000]",children:i.activity.name})]}),(0,a.jsxs)("div",{className:"text-sm text-[#6D6D6D]",children:[(0,a.jsxs)("p",{children:["User: ",i.assigned_user.full_name]}),(0,a.jsxs)("p",{children:["Date: ",(0,u.p6)(i.scheduled_date)," at ",(0,u.mr)(i.scheduled_time)]}),(0,a.jsxs)("p",{children:["Status: ",i.status.replace("_"," ")]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-sm font-medium text-[#000000]",children:'Type "DELETE" to confirm deletion'}),a.jsx("input",{type:"text",value:D,onChange:e=>w(e.target.value),placeholder:"Type DELETE to confirm",className:"w-full px-3 py-2 border border-[#FF6B6B] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6B6B] focus:border-[#FF6B6B]",disabled:b}),a.jsx("p",{className:"text-xs text-[#6D6D6D]",children:"This will permanently delete the activity schedule and all associated data."})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"text-sm text-[#6D6D6D]",children:["Step ",n," of ",y.length]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[n>1&&a.jsx("button",{onClick:()=>{n>1&&d(n-1)},disabled:b,className:"px-4 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Previous"}),a.jsx("button",{onClick:handleClose,disabled:b,className:"px-4 py-2 border border-[#E0E0E0] rounded-lg text-[#000000] hover:bg-[#F0F0F0] transition-colors disabled:opacity-50",children:"Cancel"}),n<y.length?a.jsx("button",{onClick:()=>{n<y.length&&d(n+1)},disabled:b,className:"px-4 py-2 bg-[#FF6B6B] text-white rounded-lg hover:bg-[#FF5252] transition-colors disabled:opacity-50",children:"Next"}):a.jsx("button",{onClick:handleDelete,disabled:b||!C,className:"px-4 py-2 bg-[#FF6B6B] text-white rounded-lg hover:bg-[#FF5252] transition-colors disabled:opacity-50 flex items-center space-x-2",children:b?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Deleting..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(f.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Delete Activity"})]})})]})]})]})}):null}var D=s(1910),w=s(2032),C=s(1831),_=s(8200),S=s(3488),F=s(5905);let formatLocalDate=e=>{let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${a}`},getTodayLocalDate=()=>formatLocalDate(new Date),generateCalendarDays=(e,t)=>{let s=new Date(e,t,1),a=new Date(e,t+1,0),l=new Date(s),i=new Date(a);l.setDate(l.getDate()-l.getDay()),i.setDate(i.getDate()+(6-i.getDay()));let n=[],d=new Date(l);for(;d<=i;)n.push(new Date(d)),d.setDate(d.getDate()+1);return n},generateWeekDays=e=>{let t=[],s=new Date(e);for(let e=0;e<7;e++)t.push(new Date(s)),s.setDate(s.getDate()+1);return t},getWeekStart=e=>{let t=new Date(e);return t.setDate(t.getDate()-t.getDay()),t},CalendarDay=({date:e,activities:t,onAddSchedule:s,onEditSchedule:l,isCurrentMonth:i=!0,view:n="month"})=>{let r=new Date().toDateString()===e.toDateString(),c=e.toLocaleDateString("en-US",{weekday:"short"}),o=e.getDate(),x=e<new Date(new Date().setHours(0,0,0,0)),h="month"===n?"min-h-[120px]":"min-h-[200px]";return(0,a.jsxs)("div",{className:(0,u.cn)("border border-border-default rounded-lg p-3",h,r&&"bg-bg-highlight border-btn-primary",!i&&"opacity-40",x&&"bg-gray-50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:["week"===n&&a.jsx("p",{className:"text-xs text-text-muted",children:c}),a.jsx("p",{className:(0,u.cn)("text-sm font-semibold",r?"text-btn-primary":"text-text-primary",!i&&"text-text-muted"),children:o})]}),r&&a.jsx("div",{className:"w-2 h-2 bg-btn-primary rounded-full"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[t.slice(0,"month"===n?3:10).map((e,t)=>(0,a.jsxs)("div",{className:(0,u.cn)("text-xs p-2 rounded cursor-pointer transition-colors","completed"===e.status?"bg-green-100 text-green-800 hover:bg-green-200":"in_progress"===e.status?"bg-blue-100 text-blue-800 hover:bg-blue-200":"cancelled"===e.status?"bg-red-100 text-red-800 hover:bg-red-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"),onClick:()=>l(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(m.Z,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate",children:e.scheduled_time})]}),a.jsx("div",{className:"truncate font-medium",children:e.activity?.name||"Activity"})]},e.id||t)),t.length>("month"===n?3:10)&&(0,a.jsxs)("div",{className:"text-xs text-text-muted",children:["+",t.length-("month"===n?3:10)," more"]})]}),!x&&(0,a.jsxs)("button",{onClick:()=>s(formatLocalDate(e)),className:"mt-2 w-full text-xs text-btn-primary hover:bg-bg-highlight p-1 rounded transition-colors flex items-center justify-center gap-1",children:[a.jsx(d.Z,{className:"w-3 h-3"}),"Add"]})]})},MonthView=({activityLogs:e,onAddSchedule:t,onEditSchedule:s,onDeleteSchedule:l,currentDate:i,onDateChange:n})=>{let d=generateCalendarDays(i.getFullYear(),i.getMonth()),getActivitiesForDate=t=>{let s=formatLocalDate(t);return e.filter(e=>e.scheduled_date===s)||[]},navigateMonth=e=>{let t=new Date(i);"prev"===e?t.setMonth(t.getMonth()-1):t.setMonth(t.getMonth()+1),n(t)};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("div",{children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-card-title",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()]," ",i.getFullYear()]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{n(new Date)},className:"px-3 py-1 text-sm bg-btn-primary text-white rounded hover:bg-btn-primary-hover transition-colors",children:"Today"}),a.jsx("button",{onClick:()=>navigateMonth("prev"),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",children:a.jsx(D.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>navigateMonth("next"),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",children:a.jsx(N.Z,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>a.jsx("div",{className:"text-center text-sm font-medium text-text-secondary py-2",children:e},e))}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:d.map((e,l)=>{let n=e.getMonth()===i.getMonth(),d=getActivitiesForDate(e);return a.jsx(CalendarDay,{date:e,activities:d,onAddSchedule:t,onEditSchedule:s,isCurrentMonth:n,view:"month"},l)})})]})},WeekView=({activityLogs:e,onAddSchedule:t,onEditSchedule:s,onDeleteSchedule:l,currentDate:i,onDateChange:n})=>{let d=getWeekStart(i),r=generateWeekDays(d),getActivitiesForDate=t=>{let s=formatLocalDate(t);return e.filter(e=>e.scheduled_date===s)||[]},navigateWeek=e=>{let t=new Date(i);"prev"===e?t.setDate(t.getDate()-7):t.setDate(t.getDate()+7),n(t)};return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("div",{children:a.jsx("h3",{className:"text-lg font-semibold text-card-title",children:(e=>{let t=new Date(e);return(t.setDate(t.getDate()+6),e.getMonth()===t.getMonth())?`${e.toLocaleDateString("en-US",{month:"long",day:"numeric"})} - ${t.getDate()}, ${e.getFullYear()}`:`${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}, ${t.getFullYear()}`})(d)})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{n(new Date)},className:"px-3 py-1 text-sm bg-btn-primary text-white rounded hover:bg-btn-primary-hover transition-colors",children:"Today"}),a.jsx("button",{onClick:()=>navigateWeek("prev"),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",children:a.jsx(D.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>navigateWeek("next"),className:"p-2 rounded-lg hover:bg-bg-highlight transition-colors",children:a.jsx(N.Z,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"grid grid-cols-7 gap-4",children:r.map((e,l)=>{let i=getActivitiesForDate(e);return a.jsx(CalendarDay,{date:e,activities:i,onAddSchedule:t,onEditSchedule:s,view:"week"},l)})})]})},ActivityList=({activityLogs:e,onAddSchedule:t,onEditSchedule:s,onDeleteSchedule:l})=>{let i=getTodayLocalDate(),n=e.filter(e=>e.scheduled_date===i);return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-card-title",children:"Today's Activities"}),(0,a.jsxs)("button",{onClick:()=>t(i),className:"btn-primary flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-4 h-4"}),"Schedule Activity"]})]}),a.jsx("div",{className:"space-y-3",children:0===n.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-card-subtext mb-4",children:"No activities scheduled for today"}),(0,a.jsxs)("button",{onClick:()=>t(i),className:"btn-primary flex items-center gap-2 mx-auto",children:[a.jsx(d.Z,{className:"w-4 h-4"}),"Schedule First Activity"]})]}):n.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-bg-highlight rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:(0,u.cn)("w-3 h-3 rounded-full","completed"===e.status&&"bg-text-positive","in_progress"===e.status&&"bg-blue-500","scheduled"===e.status&&"bg-gray-400","cancelled"===e.status&&"bg-text-danger")}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-card-title",children:e.activity.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(m.Z,{className:"w-3 h-3 text-nav-icon"}),a.jsx("span",{className:"text-xs text-card-subtext",children:(0,u.mr)(e.scheduled_time)})]}),e.assigned_user&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(o.Z,{className:"w-3 h-3 text-nav-icon"}),a.jsx("span",{className:"text-xs text-card-subtext",children:e.assigned_user.full_name})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:(0,u.cn)("px-2 py-1 rounded-full text-xs font-medium","completed"===e.status&&"bg-text-positive/10 text-text-positive","in_progress"===e.status&&"bg-blue-100 text-blue-800","scheduled"===e.status&&"bg-gray-100 text-gray-800","cancelled"===e.status&&"bg-text-danger/10 text-text-danger"),children:e.status.replace("_"," ")}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>s(e),className:"p-1 text-[#4ECDC4] hover:bg-[#4ECDC4]/10 rounded",title:"Edit activity",children:a.jsx(b.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>l(e),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Delete activity",children:a.jsx(f.Z,{className:"w-4 h-4"})})]})]})]},e.id))})]})},ActiveActivitiesStatus=({activityLogs:e,onEditSchedule:t,onDeleteSchedule:s})=>{let l=e.filter(e=>"in_progress"===e.status),i=e.filter(e=>"completed"===e.status);return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-card-title flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-5 h-5 text-blue-500"}),"In Progress Activities (",l.length,")"]})}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===l.length?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-card-subtext",children:"No activities in progress"})}):l.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-card-title",children:e.activity.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(x.Z,{className:"w-3 h-3 text-nav-icon"}),a.jsx("span",{className:"text-xs text-card-subtext",children:(0,u.p6)(e.scheduled_date)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(m.Z,{className:"w-3 h-3 text-nav-icon"}),a.jsx("span",{className:"text-xs text-card-subtext",children:(0,u.mr)(e.scheduled_time)})]}),e.assigned_user&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(o.Z,{className:"w-3 h-3 text-nav-icon"}),a.jsx("span",{className:"text-xs text-card-subtext",children:e.assigned_user.full_name})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"In Progress"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>t(e),className:"p-1 text-[#4ECDC4] hover:bg-[#4ECDC4]/10 rounded",title:"Edit activity",children:a.jsx(b.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>s(e),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Delete activity",children:a.jsx(f.Z,{className:"w-4 h-4"})})]})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-card-title flex items-center gap-2",children:[a.jsx(w.Z,{className:"w-5 h-5 text-text-positive"}),"Completed Activities (",i.length,")"]})}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===i.length?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-card-subtext",children:"No completed activities"})}):i.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-3 h-3 bg-text-positive rounded-full"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-card-title",children:e.activity.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(x.Z,{className:"w-3 h-3 text-nav-icon"}),a.jsx("span",{className:"text-xs text-card-subtext",children:(0,u.p6)(e.scheduled_date)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(m.Z,{className:"w-3 h-3 text-nav-icon"}),a.jsx("span",{className:"text-xs text-card-subtext",children:(0,u.mr)(e.scheduled_time)})]}),e.assigned_user&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(o.Z,{className:"w-3 h-3 text-nav-icon"}),a.jsx("span",{className:"text-xs text-card-subtext",children:e.assigned_user.full_name})]})]}),e.completion_percentage&&a.jsx("div",{className:"mt-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-text-positive h-2 rounded-full transition-all duration-300",style:{width:`${e.completion_percentage}%`}})}),(0,a.jsxs)("span",{className:"text-xs text-card-subtext",children:[e.completion_percentage,"%"]})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-text-positive/10 text-text-positive",children:"Completed"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>t(e),className:"p-1 text-[#4ECDC4] hover:bg-[#4ECDC4]/10 rounded",title:"Edit activity",children:a.jsx(b.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>s(e),className:"p-1 text-text-danger hover:bg-text-danger/10 rounded",title:"Delete activity",children:a.jsx(f.Z,{className:"w-4 h-4"})})]})]})]},e.id))})]})]})},QuickStats=({activityLogs:e})=>{let t=getTodayLocalDate(),s=e.filter(e=>e.scheduled_date===t);return console.log("=== QuickStats Debug ==="),console.log("Today (local):",t),console.log("Total activities:",e.length),console.log("Activity dates:",e.map(e=>({id:e.id,date:e.scheduled_date,status:e.status}))),console.log("Today activities found:",s.length),console.log("Scheduled today:",s.filter(e=>"scheduled"===e.status).length),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Scheduled Today"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:s.filter(e=>"scheduled"===e.status).length||0})]}),a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx(x.Z,{className:"w-6 h-6 text-gray-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"In Progress"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:s.filter(e=>"in_progress"===e.status).length||0})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(m.Z,{className:"w-6 h-6 text-blue-800"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Completed"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:s.filter(e=>"completed"===e.status).length||0})]}),a.jsx("div",{className:"w-12 h-12 bg-text-positive/10 rounded-lg flex items-center justify-center",children:a.jsx(w.Z,{className:"w-6 h-6 text-text-positive"})})]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-card-subtext",children:"Total Activities"}),a.jsx("p",{className:"text-2xl font-bold text-card-title",children:e.length})]}),a.jsx("div",{className:"w-12 h-12 bg-btn-primary rounded-lg flex items-center justify-center",children:a.jsx(d.Z,{className:"w-6 h-6 text-white"})})]})})]})};function SchedulerPage(){let[e,t]=(0,l.useState)(!1),[s,r]=(0,l.useState)(!1),[c,o]=(0,l.useState)(!1),[x,m]=(0,l.useState)(null),[h,g]=(0,l.useState)(""),[b,j]=(0,l.useState)("month"),[v,f]=(0,l.useState)(new Date),{schedules:N,isLoading:y,isError:D,mutate:w}=(0,F.gZ)(),handleAddSchedule=e=>{e&&g(e),t(!0)},handleEditSchedule=e=>{m(e),r(!0)},handleDeleteSchedule=e=>{m(e),o(!0)},handleModalSuccess=()=>{w(),p.default.success("Schedule updated successfully!")},handleModalClose=()=>{m(null),g("")},handleViewChange=e=>{j(e)};return y?a.jsx(i.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-btn-primary"})})}):D?a.jsx(i.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(C.Z,{className:"w-16 h-16 text-text-danger mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Error Loading Schedule"}),a.jsx("p",{className:"text-text-secondary",children:"Please try refreshing the page"})]})})}):(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(n.Z,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Scheduler"}]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Activity Scheduler"}),a.jsx("p",{className:"text-text-secondary",children:"Plan and schedule daily activities with full calendar functionality"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,a.jsxs)("button",{onClick:()=>handleViewChange("month"),className:(0,u.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors flex items-center gap-2","month"===b?"bg-white text-btn-primary shadow-sm":"text-gray-600 hover:text-gray-900"),children:[a.jsx(_.Z,{className:"w-4 h-4"}),"Month"]}),(0,a.jsxs)("button",{onClick:()=>handleViewChange("week"),className:(0,u.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors flex items-center gap-2","week"===b?"bg-white text-btn-primary shadow-sm":"text-gray-600 hover:text-gray-900"),children:[a.jsx(S.Z,{className:"w-4 h-4"}),"Week"]})]}),(0,a.jsxs)("button",{onClick:()=>handleAddSchedule(),className:"btn-primary flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-4 h-4"}),"Schedule Activity"]})]})]}),a.jsx(QuickStats,{activityLogs:N}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[a.jsx("div",{className:"xl:col-span-3",children:"month"===b?a.jsx(MonthView,{activityLogs:N,onAddSchedule:handleAddSchedule,onEditSchedule:handleEditSchedule,onDeleteSchedule:handleDeleteSchedule,currentDate:v,onDateChange:f}):a.jsx(WeekView,{activityLogs:N,onAddSchedule:handleAddSchedule,onEditSchedule:handleEditSchedule,onDeleteSchedule:handleDeleteSchedule,currentDate:v,onDateChange:f})}),a.jsx("div",{className:"xl:col-span-1",children:a.jsx(ActivityList,{activityLogs:N,onAddSchedule:handleAddSchedule,onEditSchedule:handleEditSchedule,onDeleteSchedule:handleDeleteSchedule})})]}),a.jsx("div",{className:"xl:hidden",children:a.jsx(ActiveActivitiesStatus,{activityLogs:N,onEditSchedule:handleEditSchedule,onDeleteSchedule:handleDeleteSchedule})})]}),a.jsx(AddScheduleModal,{isOpen:e,onClose:()=>{t(!1),handleModalClose()},onSuccess:handleModalSuccess,selectedDate:h}),a.jsx(EditScheduleModal,{isOpen:s,onClose:()=>{r(!1),handleModalClose()},onSuccess:handleModalSuccess,activityLog:x}),a.jsx(DeleteScheduleModal,{isOpen:c,onClose:()=>{o(!1),handleModalClose()},onSuccess:handleModalSuccess,activityLog:x})]})}},8966:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>r});var a=s(5153);let l=(0,a.createProxy)(String.raw`/Users/mandaza/Documents/Project/tavonga/web-app/app/scheduler/page.tsx`),{__esModule:i,$$typeof:n}=l,d=l.default,r=d}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[4312,9708,6897,516,354,2234,3672,5905],()=>__webpack_exec__(753));module.exports=s})();